"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[55900],{900:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var s=n(68);let r=window.PluginBaseClass;class o extends r{init(){this._client=new s.A(window.accessKey,window.contextToken),this._registerEvents()}_registerEvents(){this.el.addEventListener("click",e=>{let t=this.el.dataset.moorlModal;t&&(e.preventDefault(),this._openModal(t))})}_openModal(e,t){this._client.get(e,e=>{let n=document.getElementById("moorlFoundationModal");n||console.error("#moorlFoundationModal not found. Please be sure, that views/storefront/base.html.twig is extended correctly"),n.innerHTML=e;let s=bootstrap.Modal.getInstance(n)??new bootstrap.Modal(n);s.show(),window.PluginManager.initializePlugins(),n.addEventListener("hidden.bs.modal",()=>{n.innerHTML=""}),"function"==typeof t&&t(n,s)})}}},68:(e,t,n)=>{n.d(t,{A:()=>s});class s{constructor(){this._request=null,this._errorHandlingInternal=!1}get(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",s=this._createPreparedRequest("GET",e,n);return this._sendRequest(s,null,t)}post(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";s=this._getContentType(t,s);let r=this._createPreparedRequest("POST",e,s);return this._sendRequest(r,t,n)}delete(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";s=this._getContentType(t,s);let r=this._createPreparedRequest("DELETE",e,s);return this._sendRequest(r,t,n)}patch(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";s=this._getContentType(t,s);let r=this._createPreparedRequest("PATCH",e,s);return this._sendRequest(r,t,n)}abort(){if(this._request)return this._request.abort()}setErrorHandlingInternal(e){this._errorHandlingInternal=e}_registerOnLoaded(e,t){t&&(!0===this._errorHandlingInternal?(e.addEventListener("load",()=>{t(e.responseText,e)}),e.addEventListener("abort",()=>{console.warn(`the request to ${e.responseURL} was aborted`)}),e.addEventListener("error",()=>{console.warn(`the request to ${e.responseURL} failed with status ${e.status}`)}),e.addEventListener("timeout",()=>{console.warn(`the request to ${e.responseURL} timed out`)})):e.addEventListener("loadend",()=>{t(e.responseText,e)}))}_sendRequest(e,t,n){return this._registerOnLoaded(e,n),e.send(t),e}_getContentType(e,t){return e instanceof FormData&&(t=!1),t}_createPreparedRequest(e,t,n){return this._request=new XMLHttpRequest,this._request.open(e,t),this._request.setRequestHeader("X-Requested-With","XMLHttpRequest"),n&&this._request.setRequestHeader("Content-type",n),this._request}}}}]);