(()=>{var t={564:function(t,e){var i,n,s;i={ar:{touch:"استخدم إصبعين لتحريك الخريطة",scroll:"‏استخدم ctrl + scroll لتصغير/تكبير الخريطة",scrollMac:"يمكنك استخدام ⌘ + التمرير لتكبير/تصغير الخريطة"},bg:{touch:"Използвайте два пръста, за да преместите картата",scroll:"Задръжте бутона Ctrl натиснат, докато превъртате, за да промените мащаба на картата",scrollMac:"Задръжте бутона ⌘ натиснат, докато превъртате, за да промените мащаба на картата"},bn:{touch:"মানচিত্রটিকে সরাতে দুটি আঙ্গুল ব্যবহার করুন",scroll:"ম্যাপ জুম করতে ctrl + scroll ব্যবহার করুন",scrollMac:"ম্যাপে জুম করতে ⌘ বোতাম টিপে স্ক্রল করুন"},ca:{touch:"Fes servir dos dits per moure el mapa",scroll:"Prem la tecla Control mentre et desplaces per apropar i allunyar el mapa",scrollMac:"Prem la tecla ⌘ mentre et desplaces per apropar i allunyar el mapa"},cs:{touch:"K posunutí mapy použijte dva prsty",scroll:"Velikost zobrazení mapy změňte podržením klávesy Ctrl a posouváním kolečka myši",scrollMac:"Velikost zobrazení mapy změníte podržením klávesy ⌘ a posunutím kolečka myši / touchpadu"},da:{touch:"Brug to fingre til at flytte kortet",scroll:"Brug ctrl + rullefunktionen til at zoome ind og ud på kortet",scrollMac:"Brug ⌘ + rullefunktionen til at zoome ind og ud på kortet"},de:{touch:"Verschieben der Karte mit zwei Fingern",scroll:"Verwende Strg+Scrollen zum Zoomen der Karte",scrollMac:"⌘"},el:{touch:"Χρησιμοποιήστε δύο δάχτυλα για μετακίνηση στον χάρτη",scroll:"Χρησιμοποιήστε το πλήκτρο Ctrl και κύλιση, για να μεγεθύνετε τον χάρτη",scrollMac:"Χρησιμοποιήστε το πλήκτρο ⌘ + κύλιση για εστίαση στον χάρτη"},en:{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},"en-AU":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},"en-GB":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},es:{touch:"Para mover el mapa, utiliza dos dedos",scroll:"Mantén pulsada la tecla Ctrl mientras te desplazas para acercar o alejar el mapa",scrollMac:"Mantén pulsada la tecla ⌘ mientras te desplazas para acercar o alejar el mapa"},eu:{touch:"Erabili bi hatz mapa mugitzeko",scroll:"Mapan zooma aplikatzeko, sakatu Ktrl eta egin gora edo behera",scrollMac:"Eduki sakatuta ⌘ eta egin gora eta behera mapa handitu eta txikitzeko"},fa:{touch:"برای حرکت دادن نقشه از دو انگشت استفاده کنید.",scroll:"‏برای بزرگ‌نمایی نقشه از ctrl + scroll استفاده کنید",scrollMac:"برای بزرگ‌نمایی نقشه، از ⌘ + پیمایش استفاده کنید."},fi:{touch:"Siirrä karttaa kahdella sormella.",scroll:"Zoomaa karttaa painamalla Ctrl-painiketta ja vierittämällä.",scrollMac:"Zoomaa karttaa pitämällä painike ⌘ painettuna ja vierittämällä."},fil:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang ⌘ + scroll upang i-zoom ang mapa"},fr:{touch:"Utilisez deux doigts pour déplacer la carte",scroll:"Vous pouvez zoomer sur la carte à l'aide de CTRL+Molette de défilement",scrollMac:"Vous pouvez zoomer sur la carte à l'aide de ⌘+Molette de défilement"},gl:{touch:"Utiliza dous dedos para mover o mapa",scroll:"Preme Ctrl mentres te desprazas para ampliar o mapa",scrollMac:"Preme ⌘ e desprázate para ampliar o mapa"},gu:{touch:"નકશો ખસેડવા બે આંગળીઓનો ઉપયોગ કરો",scroll:"નકશાને ઝૂમ કરવા માટે ctrl + સ્ક્રોલનો ઉપયોગ કરો",scrollMac:"નકશાને ઝૂમ કરવા ⌘ + સ્ક્રોલનો ઉપયોગ કરો"},hi:{touch:"मैप एक जगह से दूसरी जगह ले जाने के लिए दो उंगलियों का इस्तेमाल करें",scroll:"मैप को ज़ूम करने के लिए ctrl + स्क्रोल का उपयोग करें",scrollMac:"मैप को ज़ूम करने के लिए ⌘ + स्क्रोल का उपयोग करें"},hr:{touch:"Pomičite kartu pomoću dva prsta",scroll:"Upotrijebite Ctrl i klizač miša da biste zumirali kartu",scrollMac:"Upotrijebite gumb ⌘ dok se pomičete za zumiranje karte"},hu:{touch:"Két ujjal mozgassa a térképet",scroll:"A térkép a ctrl + görgetés használatával nagyítható",scrollMac:"A térkép a ⌘ + görgetés használatával nagyítható"},id:{touch:"Gunakan dua jari untuk menggerakkan peta",scroll:"Gunakan ctrl + scroll untuk memperbesar atau memperkecil peta",scrollMac:"Gunakan ⌘ + scroll untuk memperbesar atau memperkecil peta"},it:{touch:"Utilizza due dita per spostare la mappa",scroll:"Utilizza CTRL + scorrimento per eseguire lo zoom della mappa",scrollMac:"Utilizza ⌘ + scorrimento per eseguire lo zoom della mappa"},iw:{touch:"הזז את המפה באמצעות שתי אצבעות",scroll:"‏אפשר לשנות את מרחק התצוגה במפה באמצעות מקש ctrl וגלילה",scrollMac:"אפשר לשנות את מרחק התצוגה במפה באמצעות מקש ⌘ וגלילה"},ja:{touch:"地図を移動させるには指 2 本で操作します",scroll:"地図をズームするには、Ctrl キーを押しながらスクロールしてください",scrollMac:"地図をズームするには、⌘ キーを押しながらスクロールしてください"},kn:{touch:"Use two fingers to move the map",scroll:"Use Ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},ko:{touch:"지도를 움직이려면 두 손가락을 사용하세요.",scroll:"지도를 확대/축소하려면 Ctrl을 누른 채 스크롤하세요.",scrollMac:"지도를 확대하려면 ⌘ + 스크롤 사용"},lt:{touch:"Perkelkite žemėlapį dviem pirštais",scroll:"Slinkite nuspaudę klavišą „Ctrl“, kad pakeistumėte žemėlapio mastelį",scrollMac:"Paspauskite klavišą ⌘ ir slinkite, kad priartintumėte žemėlapį"},lv:{touch:"Lai pārvietotu karti, bīdiet to ar diviem pirkstiem",scroll:"Kartes tālummaiņai izmantojiet ctrl + ritināšanu",scrollMac:"Lai veiktu kartes tālummaiņu, izmantojiet ⌘ + ritināšanu"},ml:{touch:"മാപ്പ് നീക്കാൻ രണ്ട് വിരലുകൾ ഉപയോഗിക്കുക",scroll:"കൺട്രോൾ + സ്‌ക്രോൾ ഉപയോഗിച്ച് ‌മാപ്പ് ‌സൂം ചെയ്യുക",scrollMac:"⌘ + സ്‌ക്രോൾ ഉപയോഗിച്ച് ‌മാപ്പ് ‌സൂം ചെയ്യുക"},mr:{touch:"नकाशा हलविण्यासाठी दोन बोटे वापरा",scroll:"नकाशा झूम करण्यासाठी ctrl + scroll वापरा",scrollMac:"नकाशावर झूम करण्यासाठी ⌘ + स्क्रोल वापरा"},nl:{touch:"Gebruik twee vingers om de kaart te verplaatsen",scroll:"Gebruik Ctrl + scrollen om in- en uit te zoomen op de kaart",scrollMac:"Gebruik ⌘ + scrollen om in en uit te zoomen op de kaart"},no:{touch:"Bruk to fingre for å flytte kartet",scroll:"Hold ctrl-tasten inne og rull for å zoome på kartet",scrollMac:"Hold inne ⌘-tasten og rull for å zoome på kartet"},pl:{touch:"Przesuń mapę dwoma palcami",scroll:"Naciśnij CTRL i przewiń, by przybliżyć mapę",scrollMac:"Naciśnij ⌘ i przewiń, by przybliżyć mapę"},pt:{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use ⌘ e role a tela simultaneamente para aplicar zoom no mapa"},"pt-BR":{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use ⌘ e role a tela simultaneamente para aplicar zoom no mapa"},"pt-PT":{touch:"Utilize dois dedos para mover o mapa",scroll:"Utilizar ctrl + deslocar para aumentar/diminuir zoom do mapa",scrollMac:"Utilize ⌘ + deslocar para aumentar/diminuir o zoom do mapa"},ro:{touch:"Folosiți două degete pentru a deplasa harta",scroll:"Apăsați tasta ctrl și derulați simultan pentru a mări harta",scrollMac:"Folosiți ⌘ și derulați pentru a mări/micșora harta"},ru:{touch:"Чтобы переместить карту, проведите по ней двумя пальцами",scroll:"Чтобы изменить масштаб, прокручивайте карту, удерживая клавишу Ctrl.",scrollMac:"Чтобы изменить масштаб, нажмите ⌘ + прокрутка"},sk:{touch:"Mapu môžete posunúť dvoma prstami",scroll:"Ak chcete priblížiť mapu, stlačte kláves ctrl a posúvajte",scrollMac:"Ak chcete priblížiť mapu, stlačte kláves ⌘ a posúvajte kolieskom myši"},sl:{touch:"Premaknite zemljevid z dvema prstoma",scroll:"Zemljevid povečate tako, da držite tipko Ctrl in vrtite kolesce na miški",scrollMac:"Uporabite ⌘ + funkcijo pomika, da povečate ali pomanjšate zemljevid"},sr:{touch:"Мапу померајте помоћу два прста",scroll:"Притисните ctrl тастер док померате да бисте зумирали мапу",scrollMac:"Притисните тастер ⌘ док померате да бисте зумирали мапу"},sv:{touch:"Använd två fingrar för att flytta kartan",scroll:"Använd ctrl + rulla för att zooma kartan",scrollMac:"Använd ⌘ + rulla för att zooma på kartan"},ta:{touch:"மேப்பை நகர்த்த இரண்டு விரல்களைப் பயன்படுத்தவும்",scroll:"மேப்பை பெரிதாக்கி/சிறிதாக்கிப் பார்க்க, ctrl பட்டனைப் பிடித்தபடி, மேலே/கீழே ஸ்க்ரால் செய்யவும்",scrollMac:"மேப்பை பெரிதாக்கி/சிறிதாக்கிப் பார்க்க, ⌘ பட்டனைப் பிடித்தபடி, மேலே/கீழே ஸ்க்ரால் செய்யவும்"},te:{touch:"మ్యాప్‌ని తరలించడం కోసం రెండు వేళ్లను ఉపయోగించండి",scroll:"మ్యాప్‌ని జూమ్ చేయడానికి ctrl బటన్‌ను నొక్కి ఉంచి, స్క్రోల్ చేయండి",scrollMac:"మ్యాప్ జూమ్ చేయాలంటే ⌘ + స్క్రోల్ ఉపయోగించండి"},th:{touch:"ใช้ 2 นิ้วเพื่อเลื่อนแผนที่",scroll:"กด Ctrl ค้างไว้ แล้วเลื่อนหน้าจอเพื่อซูมแผนที่",scrollMac:"กด ⌘ แล้วเลื่อนหน้าจอเพื่อซูมแผนที่"},tl:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang ⌘ + scroll upang i-zoom ang mapa"},tr:{touch:"Haritada gezinmek için iki parmağınızı kullanın",scroll:"Haritayı yakınlaştırmak için ctrl + kaydırma kombinasyonunu kullanın",scrollMac:"Haritayı yakınlaştırmak için ⌘ tuşuna basıp ekranı kaydırın"},uk:{touch:"Переміщуйте карту двома пальцями",scroll:"Щоб змінювати масштаб карти, прокручуйте коліщатко миші, утримуючи клавішу Ctrl",scrollMac:"Щоб змінити масштаб карти, використовуйте ⌘ + прокручування"},vi:{touch:"Sử dụng hai ngón tay để di chuyển bản đồ",scroll:"Sử dụng ctrl + cuộn để thu phóng bản đồ",scrollMac:"Sử dụng ⌘ + cuộn để thu phóng bản đồ"},"zh-CN":{touch:"使用双指移动地图",scroll:"按住 Ctrl 并滚动鼠标滚轮才可缩放地图",scrollMac:"按住 ⌘ 并滚动鼠标滚轮才可缩放地图"},"zh-TW":{touch:"同時以兩指移動地圖",scroll:"按住 ctrl 鍵加上捲動滑鼠可以縮放地圖",scrollMac:"按 ⌘ 加上滾動捲軸可以縮放地圖"}},L.Map.mergeOptions({gestureHandlingOptions:{text:{},duration:1e3}}),n=!1,s=L.Handler.extend({addHooks:function(){this._handleTouch=this._handleTouch.bind(this),this._setupPluginOptions(),this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchmove",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("touchcancel",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.on(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.on(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.on(this._map,"movestart",this._handleDragging,this),L.DomEvent.on(this._map,"move",this._handleDragging,this),L.DomEvent.on(this._map,"moveend",this._handleDragging,this)},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchmove",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("touchcancel",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.off(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.off(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.off(this._map,"movestart",this._handleDragging,this),L.DomEvent.off(this._map,"move",this._handleDragging,this),L.DomEvent.off(this._map,"moveend",this._handleDragging,this)},_handleDragging:function(t){"movestart"==t.type||"move"==t.type?n=!0:"moveend"==t.type&&(n=!1)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setupPluginOptions:function(){this._map.options.gestureHandlingText&&(this._map.options.gestureHandlingOptions.text=this._map.options.gestureHandlingText)},_setLanguageContent:function(){if(this._map.options.gestureHandlingOptions&&this._map.options.gestureHandlingOptions.text&&this._map.options.gestureHandlingOptions.text.touch&&this._map.options.gestureHandlingOptions.text.scroll&&this._map.options.gestureHandlingOptions.text.scrollMac)t=this._map.options.gestureHandlingOptions.text;else{var t,e=this._getUserLanguage();e||(e="en"),i[e]&&(t=i[e]),t||-1===e.indexOf("-")||(t=i[e=e.split("-")[0]]),t||(t=i[e="en"])}var n=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(n=!0);var s=t.scroll;n&&(s=t.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",t.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",s)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_handleTouch:function(t){for(var e=["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-content-wrapper","leaflet-popup-close-button","leaflet-control-zoom-in","leaflet-control-zoom-out"],i=!1,n=0;n<e.length;n++)L.DomUtil.hasClass(t.target,e[n])&&(i=!0);i?L.DomUtil.hasClass(t.target,"leaflet-interactive")&&"touchmove"===t.type&&1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning"):"touchmove"===t.type||"touchstart"===t.type?1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):(t.preventDefault(),this._enableInteractions(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")},_isScrolling:!1,_handleScroll:function(t){t.metaKey||t.ctrlKey?(t.preventDefault(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout(function(){for(var t=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),e=0;e<t.length;e++)L.DomUtil.removeClass(t[e],"leaflet-gesture-handling-scroll-warning")},this._map.options.gestureHandlingOptions.duration))},_handleMouseOver:function(t){this._enableInteractions()},_handleMouseOut:function(t){n||this._disableInteractions()}}),L.Map.addInitHook("addHandler","gestureHandling",s),e.GestureHandling=s,e.default=s,Object.defineProperty(e,"__esModule",{value:!0})},215:function(t,e){!function(t){"use strict";function e(t){var e,i,n,s;for(i=1,n=arguments.length;i<n;i++)for(e in s=arguments[i])t[e]=s[e];return t}var i,n,s,o,r,a,l,h,c,u,d=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function p(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var m=0;function _(t){return"_leaflet_id"in t||(t._leaflet_id=++m),t._leaflet_id}function f(t,e,i){var n,s,o,r;return r=function(){n=!1,s&&(o.apply(i,s),s=!1)},o=function(){n?s=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)}}function g(t,e,i){var n=e[1],s=e[0],o=n-s;return t===n&&i?t:((t-s)%o+o)%o+s}function v(){return!1}function y(t,e){if(!1===e)return t;var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function b(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function w(t){return b(t).split(/\s+/)}function x(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?d(t.options):{}),e)t.options[i]=e[i];return t.options}function E(t,e,i){var n=[];for(var s in t)n.push(encodeURIComponent(i?s.toUpperCase():s)+"="+encodeURIComponent(t[s]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function P(t,e){return t.replace(C,function(t,i){var n=e[i];if(void 0===n)throw Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n})}var k=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function T(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return -1}var S="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function M(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var O=0;function A(t){var e=+new Date,i=Math.max(0,16-(e-O));return O=e+i,window.setTimeout(t,i)}var z=window.requestAnimationFrame||M("RequestAnimationFrame")||A,I=window.cancelAnimationFrame||M("CancelAnimationFrame")||M("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function F(t,e,i){if(!i||z!==A)return z.call(window,p(t,e));t.call(e)}function B(t){t&&I.call(window,t)}function D(){}D.extend=function(t){var i=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=i.__super__=this.prototype,s=d(n);for(var o in s.constructor=i,i.prototype=s,this)Object.prototype.hasOwnProperty.call(this,o)&&"prototype"!==o&&"__super__"!==o&&(i[o]=this[o]);return t.statics&&e(i,t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=k(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",Error().stack)}}(t.includes),e.apply(null,[s].concat(t.includes))),e(s,t),delete s.statics,delete s.includes,s.options&&(s.options=n.options?d(n.options):{},e(s.options,t.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=s._initHooks.length;t<e;t++)s._initHooks[t].call(this)}},i},D.include=function(t){var i=this.prototype.options;return e(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},D.mergeOptions=function(t){return e(this.prototype.options,t),this},D.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var R={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else{t=w(t);for(var s=0,o=t.length;s<o;s++)this._on(t[s],e,i)}return this},off:function(t,e,i){if(arguments.length){if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else{t=w(t);for(var s=1==arguments.length,o=0,r=t.length;o<r;o++)s?this._off(t[o]):this._off(t[o],e,i)}}else delete this._events;return this},_on:function(t,e,i,n){if("function"!=typeof e){console.warn("wrong listener type: "+typeof e);return}if(!1===this._listens(t,e,i)){i===this&&(i=void 0);var s={fn:e,ctx:i};n&&(s.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(s)}},_off:function(t,e,i){if(this._events&&(n=this._events[t])){if(1==arguments.length){if(this._firingCount)for(s=0,o=n.length;s<o;s++)n[s].fn=v;delete this._events[t];return}if("function"!=typeof e){console.warn("wrong listener type: "+typeof e);return}var n,s,o,r=this._listens(t,e,i);if(!1!==r){var a=n[r];this._firingCount&&(a.fn=v,this._events[t]=n=n.slice()),n.splice(r,1)}}},fire:function(t,i,n){if(!this.listens(t,n))return this;var s=e({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var r=0,a=o.length;r<a;r++){var l=o[r],h=l.fn;l.once&&this.off(t,h,l.ctx),h.call(l.ctx||this,s)}this._firingCount--}}return n&&this._propagateEvent(s),this},listens:function(t,e,i,n){"string"!=typeof t&&console.warn('"string" type argument expected');var s=e;"function"!=typeof e&&(n=!!e,s=void 0,i=void 0);var o=this._events&&this._events[t];if(o&&o.length&&!1!==this._listens(t,s,i))return!0;if(n){for(var r in this._eventParents)if(this._eventParents[r].listens(t,e,i,n))return!0}return!1},_listens:function(t,e,i){if(!this._events)return!1;var n=this._events[t]||[];if(!e)return!!n.length;i===this&&(i=void 0);for(var s=0,o=n.length;s<o;s++)if(n[s].fn===e&&n[s].ctx===i)return s;return!1},once:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e,!0);else{t=w(t);for(var s=0,o=t.length;s<o;s++)this._on(t[s],e,i,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[_(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[_(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};R.addEventListener=R.on,R.removeEventListener=R.clearAllEventListeners=R.off,R.addOneTimeEventListener=R.once,R.fireEvent=R.fire,R.hasEventListeners=R.listens;var N=D.extend(R);function Z(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var j=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function H(t,e,i){return t instanceof Z?t:k(t)?new Z(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new Z(t.x,t.y):new Z(t,e,i)}function q(t,e){if(t)for(var i=e?[t,e]:t,n=0,s=i.length;n<s;n++)this.extend(i[n])}function U(t,e){return!t||t instanceof q?t:new q(t,e)}function W(t,e){if(t)for(var i=e?[t,e]:t,n=0,s=i.length;n<s;n++)this.extend(i[n])}function $(t,e){return t instanceof W?t:new W(t,e)}function V(t,e,i){if(isNaN(t)||isNaN(e))throw Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function G(t,e,i){return t instanceof V?t:k(t)&&"object"!=typeof t[0]?3===t.length?new V(t[0],t[1],t[2]):2===t.length?new V(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new V(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new V(t,e,i)}Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(t){return this.clone()._add(H(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(H(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new Z(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new Z(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=j(this.x),this.y=j(this.y),this},distanceTo:function(t){var e=(t=H(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=H(t)).x===this.x&&t.y===this.y},contains:function(t){return Math.abs((t=H(t)).x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}},q.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof Z||"number"==typeof t[0]||"x"in t)e=i=H(t);else if(e=(t=U(t)).min,i=t.max,!e||!i)return this;return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)):(this.min=e.clone(),this.max=i.clone()),this},getCenter:function(t){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof Z?H(t):U(t))instanceof q?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=U(t);var e=this.min,i=this.max,n=t.min,s=t.max,o=s.x>=e.x&&n.x<=i.x,r=s.y>=e.y&&n.y<=i.y;return o&&r},overlaps:function(t){t=U(t);var e=this.min,i=this.max,n=t.min,s=t.max,o=s.x>e.x&&n.x<i.x,r=s.y>e.y&&n.y<i.y;return o&&r},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,i=this.max,n=Math.abs(e.x-i.x)*t,s=Math.abs(e.y-i.y)*t;return U(H(e.x-n,e.y-s),H(i.x+n,i.y+s))},equals:function(t){return!!t&&(t=U(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},W.prototype={extend:function(t){var e,i,n=this._southWest,s=this._northEast;if(t instanceof V)e=t,i=t;else if(!(t instanceof W))return t?this.extend(G(t)||$(t)):this;else if(e=t._southWest,i=t._northEast,!e||!i)return this;return n||s?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),s.lat=Math.max(i.lat,s.lat),s.lng=Math.max(i.lng,s.lng)):(this._southWest=new V(e.lat,e.lng),this._northEast=new V(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,s=Math.abs(e.lng-i.lng)*t;return new W(new V(e.lat-n,e.lng-s),new V(i.lat+n,i.lng+s))},getCenter:function(){return new V((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new V(this.getNorth(),this.getWest())},getSouthEast:function(){return new V(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof V||"lat"in t?G(t):$(t);var e,i,n=this._southWest,s=this._northEast;return t instanceof W?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=s.lat&&e.lng>=n.lng&&i.lng<=s.lng},intersects:function(t){t=$(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),o=s.lat>=e.lat&&n.lat<=i.lat,r=s.lng>=e.lng&&n.lng<=i.lng;return o&&r},overlaps:function(t){t=$(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),o=s.lat>e.lat&&n.lat<i.lat,r=s.lng>e.lng&&n.lng<i.lng;return o&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=$(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!!(this._southWest&&this._northEast)}},V.prototype={equals:function(t,e){return!!t&&(t=G(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+y(this.lat,t)+", "+y(this.lng,t)+")"},distanceTo:function(t){return Y.distance(this,G(t))},wrap:function(){return Y.wrapLatLng(this)},toBounds:function(t){var e=180*t/0x2637f09,i=e/Math.cos(Math.PI/180*this.lat);return $([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new V(this.lat,this.lng,this.alt)}};var K={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new q(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?g(t.lng,this.wrapLng,!0):t.lng;return new V(this.wrapLat?g(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,s=e.lng-i.lng;if(0===n&&0===s)return t;var o=t.getSouthWest(),r=t.getNorthEast();return new W(new V(o.lat-n,o.lng-s),new V(r.lat-n,r.lng-s))}},Y=e({},K,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,s=e.lat*i,o=Math.sin((e.lat-t.lat)*i/2),r=Math.sin((e.lng-t.lng)*i/2),a=o*o+Math.cos(n)*Math.cos(s)*r*r,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),X={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.sin(Math.max(Math.min(i,t.lat),-i)*e);return new Z(this.R*t.lng*e,this.R*Math.log((1+n)/(1-n))/2)},unproject:function(t){var e=180/Math.PI;return new V((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:new q([-(l=6378137*Math.PI),-l],[l,l])};function Q(t,e,i,n){if(k(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=i,this._d=n}function J(t,e,i,n){return new Q(t,e,i,n)}Q.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new Z((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var tt=e({},Y,{code:"EPSG:3857",projection:X,transformation:J(h=.5/(Math.PI*X.R),.5,-h,.5)}),te=e({},tt,{code:"EPSG:900913"});function ti(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function tn(t,e){var i,n,s,o,r,a,l="";for(i=0,s=t.length;i<s;i++){for(n=0,o=(r=t[i]).length;n<o;n++)a=r[n],l+=(n?"L":"M")+a.x+" "+a.y;l+=e?tB.svg?"z":"x":""}return l||"M0 0"}var ts=document.documentElement.style,to="ActiveXObject"in window,tr=to&&!document.addEventListener,ta="msLaunchUri"in navigator&&!("documentMode"in document),tl=tF("webkit"),th=tF("android"),tc=tF("android 2")||tF("android 3"),tu=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),td=th&&tF("Google")&&tu<537&&!("AudioNode"in window),tp=!!window.opera,tm=!ta&&tF("chrome"),t_=tF("gecko")&&!tl&&!tp&&!to,tf=!tm&&tF("safari"),tg=tF("phantom"),tv="OTransition"in ts,ty=0===navigator.platform.indexOf("Win"),tb=to&&"transition"in ts,tw="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!tc,tx="MozPerspective"in ts,tL=!window.L_DISABLE_3D&&(tb||tw||tx)&&!tv&&!tg,tE="undefined"!=typeof orientation||tF("mobile"),tC=!window.PointerEvent&&window.MSPointerEvent,tP=!!(window.PointerEvent||tC),tk="ontouchstart"in window||!!window.TouchEvent,tT=!window.L_NO_TOUCH&&(tk||tP),tS=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,tM=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",v,e),window.removeEventListener("testPassiveEventSupport",v,e)}catch(t){}return t}(),tO=!!document.createElement("canvas").getContext,tA=!!(document.createElementNS&&ti("svg").createSVGRect),tz=!!tA&&((c=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(c.firstChild&&c.firstChild.namespaceURI)),tI=!tA&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function tF(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var tB={ie:to,ielt9:tr,edge:ta,webkit:tl,android:th,android23:tc,androidStock:td,opera:tp,chrome:tm,gecko:t_,safari:tf,phantom:tg,opera12:tv,win:ty,ie3d:tb,webkit3d:tw,gecko3d:tx,any3d:tL,mobile:tE,mobileWebkit:tE&&tl,mobileWebkit3d:tE&&tw,msPointer:tC,pointer:tP,touch:tT,touchNative:tk,mobileOpera:tE&&tp,mobileGecko:tE&&t_,retina:tS,passiveEvents:tM,canvas:tO,svg:tA,vml:tI,inlineSvg:tz,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},tD=tB.msPointer?"MSPointerDown":"pointerdown",tR=tB.msPointer?"MSPointerMove":"pointermove",tN=tB.msPointer?"MSPointerUp":"pointerup",tZ=tB.msPointer?"MSPointerCancel":"pointercancel",tj={touchstart:tD,touchmove:tR,touchend:tN,touchcancel:tZ},tH={touchstart:function(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&ex(e),tG(t,e)},touchmove:tG,touchend:tG,touchcancel:tG},tq={},tU=!1;function tW(t){tq[t.pointerId]=t}function t$(t){tq[t.pointerId]&&(tq[t.pointerId]=t)}function tV(t){delete tq[t.pointerId]}function tG(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var i in e.touches=[],tq)e.touches.push(tq[i]);e.changedTouches=[e],t(e)}}var tK=ee(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),tY=ee(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),tX="webkitTransition"===tY||"OTransition"===tY?tY+"End":"transitionend";function tQ(t){return"string"==typeof t?document.getElementById(t):t}function tJ(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function t0(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function t1(t){var e=t.parentNode;e&&e.removeChild(t)}function t2(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function t3(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function t6(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function t4(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=t8(t);return i.length>0&&RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function t9(t,e){if(void 0!==t.classList)for(var i=w(e),n=0,s=i.length;n<s;n++)t.classList.add(i[n]);else if(!t4(t,e)){var o=t8(t);t7(t,(o?o+" ":"")+e)}}function t5(t,e){void 0!==t.classList?t.classList.remove(e):t7(t,b((" "+t8(t)+" ").replace(" "+e+" "," ")))}function t7(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function t8(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function et(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}(t,e)}function ee(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function ei(t,e,i){var n=e||new Z(0,0);t.style[tK]=(tB.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function en(t,e){t._leaflet_pos=e,tB.any3d?ei(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function es(t){return t._leaflet_pos||new Z(0,0)}if("onselectstart"in document)i=function(){ed(window,"selectstart",ex)},n=function(){em(window,"selectstart",ex)};else{var eo=ee(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);i=function(){if(eo){var t=document.documentElement.style;s=t[eo],t[eo]="none"}},n=function(){eo&&(document.documentElement.style[eo]=s,s=void 0)}}function er(){ed(window,"dragstart",ex)}function ea(){em(window,"dragstart",ex)}function el(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(eh(),o=t,r=t.style.outlineStyle,t.style.outlineStyle="none",ed(window,"keydown",eh))}function eh(){o&&(o.style.outlineStyle=r,o=void 0,r=void 0,em(window,"keydown",eh))}function ec(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body)return t}function eu(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}function ed(t,e,i,n){if(e&&"object"==typeof e)for(var s in e)eg(t,s,e[s],i);else{e=w(e);for(var o=0,r=e.length;o<r;o++)eg(t,e[o],i,n)}return this}var ep="_leaflet_events";function em(t,e,i,n){if(1==arguments.length)e_(t),delete t[ep];else if(e&&"object"==typeof e)for(var s in e)ev(t,s,e[s],i);else if(e=w(e),2==arguments.length)e_(t,function(t){return -1!==T(e,t)});else for(var o=0,r=e.length;o<r;o++)ev(t,e[o],i,n);return this}function e_(t,e){for(var i in t[ep]){var n=i.split(/\d/)[0];(!e||e(n))&&ev(t,n,null,null,i)}}var ef={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function eg(t,e,i,n){var s=e+_(i)+(n?"_"+_(n):"");if(t[ep]&&t[ep][s])return this;var o=function(e){return i.call(n||t,e||window.event)},r=o;!tB.touchNative&&tB.pointer&&0===e.indexOf("touch")?o=function(t,e,i){return("touchstart"===e&&(tU||(document.addEventListener(tD,tW,!0),document.addEventListener(tR,t$,!0),document.addEventListener(tN,tV,!0),document.addEventListener(tZ,tV,!0),tU=!0)),tH[e])?(i=tH[e].bind(this,i),t.addEventListener(tj[e],i,!1),i):(console.warn("wrong event specified:",e),v)}(t,e,o):tB.touch&&"dblclick"===e?o=function(t,e){t.addEventListener("dblclick",e);var i,n=0;function s(t){if(1!==t.detail){i=t.detail;return}if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var s=eE(t);if(!s.some(function(t){return t instanceof HTMLLabelElement&&t.attributes.for})||s.some(function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement})){var o=Date.now();o-n<=200?2==++i&&e(function(t){var e,i,n={};for(i in t)e=t[i],n[i]=e&&e.bind?e.bind(t):e;return t=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}(t)):i=1,n=o}}}return t.addEventListener("click",s),{dblclick:e,simDblclick:s}}(t,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(ef[e]||e,o,!!tB.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){eT(t,e=e||window.event)&&r(e)},t.addEventListener(ef[e],o,!1)):t.addEventListener(e,r,!1):t.attachEvent("on"+e,o),t[ep]=t[ep]||{},t[ep][s]=o}function ev(t,e,i,n,s){s=s||e+_(i)+(n?"_"+_(n):"");var o=t[ep]&&t[ep][s];if(!o)return this;!tB.touchNative&&tB.pointer&&0===e.indexOf("touch")?function(t,e,i){if(!tj[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(tj[e],i,!1)}(t,e,o):tB.touch&&"dblclick"===e?(t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)):"removeEventListener"in t?t.removeEventListener(ef[e]||e,o,!1):t.detachEvent("on"+e,o),t[ep][s]=null}function ey(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function eb(t){return eg(t,"wheel",ey),this}function ew(t){return ed(t,"mousedown touchstart dblclick contextmenu",ey),t._leaflet_disable_click=!0,this}function ex(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function eL(t){return ex(t),ey(t),this}function eE(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function eC(t,e){if(!e)return new Z(t.clientX,t.clientY);var i=eu(e),n=i.boundingClientRect;return new Z((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var eP=tB.linux&&tB.chrome?window.devicePixelRatio:tB.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ek(t){return tB.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/eP:t.deltaY&&1===t.deltaMode?-(20*t.deltaY):t.deltaY&&2===t.deltaMode?-(60*t.deltaY):t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&32765>Math.abs(t.detail)?-(20*t.detail):t.detail?-(60*(t.detail/32765)):0}function eT(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var eS=N.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=es(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),en(this._el,i),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),eM=N.extend({options:{crs:tt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=x(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(G(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=tY&&tB.any3d&&!tB.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ed(this._proxy,tX,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,n){return(i=void 0===i?this._zoom:this._limitZoom(i),t=this._limitCenter(G(t),i,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=e({animate:n.animate},n.zoom),n.pan=e({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,n.zoom):this._tryAnimatedPan(t,n.pan)))?clearTimeout(this._sizeTimer):this._resetView(t,i,n.pan&&n.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(tB.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(tB.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),s=this.getSize().divideBy(2),o=(t instanceof Z?t:this.latLngToContainerPoint(t)).subtract(s).multiplyBy(1-1/n),r=this.containerPointToLatLng(s.add(o));return this.setView(r,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():$(t);var i=H(e.paddingTopLeft||e.padding||[0,0]),n=H(e.paddingBottomRight||e.padding||[0,0]),s=this.getBoundsZoom(t,!1,i.add(n));if((s="number"==typeof e.maxZoom?Math.min(e.maxZoom,s):s)===1/0)return{center:t.getCenter(),zoom:s};var o=n.subtract(i).divideBy(2),r=this.project(t.getSouthWest(),s),a=this.project(t.getNorthEast(),s);return{center:this.unproject(r.add(a).divideBy(2).add(o),s),zoom:s}},fitBounds:function(t,e){if(!(t=$(t)).isValid())throw Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=H(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new eS,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){t9(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!tB.any3d)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),s=this.project(t),o=this.getSize(),r=this._zoom;t=G(t),e=void 0===e?r:e;var a=Math.max(o.x,o.y),l=a*this.getZoomScale(r,e),h=s.distanceTo(n)||1;function c(t){var e=(l*l-a*a+(t?-1:1)*4.0658689599999995*h*h)/(2*(t?l:a)*2.0164*h),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function u(t){return(Math.exp(t)-Math.exp(-t))/2}function d(t){return(Math.exp(t)+Math.exp(-t))/2}var p=c(0),m=Date.now(),_=(c(1)-p)/1.42,f=i.duration?1e3*i.duration:1e3*_*.8;return this._moveStart(!0,i.noMoveStart),(function i(){var o,l=(Date.now()-m)/f,c=(1-Math.pow(1-l,1.5))*_;l<=1?(this._flyToFrame=F(i,this),this._move(this.unproject(n.add(s.subtract(n).multiplyBy(a*(d(p)*(u(o=p+1.42*c)/d(o))-u(p))/2.0164/h)),r),this.getScaleZoom(a/(a*(d(p)/d(p+1.42*c))),r),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}).call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=$(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid())?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return(this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom))?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return(this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom))?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,$(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=H((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=H(e.paddingBottomRight||e.padding||[0,0]),s=this.project(this.getCenter()),o=this.project(t),r=this.getPixelBounds(),a=U([r.min.add(i),r.max.subtract(n)]),l=a.getSize();if(!a.contains(o)){this._enforcingBounds=!0;var h=o.subtract(a.getCenter()),c=a.extend(o).getSize().subtract(l);s.x+=h.x<0?-c.x:c.x,s.y+=h.y<0?-c.y:c.y,this.panTo(this.unproject(s),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),s=i.divideBy(2).round(),o=n.divideBy(2).round(),r=s.subtract(o);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=p(this._handleGeolocationResponse,this),n=p(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,n,t):navigator.geolocation.getCurrentPosition(i,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new V(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var s=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(s,n.maxZoom):s)}var o={latlng:e,bounds:i,timestamp:t.timestamp};for(var r in t.coords)"number"==typeof t.coords[r]&&(o[r]=t.coords[r]);this.fire("locationfound",o)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){var t;if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),t1(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)t1(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=t0("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return(this._checkIfLoaded(),this._lastCenter&&!this._moved())?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new W(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=$(t),i=H(i||[0,0]);var n=this.getZoom()||0,s=this.getMinZoom(),o=this.getMaxZoom(),r=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(i),h=U(this.project(a,n),this.project(r,n)).getSize(),c=tB.any3d?this.options.zoomSnap:1,u=l.x/h.x,d=l.y/h.y,p=e?Math.max(u,d):Math.min(u,d);return n=this.getScaleZoom(p,n),c&&(n=c/100*Math.round(n/(c/100)),n=e?Math.ceil(n/c)*c:Math.floor(n/c)*c),Math.max(s,Math.min(o,n))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new q(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(G(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(H(t),e)},layerPointToLatLng:function(t){var e=H(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(G(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(G(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds($(t))},distance:function(t,e){return this.options.crs.distance(G(t),G(e))},containerPointToLayerPoint:function(t){return H(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return H(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(H(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(G(t)))},mouseEventToContainerPoint:function(t){return eC(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=tQ(t);if(e){if(e._leaflet_id)throw Error("Map container is already initialized.")}else throw Error("Map container not found.");ed(e,"scroll",this._onScroll,this),this._containerId=_(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&tB.any3d,t9(t,"leaflet-container"+(tB.touch?" leaflet-touch":"")+(tB.retina?" leaflet-retina":"")+(tB.ielt9?" leaflet-oldie":"")+(tB.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=tJ(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),en(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(t9(t.markerPane,"leaflet-zoom-hide"),t9(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){en(this._mapPane,new Z(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var s=this._zoom!==e;this._moveStart(s,i)._move(t,e)._moveEnd(s),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,n){void 0===e&&(e=this._zoom);var s=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),n?i&&i.pinch&&this.fire("zoom",i):((s||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){en(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[_(this._container)]=this;var e=t?em:ed;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),tB.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],s="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,r=!1;o;){if((i=this._targets[_(o)])&&("click"===e||"preclick"===e)&&this._draggableMoved(i)){r=!0;break}if(i&&i.listens(e,!0)&&(s&&!eT(o,t)||(n.push(i),s))||o===this._container)break;o=o.parentNode}return!n.length&&!r&&!s&&this.listens(e,!0)&&(n=[this]),n},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var i=t.type;"mousedown"===i&&el(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,n){if("click"===t.type){var s=e({},t);s.type="preclick",this._fireDOMEvent(s,s.type,n)}var o=this._findEventTargets(t,i);if(n){for(var r=[],a=0;a<n.length;a++)n[a].listens(i,!0)&&r.push(n[a]);o=r.concat(o)}if(o.length){"contextmenu"===i&&ex(t);var l=o[0],h={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var c=l.getLatLng&&(!l._radius||l._radius<=10);h.containerPoint=c?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(t),h.layerPoint=this.containerPointToLayerPoint(h.containerPoint),h.latlng=c?l.getLatLng():this.layerPointToLatLng(h.layerPoint)}for(a=0;a<o.length;a++)if(o[a].fire(i,h,!0),h.originalEvent._stopped||!1===o[a].options.bubblingMouseEvents&&-1!==T(this._mouseEvents,i))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return es(this._mapPane)||new Z(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return U([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),s=this.getSize().divideBy(2),o=new q(n.subtract(s),n.add(s)),r=this._getBoundsOffset(o,i,e);return 1>=Math.abs(r.x)&&1>=Math.abs(r.y)?t:this.unproject(n.add(r),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new q(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=U(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),s=n.min.subtract(t.min),o=n.max.subtract(t.max);return new Z(this._rebound(s.x,-o.x),this._rebound(s.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=tB.any3d?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){t5(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!!(!0===(e&&e.animate)||this.getSize().contains(i))&&(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=t0("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=this._proxy.style[tK];ei(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),e===this._proxy.style[tK]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){t1(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ei(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),s=this._getCenterOffset(t)._divideBy(1-1/n);return!!(!0===i.animate||this.getSize().contains(s))&&(F(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,t9(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&t5(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}}),eO=D.extend({options:{position:"topright"},initialize:function(t){x(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return t9(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(t1(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),eA=function(t){return new eO(t)};eM.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=t0("div",e+"control-container",this._container);function n(n,s){t[n+s]=t0("div",e+n+" "+e+s,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)t1(this._controlCorners[t]);t1(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ez=eO.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:+(n<i)}},initialize:function(t,e,i){for(var n in x(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return eO.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(_(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){t9(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(t9(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):t5(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return t5(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=t0("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),ew(e),eb(e);var n=this._section=t0("section",t+"-list");i&&(this._map.on("click",this.collapse,this),ed(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var s=this._layersLink=t0("a",t+"-toggle",e);s.href="#",s.title="Layers",s.setAttribute("role","button"),ed(s,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){ex(t),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=t0("div",t+"-base",n),this._separator=t0("div",t+"-separator",n),this._overlaysList=t0("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&_(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(p(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;t2(this._baseLayersList),t2(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,s=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,s+=+!n.overlay;return this.options.hideSingleBase&&(t=t&&s>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(_(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i=document.createElement("div");return i.innerHTML='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+_(this),n),this._layerControlInputs.push(e),e.layerId=_(t.layer),ed(e,"click",this._onInputClick,this);var s=document.createElement("span");s.innerHTML=" "+t.name;var o=document.createElement("span");return i.appendChild(o),o.appendChild(e),o.appendChild(s),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t,e,i=this._layerControlInputs,n=[],s=[];this._handlingClick=!0;for(var o=i.length-1;o>=0;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||s.push(e);for(o=0;o<s.length;o++)this._map.hasLayer(s[o])&&this._map.removeLayer(s[o]);for(o=0;o<n.length;o++)this._map.hasLayer(n[o])||this._map.addLayer(n[o]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),s=i.length-1;s>=0;s--)t=i[s],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,ed(t,"click",ex),this.expand();var e=this;setTimeout(function(){em(t,"click",ex),e._preventClick=!1})}}),eI=eO.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=t0("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,s){var o=t0("a",i,n);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),ew(o),ed(o,"click",eL),ed(o,"click",s,this),ed(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";t5(this._zoomInButton,e),t5(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(t9(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(t9(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});eM.mergeOptions({zoomControl:!0}),eM.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new eI,this.addControl(this.zoomControl))});var eF=eO.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=t0("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=t0("div",e,i)),t.imperial&&(this._iScale=t0("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t);this._updateScale(this._mScale,e<1e3?e+" m":e/1e3+" km",e/t)},_updateImperial:function(t){var e,i,n,s=3.2808399*t;s>5280?(e=s/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(s),this._updateScale(this._iScale,n+" ft",n/s))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),eB=eO.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(tB.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(t){x(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=t0("div","leaflet-control-attribution"),ew(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});eM.mergeOptions({attributionControl:!0}),eM.addInitHook(function(){this.options.attributionControl&&new eB().addTo(this)}),eO.Layers=ez,eO.Zoom=eI,eO.Scale=eF,eO.Attribution=eB,eA.layers=function(t,e,i){return new ez(t,e,i)},eA.zoom=function(t){return new eI(t)},eA.scale=function(t){return new eF(t)},eA.attribution=function(t){return new eB(t)};var eD=D.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});eD.addTo=function(t,e){return t.addHandler(e,this),this};var eR=tB.touch?"touchstart mousedown":"mousedown",eN=N.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){x(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(ed(this._dragStartTarget,eR,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(eN._dragging===this&&this.finishDrag(!0),em(this._dragStartTarget,eR,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!(!this._enabled||(this._moved=!1,t4(this._element,"leaflet-zoom-anim")))){if(t.touches&&1!==t.touches.length){eN._dragging===this&&this.finishDrag();return}if(!eN._dragging&&!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(eN._dragging=this,this._preventOutline&&el(this._element),er(),i(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,n=ec(this._element);this._startPoint=new Z(e.clientX,e.clientY),this._startPos=es(this._element),this._parentScale=eu(n);var s="mousedown"===t.type;ed(document,s?"mousemove":"touchmove",this._onMove,this),ed(document,s?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new Z(e.clientX,e.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,ex(t),this._moved||(this.fire("dragstart"),this._moved=!0,t9(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),t9(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),en(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){t5(document.body,"leaflet-dragging"),this._lastTarget&&(t5(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),em(document,"mousemove touchmove",this._onMove,this),em(document,"mouseup touchend touchcancel",this._onUp,this),ea(),n();var e=this._moved&&this._moving;this._moving=!1,eN._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function eZ(t,e,i){var n,s,o,r,a,l,h,c,u,d=[1,4,2,8];for(s=0,h=t.length;s<h;s++)t[s]._code=eV(t[s],e);for(r=0;r<4;r++){for(s=0,c=d[r],n=[],o=(h=t.length)-1;s<h;o=s++)a=t[s],l=t[o],a._code&c?l._code&c||((u=e$(l,a,c,e,i))._code=eV(u,e),n.push(u)):(l._code&c&&((u=e$(l,a,c,e,i))._code=eV(u,e),n.push(u)),n.push(a));t=n}return t}function ej(t,e){if(!t||0===t.length)throw Error("latlngs not passed");eK(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var i,n,s,o,r,a,l,h,c,u=G([0,0]),d=$(t);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(u=eH(t));var p=t.length,m=[];for(i=0;i<p;i++){var _=G(t[i]);m.push(e.project(G([_.lat-u.lat,_.lng-u.lng])))}for(i=0,a=l=h=0,n=p-1;i<p;n=i++)s=m[i],o=m[n],r=s.y*o.x-o.y*s.x,l+=(s.x+o.x)*r,h+=(s.y+o.y)*r,a+=3*r;c=0===a?m[0]:[l/a,h/a];var f=e.unproject(H(c));return G([f.lat+u.lat,f.lng+u.lng])}function eH(t){for(var e=0,i=0,n=0,s=0;s<t.length;s++){var o=G(t[s]);e+=o.lat,i+=o.lng,n++}return G([e/n,i/n])}function eq(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=function(t,e){var i=t.length,n=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(i);n[0]=n[i-1]=1,function t(e,i,n,s,o){var r,a,l,h=0;for(a=s+1;a<=o-1;a++)(l=eG(e[a],e[s],e[o],!0))>h&&(r=a,h=l);h>n&&(i[r]=1,t(e,i,n,s,r),t(e,i,n,r,o))}(t,n,e,0,i-1);var s,o=[];for(s=0;s<i;s++)n[s]&&o.push(t[s]);return o}(t=function(t,e){for(var i=[t[0]],n=1,s=0,o=t.length;n<o;n++)(function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n})(t[n],t[s])>e&&(i.push(t[n]),s=n);return s<o-1&&i.push(t[o-1]),i}(t,i),i)}function eU(t,e,i){return Math.sqrt(eG(t,e,i,!0))}function eW(t,e,i,n,s){var o,r,l,h=n?a:eV(t,i),c=eV(e,i);for(a=c;;){if(!(h|c))return[t,e];if(h&c)return!1;l=eV(r=e$(t,e,o=h||c,i,s),i),o===h?(t=r,h=l):(e=r,c=l)}}function e$(t,e,i,n,s){var o,r,a=e.x-t.x,l=e.y-t.y,h=n.min,c=n.max;return 8&i?(o=t.x+a*(c.y-t.y)/l,r=c.y):4&i?(o=t.x+a*(h.y-t.y)/l,r=h.y):2&i?(o=c.x,r=t.y+l*(c.x-t.x)/a):1&i&&(o=h.x,r=t.y+l*(h.x-t.x)/a),new Z(o,r,s)}function eV(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function eG(t,e,i,n){var s,o=e.x,r=e.y,a=i.x-o,l=i.y-r,h=a*a+l*l;return h>0&&((s=((t.x-o)*a+(t.y-r)*l)/h)>1?(o=i.x,r=i.y):s>0&&(o+=a*s,r+=l*s)),a=t.x-o,l=t.y-r,n?a*a+l*l:new Z(o,r)}function eK(t){return!k(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function eY(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),eK(t)}function eX(t,e){if(!t||0===t.length)throw Error("latlngs not passed");eK(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var i,n,s,o,r,a,l,h,c=G([0,0]),u=$(t);u.getNorthWest().distanceTo(u.getSouthWest())*u.getNorthEast().distanceTo(u.getNorthWest())<1700&&(c=eH(t));var d=t.length,p=[];for(i=0;i<d;i++){var m=G(t[i]);p.push(e.project(G([m.lat-c.lat,m.lng-c.lng])))}for(i=0,n=0;i<d-1;i++)n+=p[i].distanceTo(p[i+1])/2;if(0===n)h=p[0];else for(i=0,o=0;i<d-1;i++)if(r=p[i],a=p[i+1],(o+=s=r.distanceTo(a))>n){l=(o-n)/s,h=[a.x-l*(a.x-r.x),a.y-l*(a.y-r.y)];break}var _=e.unproject(H(h));return G([_.lat+c.lat,_.lng+c.lng])}var eQ={project:function(t){return new Z(t.lng,t.lat)},unproject:function(t){return new V(t.y,t.x)},bounds:new q([-180,-90],[180,90])},eJ={R:6378137,R_MINOR:6356752.314245179,bounds:new q([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,s=this.R_MINOR/i,o=Math.sqrt(1-s*s),r=o*Math.sin(n);return n=-i*Math.log(Math.max(Math.tan(Math.PI/4-n/2)/Math.pow((1-r)/(1+r),o/2),1e-10)),new Z(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,s=this.R_MINOR/n,o=Math.sqrt(1-s*s),r=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(r),l=0,h=.1;l<15&&Math.abs(h)>1e-7;l++)h=Math.PI/2-2*Math.atan(r*(e=Math.pow((1-(e=o*Math.sin(a)))/(1+e),o/2)))-a,a+=h;return new V(a*i,t.x*i/n)}},e0=e({},Y,{code:"EPSG:3395",projection:eJ,transformation:J(u=.5/(Math.PI*eJ.R),.5,-u,.5)}),e1=e({},Y,{code:"EPSG:4326",projection:eQ,transformation:J(1/180,1,-1/180,.5)}),e2=e({},K,{projection:eQ,transformation:J(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});K.Earth=Y,K.EPSG3395=e0,K.EPSG3857=tt,K.EPSG900913=te,K.EPSG4326=e1,K.Simple=e2;var e3=N.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[_(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[_(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});eM.include({addLayer:function(t){if(!t._layerAdd)throw Error("The provided object is not a Layer.");var e=_(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=_(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return _(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?k(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[_(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=_(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var s=this._zoomBoundLayers[n].options;t=void 0===s.minZoom?t:Math.min(t,s.minZoom),e=void 0===s.maxZoom?e:Math.max(e,s.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var e6=e3.extend({initialize:function(t,e){var i,n;if(x(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return _(t)}}),e4=e6.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),e6.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),e6.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new W;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),e9=D.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){x(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var s=H(n),o=H("shadow"===e&&i.shadowAnchor||i.iconAnchor||s&&s.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return tB.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),e5=e9.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!=typeof e5.imagePath&&(e5.imagePath=this._detectIconPath()),(this.options.imagePath||e5.imagePath)+e9.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,i){var n=e.exec(t);return n&&n[i]};return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=t0("div","leaflet-default-icon-path",document.body),e=tJ(t,"background-image")||tJ(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e))return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),e7=eD.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new eN(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),t9(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&t5(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,s=this._marker.options.autoPanPadding,o=es(e._icon),r=i.getPixelBounds(),a=i.getPixelOrigin(),l=U(r.min._subtract(a).add(s),r.max._subtract(a).subtract(s));if(!l.contains(o)){var h=H((Math.max(l.max.x,o.x)-l.max.x)/(r.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(r.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(r.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(r.min.y-l.min.y)).multiplyBy(n);i.panBy(h,{animate:!1}),this._draggable._newPos._add(h),this._draggable._startPos._add(h),en(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=F(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=es(e._icon),s=e._map.layerPointToLatLng(n);i&&en(i,n),e._latlng=s,t.latlng=s,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),e8=e3.extend({options:{icon:new e5,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){x(this,e),this._latlng=G(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=G(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),t9(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ed(i,"focus",this._panOnFocus,this);var s=t.icon.createShadow(this._shadow),o=!1;s!==this._shadow&&(this._removeShadow(),o=!0),s&&(t9(s,e),s.alt=""),this._shadow=s,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),s&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&em(this._icon,"focus",this._panOnFocus,this),t1(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&t1(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&en(this._icon,t),this._shadow&&en(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(t9(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),e7)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new e7(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&et(this._icon,t),this._shadow&&et(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?H(e.iconSize):H(0,0),n=e.iconAnchor?H(e.iconAnchor):H(0,0);t.panInside(this._latlng,{paddingTopLeft:n,paddingBottomRight:i.subtract(n)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),it=e3.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return x(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ie=it.extend({options:{fill:!0,radius:10},initialize:function(t,e){x(this,e),this._latlng=G(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=G(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return it.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new q(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),ii=ie.extend({initialize:function(t,i,n){if("number"==typeof i&&(i=e({},n,{radius:i})),x(this,i),this._latlng=G(t),isNaN(this.options.radius))throw Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new W(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:it.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===Y.distance){var s=Math.PI/180,o=this._mRadius/Y.R/s,r=i.project([e+o,t]),a=i.project([e-o,t]),l=r.add(a).divideBy(2),h=i.unproject(l).lat,c=Math.acos((Math.cos(o*s)-Math.sin(e*s)*Math.sin(h*s))/(Math.cos(e*s)*Math.cos(h*s)))/s;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-i.project([h,t-c]).x,this._radiusY=l.y-r.y}else{var u=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(u).x}this._updateBounds()}}),is=it.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){x(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,s=null,o=eG,r=0,a=this._parts.length;r<a;r++)for(var l=this._parts[r],h=1,c=l.length;h<c;h++){var u=o(t,e=l[h-1],i=l[h],!0);u<n&&(n=u,s=o(t,e,i))}return s&&(s.distance=Math.sqrt(n)),s},getCenter:function(){if(!this._map)throw Error("Must add layer to map before using getCenter()");return eX(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=G(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new W,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return eK(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=eK(t),n=0,s=t.length;n<s;n++)i?(e[n]=G(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new Z(t,t);this._rawPxBounds&&(this._pxBounds=new q([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var n,s,o=t[0]instanceof V,r=t.length;if(o){for(n=0,s=[];n<r;n++)s[n]=this._map.latLngToLayerPoint(t[n]),i.extend(s[n]);e.push(s)}else for(n=0;n<r;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip){this._parts=this._rings;return}var e,i,n,s,o,r,a,l=this._parts;for(e=0,n=0,s=this._rings.length;e<s;e++)for(i=0,o=(a=this._rings[e]).length;i<o-1;i++)(r=eW(a[i],a[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(r[0]),(r[1]!==a[i+1]||i===o-2)&&(l[n].push(r[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=eq(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,s,o,r,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,o=this._parts.length;i<o;i++)for(n=0,s=(r=(a=this._parts[i]).length)-1;n<r;s=n++)if((e||0!==n)&&eU(t,a[s],a[n])<=l)return!0;return!1}});is._flat=eY;var io=is.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw Error("Must add layer to map before using getCenter()");return ej(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=is.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof V&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){is.prototype._setLatLngs.call(this,t),eK(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return eK(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new Z(e,e);if(t=new q(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip){this._parts=this._rings;return}for(var n,s=0,o=this._rings.length;s<o;s++)(n=eZ(this._rings[s],t,!0)).length&&this._parts.push(n)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,s,o,r,a,l,h=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(s=0,a=this._parts.length;s<a;s++)for(o=0,r=(l=(e=this._parts[s]).length)-1;o<l;r=o++)i=e[o],n=e[r],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(h=!h);return h||is.prototype._containsPoint.call(this,t,!0)}}),ir=e4.extend({initialize:function(t,e){x(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,s=k(t)?t:t.features;if(s){for(e=0,i=s.length;e<i;e++)((n=s[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var r=ia(t,o);return r?(r.feature=im(t),r.defaultOptions=r.options,this.resetStyle(r),o.onEachFeature&&o.onEachFeature(t,r),this.addLayer(r)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function ia(t,e){var i,n,s,o="Feature"===t.type?t.geometry:t,r=o?o.coordinates:null,a=[],l=e&&e.pointToLayer,h=e&&e.coordsToLatLng||ih;if(!r&&!o)return null;switch(o.type){case"Point":return il(l,t,i=h(r),e);case"MultiPoint":for(n=0,s=r.length;n<s;n++)i=h(r[n]),a.push(il(l,t,i,e));return new e4(a);case"LineString":case"MultiLineString":return new is(ic(r,+("LineString"!==o.type),h),e);case"Polygon":case"MultiPolygon":return new io(ic(r,"Polygon"===o.type?1:2,h),e);case"GeometryCollection":for(n=0,s=o.geometries.length;n<s;n++){var c=ia({geometry:o.geometries[n],type:"Feature",properties:t.properties},e);c&&a.push(c)}return new e4(a);case"FeatureCollection":for(n=0,s=o.features.length;n<s;n++){var u=ia(o.features[n],e);u&&a.push(u)}return new e4(a);default:throw Error("Invalid GeoJSON object.")}}function il(t,e,i,n){return t?t(e,i):new e8(i,n&&n.markersInheritOptions&&n)}function ih(t){return new V(t[1],t[0],t[2])}function ic(t,e,i){for(var n=[],s=0,o=t.length;s<o;s++)n.push(e?ic(t[s],e-1,i):(i||ih)(t[s]));return n}function iu(t,e){return void 0!==(t=G(t)).alt?[y(t.lng,e),y(t.lat,e),y(t.alt,e)]:[y(t.lng,e),y(t.lat,e)]}function id(t,e,i,n){for(var s=[],o=0,r=t.length;o<r;o++)s.push(e?id(t[o],eK(t[o])?0:e-1,i,n):iu(t[o],n));return!e&&i&&s.length>0&&s.push(s[0].slice()),s}function ip(t,i){return t.feature?e({},t.feature,{geometry:i}):im(i)}function im(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var i_={toGeoJSON:function(t){return ip(this,{type:"Point",coordinates:iu(this.getLatLng(),t)})}};function ig(t,e){return new ir(t,e)}e8.include(i_),ii.include(i_),ie.include(i_),is.include({toGeoJSON:function(t){var e=!eK(this._latlngs),i=id(this._latlngs,+!!e,!1,t);return ip(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),io.include({toGeoJSON:function(t){var e=!eK(this._latlngs),i=e&&!eK(this._latlngs[0]),n=id(this._latlngs,i?2:+!!e,!0,t);return e||(n=[n]),ip(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),e6.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),ip(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return(this.eachLayer(function(e){if(e.toGeoJSON){var s=e.toGeoJSON(t);if(i)n.push(s.geometry);else{var o=im(s);"FeatureCollection"===o.type?n.push.apply(n,o.features):n.push(o)}}}),i)?ip(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var iv=e3.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=$(e),x(this,i)},onAdd:function(){!this._image&&(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(t9(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){t1(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&t3(this._image),this},bringToBack:function(){return this._map&&t6(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=$(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:t0("img");if(t9(e,"leaflet-image-layer"),this._zoomAnimated&&t9(e,"leaflet-zoom-animated"),this.options.className&&t9(e,this.options.className),e.onselectstart=v,e.onmousemove=v,e.onload=p(this.fire,this,"load"),e.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ei(this._image,i,e)},_reset:function(){var t=this._image,e=new q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();en(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){et(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),iy=iv.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:t0("video");if(t9(e,"leaflet-image-layer"),this._zoomAnimated&&t9(e,"leaflet-zoom-animated"),this.options.className&&t9(e,this.options.className),e.onselectstart=v,e.onmousemove=v,e.onloadeddata=p(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],s=0;s<i.length;s++)n.push(i[s].src);this._url=i.length>0?n:[e.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var r=t0("source");r.src=this._url[o],e.appendChild(r)}}}),ib=iv.extend({_initImage:function(){var t=this._image=this._url;t9(t,"leaflet-image-layer"),this._zoomAnimated&&t9(t,"leaflet-zoom-animated"),this.options.className&&t9(t,this.options.className),t.onselectstart=v,t.onmousemove=v}}),iw=e3.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof V||k(t))?(this._latlng=G(t),x(this,e)):(x(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&et(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&et(this._container,1),this.bringToFront(),this.options.interactive&&(t9(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(et(this._container,0),this._removeTimeout=setTimeout(p(t1,void 0,this._container),200)):t1(this._container),this.options.interactive&&(t5(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=G(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&t3(this._container),this},bringToBack:function(){return this._map&&t6(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof e4){e=null;var i=this._source._layers;for(var n in i)if(i[n]._map){e=i[n];break}if(!e)return!1;this._source=e}if(!t){if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw Error("Unable to get source layer LatLng.")}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=H(this.options.offset),i=this._getAnchor();this._zoomAnimated?en(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,s=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=s+"px"}},_getAnchor:function(){return[0,0]}});eM.include({_initOverlay:function(t,e,i,n){var s=e;return s instanceof t||(s=new t(n).setContent(e)),i&&s.setLatLng(i),s}}),e3.include({_initOverlay:function(t,e,i,n){var s=i;return s instanceof t?(x(s,n),s._source=this):(s=e&&!n?e:new t(n,this)).setContent(i),s}});var ix=iw.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,iw.prototype.openOn.call(this,t)},onAdd:function(t){iw.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),!this._source||(this._source.fire("popupopen",{popup:this},!0),this._source instanceof it||this._source.on("preclick",ey))},onRemove:function(t){iw.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),!this._source||(this._source.fire("popupclose",{popup:this},!0),this._source instanceof it||this._source.off("preclick",ey))},getEvents:function(){var t=iw.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=t0("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=t0("div",t+"-content-wrapper",e);if(this._contentNode=t0("div",t+"-content",i),ew(e),eb(this._contentNode),ed(e,"contextmenu",ey),this._tipContainer=t0("div",t+"-tip-container",e),this._tip=t0("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=t0("a",t+"-close-button",e);n.setAttribute("role","button"),n.setAttribute("aria-label","Close popup"),n.href="#close",n.innerHTML='<span aria-hidden="true">&#215;</span>',ed(n,"click",function(t){ex(t),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.max(i=Math.min(i,this.options.maxWidth),this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,s=this.options.maxHeight,o="leaflet-popup-scrolled";s&&n>s?(e.height=s+"px",t9(t,o)):t5(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();en(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(tJ(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,s=new Z(this._containerLeft,-i-this._containerBottom);s._add(es(this._container));var o=t.layerPointToContainerPoint(s),r=H(this.options.autoPanPadding),a=H(this.options.autoPanPaddingTopLeft||r),l=H(this.options.autoPanPaddingBottomRight||r),h=t.getSize(),c=0,u=0;o.x+n+l.x>h.x&&(c=o.x+n-h.x+l.x),o.x-c-a.x<0&&(c=o.x-a.x),o.y+i+l.y>h.y&&(u=o.y+i-h.y+l.y),o.y-u-a.y<0&&(u=o.y-a.y),(c||u)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([c,u]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});eM.mergeOptions({closePopupOnClick:!0}),eM.include({openPopup:function(t,e,i){return this._initOverlay(ix,t,e,i).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),e3.include({bindPopup:function(t,e){return this._popup=this._initOverlay(ix,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof e4||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){eL(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof it)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var iL=iw.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){iw.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){iw.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=iw.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=t0("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+_(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,n=this._map,s=this._container,o=n.latLngToContainerPoint(n.getCenter()),r=n.layerPointToContainerPoint(t),a=this.options.direction,l=s.offsetWidth,h=s.offsetHeight,c=H(this.options.offset),u=this._getAnchor();"top"===a?(e=l/2,i=h):"bottom"===a?(e=l/2,i=0):("center"===a?e=l/2:"right"===a?e=0:"left"===a?e=l:r.x<o.x?(a="right",e=0):(a="left",e=l+(c.x+u.x)*2),i=h/2),t=t.subtract(H(e,i,!0)).add(c).add(u),t5(s,"leaflet-tooltip-right"),t5(s,"leaflet-tooltip-left"),t5(s,"leaflet-tooltip-top"),t5(s,"leaflet-tooltip-bottom"),t9(s,"leaflet-tooltip-"+a),en(s,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&et(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});eM.include({openTooltip:function(t,e,i){return this._initOverlay(iL,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),e3.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(iL,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?e.add=this._openTooltip:(e.mouseover=this._openTooltip,e.mouseout=this.closeTooltip,e.click=this._openTooltip,this._map?this._addFocusListeners():e.add=this._addFocusListeners),this._tooltip.options.sticky&&(e.mousemove=this._moveTooltip),this[t?"off":"on"](e),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof e4||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement();e&&(ed(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),ed(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var iE=e9.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(t2(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=H(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});e9.Default=e5;var iC=e3.extend({options:{tileSize:256,opacity:1,updateWhenIdle:tB.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){x(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),t1(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(t3(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(t6(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof Z?t:new Z(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),s=0,o=i.length;s<o;s++)e=i[s].style.zIndex,i[s]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tB.ielt9){et(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var s=this._tiles[n];if(s.current&&s.loaded){var o=Math.min(1,(t-s.loaded)/200);et(s.el,o),o<1?e=!0:(s.active?i=!0:this._onOpaqueTile(s),s.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(B(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=t0("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(t1(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],s=this._map;return n||((n=this._levels[t]={}).el=t0("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=s.project(s.unproject(s.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,s.getCenter(),s.getZoom()),v(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)t1(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var s=Math.floor(t/2),o=Math.floor(e/2),r=i-1,a=new Z(+s,+o);a.z=+r;var l=this._tileCoordsToKey(a),h=this._tiles[l];return h&&h.active?(h.retain=!0,!0):(h&&h.loaded&&(h.retain=!0),r>n&&this._retainParent(s,o,r,n))},_retainChildren:function(t,e,i,n){for(var s=2*t;s<2*t+2;s++)for(var o=2*e;o<2*e+2;o++){var r=new Z(s,o);r.z=i+1;var a=this._tileCoordsToKey(r),l=this._tiles[a];if(l&&l.active){l.retain=!0;continue}l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(s,o,i+1,n)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var s=Math.round(e);s=void 0!==this.options.maxZoom&&s>this.options.maxZoom||void 0!==this.options.minZoom&&s<this.options.minZoom?void 0:this._clampZoom(s);var o=this.options.updateWhenZooming&&s!==this._tileZoom;(!n||o)&&(this._tileZoom=s,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==s&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),s=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();tB.any3d?ei(t.el,s,n):en(t.el,s)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,s=this._map.getPixelWorldBounds(this._tileZoom);s&&(this._globalTileRange=this._pxBoundsToTileRange(s)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),s=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*n);return new q(s.subtract(o),s.add(o))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),s=this._pxBoundsToTileRange(n),o=s.getCenter(),r=[],a=this.options.keepBuffer,l=new q(s.getBottomLeft().subtract([a,-a]),s.getTopRight().add([a,-a]));if(!(isFinite(s.min.x)&&isFinite(s.min.y)&&isFinite(s.max.x)&&isFinite(s.max.y)))throw Error("Attempted to load an infinite number of tiles");for(var h in this._tiles){var c=this._tiles[h].coords;c.z===this._tileZoom&&l.contains(new Z(c.x,c.y))||(this._tiles[h].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var u=s.min.y;u<=s.max.y;u++)for(var d=s.min.x;d<=s.max.x;d++){var p=new Z(d,u);if(p.z=this._tileZoom,this._isValidTile(p)){var m=this._tiles[this._tileCoordsToKey(p)];m?m.current=!0:r.push(p)}}if(r.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var _=document.createDocumentFragment();for(d=0;d<r.length;d++)this._addTile(r[d],_);this._level.el.appendChild(_)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return $(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),s=n.add(i);return[e.unproject(n,t.z),e.unproject(s,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new W(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new Z(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(t1(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){t9(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=v,t.onmousemove=v,tB.ielt9&&this.options.opacity<1&&et(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),p(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&F(p(this._tileReady,this,t,null,s)),en(s,i),this._tiles[n]={el:s,coords:t,current:!0},e.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(et(i.el,0),B(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(t9(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tB.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new Z(this._wrapX?g(t.x,this._wrapX):t.x,this._wrapY?g(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new q(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),iP=iC.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=x(this,e)).detectRetina&&tB.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return ed(i,"load",p(this._tileOnLoad,this,e,i)),ed(i,"error",p(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var i={r:tB.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=n),i["-y"]=n}return P(this._url,e(i,this.options))},_tileOnLoad:function(t,e){tB.ielt9?setTimeout(p(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset;return i&&(t=e-t),t+n},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=v,e.onerror=v,!e.complete)){e.src=S;var i=this._tiles[t].coords;t1(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",S),iC.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==S))return iC.prototype._tileReady.call(this,t,e,i)}});function ik(t,e){return new iP(t,e)}var iT=iP.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var n=e({},this.defaultWmsParams);for(var s in i)s in this.options||(n[s]=i[s]);var o=(i=x(this,i)).detectRetina&&tB.retina?2:1,r=this.getTileSize();n.width=r.x*o,n.height=r.y*o,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,iP.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=U(i.project(e[0]),i.project(e[1])),s=n.min,o=n.max,r=(this._wmsVersion>=1.3&&this._crs===e1?[s.y,s.x,o.y,o.x]:[s.x,s.y,o.x,o.y]).join(","),a=iP.prototype.getTileUrl.call(this,t);return a+E(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(t,i){return e(this.wmsParams,t),i||this.redraw(),this}});iP.WMS=iT,ik.wms=function(t,e){return new iT(t,e)};var iS=e3.extend({options:{padding:.1},initialize:function(t){x(this,t),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),t9(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,e),o=n.multiplyBy(-i).add(s).subtract(this._map._getNewPixelOrigin(t,e));tB.any3d?ei(this._container,o,i):en(this._container,o)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new q(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),iM=iS.extend({options:{tolerance:0},getEvents:function(){var t=iS.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){iS.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");ed(t,"mousemove",this._onMouseMove,this),ed(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ed(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,t1(this._container),em(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){iS.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=tB.retina?2:1;en(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",tB.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){iS.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[_(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[_(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),s=[];for(i=0;i<n.length;i++){if(isNaN(e=Number(n[i])))return;s.push(e)}t.options._dashArray=s}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new q,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,s,o,r=t._parts,a=r.length,l=this._ctx;if(a){for(l.beginPath(),i=0;i<a;i++){for(n=0,s=r[i].length;n<s;n++)o=r[i][n],l[n?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),s=(Math.max(Math.round(t._radiusY),1)||n)/n;1!==s&&(i.save(),i.scale(1,s)),i.beginPath(),i.arc(e.x,e.y/s,n,0,2*Math.PI,!1),1!==s&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),s=this._drawFirst;s;s=s.next)(e=s.layer).options.interactive&&e._containsPoint(n)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(i=e);this._fireEvent(!!i&&[i],t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving())&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(t5(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,n,s=this._drawFirst;s;s=s.next)(i=s.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(t9(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function iO(t){return tB.canvas?new iM(t):null}var iA=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),iz=tB.vml?iA:ti,iI=iS.extend({_initContainer:function(){this._container=iz("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=iz("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){t1(this._container),em(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){iS.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),en(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=iz("path");t.options.className&&t9(e,t.options.className),t.options.interactive&&t9(e,"leaflet-interactive"),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){t1(t._path),t.removeInteractiveTarget(t._path),delete this._layers[_(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,tn(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n=Math.max(Math.round(t._radiusY),1)||i,s="a"+i+","+n+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+s+2*i+",0 "+s+-(2*i)+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){t3(t._path)},_bringToBack:function(t){t6(t._path)}});function iF(t){return tB.svg||tB.vml?new iI(t):null}tB.vml&&iI.include({_initContainer:function(){this._container=t0("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(iS.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=iA("shape");t9(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=iA("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;t1(e),t.removeInteractiveTarget(e),delete this._layers[_(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,s=t._container;s.stroked=!!n.stroke,s.filled=!!n.fill,n.stroke?(e||(e=t._stroke=iA("stroke")),s.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=k(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(s.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=iA("fill")),s.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(s.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){t3(t._container)},_bringToBack:function(t){t6(t._container)}}),eM.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&iO(t)||iF(t)}});var iB=io.extend({initialize:function(t,e){io.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=$(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});iI.create=iz,iI.pointsToPath=tn,ir.geometryToLayer=ia,ir.coordsToLatLng=ih,ir.coordsToLatLngs=ic,ir.latLngToCoords=iu,ir.latLngsToCoords=id,ir.getFeature=ip,ir.asFeature=im,eM.mergeOptions({boxZoom:!0});var iD=eD.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){ed(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){em(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){t1(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),i(),er(),this._startPoint=this._map.mouseEventToContainerPoint(t),ed(document,{contextmenu:eL,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=t0("div","leaflet-zoom-box",this._container),t9(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new q(this._point,this._startPoint),i=e.getSize();en(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(t1(this._box),t5(this._container,"leaflet-crosshair")),n(),ea(),em(document,{contextmenu:eL,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var e=new W(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});eM.addInitHook("addHandler","boxZoom",iD),eM.mergeOptions({doubleClickZoom:!0});var iR=eD.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,s=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(s):e.setZoomAround(t.containerPoint,s)}});eM.addInitHook("addHandler","doubleClickZoom",iR),eM.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var iN=eD.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new eN(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}t9(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){t5(this._map._container,"leaflet-grab"),t5(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=$(this._map.options.maxBounds);this._offsetLimit=U(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,s=(n-e+i)%t+e-i,o=(n+e+i)%t-e-i,r=Math.abs(s+i)<Math.abs(o+i)?s:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var s=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,r=i.easeLinearity,a=s.multiplyBy(r/o),l=a.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,l),c=a.multiplyBy(h/l),u=h/(i.inertiaDeceleration*r),d=c.multiplyBy(-u/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),F(function(){e.panBy(d,{duration:u,easeLinearity:r,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});eM.addInitHook("addHandler","dragging",iN),eM.mergeOptions({keyboard:!0,keyboardPanDelta:80});var iZ=eD.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),ed(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),em(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},s=this.keyCodes;for(e=0,i=s.left.length;e<i;e++)n[s.left[e]]=[-1*t,0];for(e=0,i=s.right.length;e<i;e++)n[s.right[e]]=[t,0];for(e=0,i=s.down.length;e<i;e++)n[s.down[e]]=[0,t];for(e=0,i=s.up.length;e<i;e++)n[s.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},s=this.keyCodes;for(e=0,i=s.zoomIn.length;e<i;e++)n[s.zoomIn[e]]=t;for(e=0,i=s.zoomOut.length;e<i;e++)n[s.zoomOut[e]]=-t},_addHooks:function(){ed(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){em(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!t.altKey&&!t.ctrlKey&&!t.metaKey){var e,i=t.keyCode,n=this._map;if(i in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress){if(e=this._panKeys[i],t.shiftKey&&(e=H(e).multiplyBy(3)),n.options.maxBounds&&(e=n._limitOffset(H(e),n.options.maxBounds)),n.options.worldCopyJump){var s=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(e)));n.panTo(s)}else n.panBy(e)}}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}eL(t)}}});eM.addInitHook("addHandler","keyboard",iZ),eM.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ij=eD.extend({addHooks:function(){ed(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){em(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=ek(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),n),eL(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,s=i?Math.ceil(n/i)*i:n,o=t._limitZoom(e+(this._delta>0?s:-s))-e;this._delta=0,this._startTime=null,o&&("center"===t.options.scrollWheelZoom?t.setZoom(e+o):t.setZoomAround(this._lastMousePos,e+o))}});eM.addInitHook("addHandler","scrollWheelZoom",ij),eM.mergeOptions({tapHold:tB.touchNative&&tB.safari&&tB.mobile,tapTolerance:15});var iH=eD.extend({addHooks:function(){ed(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){em(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new Z(e.clientX,e.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(ed(document,"touchend",ex),ed(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),600),ed(document,"touchend touchcancel contextmenu",this._cancel,this),ed(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){em(document,"touchend",ex),em(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),em(document,"touchend touchcancel contextmenu",this._cancel,this),em(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new Z(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});eM.addInitHook("addHandler","tapHold",iH),eM.mergeOptions({touchZoom:tB.touch,bounceAtZoomLimits:!0});var iq=eD.extend({addHooks:function(){t9(this._map._container,"leaflet-touch-zoom"),ed(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){t5(this._map._container,"leaflet-touch-zoom"),em(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),ed(document,"touchmove",this._onTouchMove,this),ed(document,"touchend touchcancel",this._onTouchEnd,this),ex(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),s=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(s,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&s<1||this._zoom>e.getMaxZoom()&&s>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var o=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var r=p(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(r,this,!0),ex(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),em(document,"touchmove",this._onTouchMove,this),em(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});eM.addInitHook("addHandler","touchZoom",iq),eM.BoxZoom=iD,eM.DoubleClickZoom=iR,eM.Drag=iN,eM.Keyboard=iZ,eM.ScrollWheelZoom=ij,eM.TapHold=iH,eM.TouchZoom=iq,t.Bounds=q,t.Browser=tB,t.CRS=K,t.Canvas=iM,t.Circle=ii,t.CircleMarker=ie,t.Class=D,t.Control=eO,t.DivIcon=iE,t.DivOverlay=iw,t.DomEvent={__proto__:null,on:ed,off:em,stopPropagation:ey,disableScrollPropagation:eb,disableClickPropagation:ew,preventDefault:ex,stop:eL,getPropagationPath:eE,getMousePosition:eC,getWheelDelta:ek,isExternalTarget:eT,addListener:ed,removeListener:em},t.DomUtil={__proto__:null,TRANSFORM:tK,TRANSITION:tY,TRANSITION_END:tX,get:tQ,getStyle:tJ,create:t0,remove:t1,empty:t2,toFront:t3,toBack:t6,hasClass:t4,addClass:t9,removeClass:t5,setClass:t7,getClass:t8,setOpacity:et,testProp:ee,setTransform:ei,setPosition:en,getPosition:es,get disableTextSelection(){return i},get enableTextSelection(){return n},disableImageDrag:er,enableImageDrag:ea,preventOutline:el,restoreOutline:eh,getSizedParentNode:ec,getScale:eu},t.Draggable=eN,t.Evented=N,t.FeatureGroup=e4,t.GeoJSON=ir,t.GridLayer=iC,t.Handler=eD,t.Icon=e9,t.ImageOverlay=iv,t.LatLng=V,t.LatLngBounds=W,t.Layer=e3,t.LayerGroup=e6,t.LineUtil={__proto__:null,simplify:eq,pointToSegmentDistance:eU,closestPointOnSegment:function(t,e,i){return eG(t,e,i)},clipSegment:eW,_getEdgeIntersection:e$,_getBitCode:eV,_sqClosestPointOnSegment:eG,isFlat:eK,_flat:eY,polylineCenter:eX},t.Map=eM,t.Marker=e8,t.Mixin={Events:R},t.Path=it,t.Point=Z,t.PolyUtil={__proto__:null,clipPolygon:eZ,polygonCenter:ej,centroid:eH},t.Polygon=io,t.Polyline=is,t.Popup=ix,t.PosAnimation=eS,t.Projection={__proto__:null,LonLat:eQ,Mercator:eJ,SphericalMercator:X},t.Rectangle=iB,t.Renderer=iS,t.SVG=iI,t.SVGOverlay=ib,t.TileLayer=iP,t.Tooltip=iL,t.Transformation=Q,t.Util={__proto__:null,extend:e,create:d,bind:p,get lastId(){return m},stamp:_,throttle:f,wrapNum:g,falseFn:v,formatNum:y,trim:b,splitWords:w,setOptions:x,getParamString:E,template:P,isArray:k,indexOf:T,emptyImageUrl:S,requestFn:z,cancelFn:I,requestAnimFrame:F,cancelAnimFrame:B},t.VideoOverlay=iy,t.bind=p,t.bounds=U,t.canvas=iO,t.circle=function(t,e,i){return new ii(t,e,i)},t.circleMarker=function(t,e){return new ie(t,e)},t.control=eA,t.divIcon=function(t){return new iE(t)},t.extend=e,t.featureGroup=function(t,e){return new e4(t,e)},t.geoJSON=ig,t.geoJson=ig,t.gridLayer=function(t){return new iC(t)},t.icon=function(t){return new e9(t)},t.imageOverlay=function(t,e,i){return new iv(t,e,i)},t.latLng=G,t.latLngBounds=$,t.layerGroup=function(t,e){return new e6(t,e)},t.map=function(t,e){return new eM(t,e)},t.marker=function(t,e){return new e8(t,e)},t.point=H,t.polygon=function(t,e){return new io(t,e)},t.polyline=function(t,e){return new is(t,e)},t.popup=function(t,e){return new ix(t,e)},t.rectangle=function(t,e){return new iB(t,e)},t.setOptions=x,t.stamp=_,t.svg=iF,t.svgOverlay=function(t,e,i){return new ib(t,e,i)},t.tileLayer=ik,t.tooltip=function(t,e){return new iL(t,e)},t.transformation=J,t.version="1.9.4",t.videoOverlay=function(t,e,i){return new iy(t,e,i)};var iU=window.L;t.noConflict=function(){return window.L=iU,this},window.L=t}(e)},156:t=>{"use strict";var e=function(t){var e;return!!t&&"object"==typeof t&&"[object RegExp]"!==(e=Object.prototype.toString.call(t))&&"[object Date]"!==e&&t.$$typeof!==i},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(t,e){return!1!==e.clone&&e.isMergeableObject(t)?a(Array.isArray(t)?[]:{},t,e):t}function s(t,e,i){return t.concat(e).map(function(t){return n(t,i)})}function o(t){return Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[])}function r(t,e){try{return e in t}catch(t){return!1}}function a(t,i,l){(l=l||{}).arrayMerge=l.arrayMerge||s,l.isMergeableObject=l.isMergeableObject||e,l.cloneUnlessOtherwiseSpecified=n;var h,c,u=Array.isArray(i);return u!==Array.isArray(t)?n(i,l):u?l.arrayMerge(t,i,l):(c={},(h=l).isMergeableObject(t)&&o(t).forEach(function(e){c[e]=n(t[e],h)}),o(i).forEach(function(e){(!r(t,e)||Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))&&(r(t,e)&&h.isMergeableObject(i[e])?c[e]=(function(t,e){if(!e.customMerge)return a;var i=e.customMerge(t);return"function"==typeof i?i:a})(e,h)(t[e],i[e],h):c[e]=n(i[e],h))}),c)}a.all=function(t,e){if(!Array.isArray(t))throw Error("first argument should be an array");return t.reduce(function(t,i){return a(t,i,e)},{})},t.exports=a}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";let t,e;class n{constructor(){this._request=null,this._errorHandlingInternal=!1}get(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",n=this._createPreparedRequest("GET",t,i);return this._sendRequest(n,null,e)}post(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";n=this._getContentType(e,n);let s=this._createPreparedRequest("POST",t,n);return this._sendRequest(s,e,i)}delete(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";n=this._getContentType(e,n);let s=this._createPreparedRequest("DELETE",t,n);return this._sendRequest(s,e,i)}patch(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";n=this._getContentType(e,n);let s=this._createPreparedRequest("PATCH",t,n);return this._sendRequest(s,e,i)}abort(){if(this._request)return this._request.abort()}setErrorHandlingInternal(t){this._errorHandlingInternal=t}_registerOnLoaded(t,e){e&&(!0===this._errorHandlingInternal?(t.addEventListener("load",()=>{e(t.responseText,t)}),t.addEventListener("abort",()=>{console.warn(`the request to ${t.responseURL} was aborted`)}),t.addEventListener("error",()=>{console.warn(`the request to ${t.responseURL} failed with status ${t.status}`)}),t.addEventListener("timeout",()=>{console.warn(`the request to ${t.responseURL} timed out`)})):t.addEventListener("loadend",()=>{e(t.responseText,t)}))}_sendRequest(t,e,i){return this._registerOnLoaded(t,i),t.send(e),t}_getContentType(t,e){return t instanceof FormData&&(e=!1),e}_createPreparedRequest(t,e,i){return this._request=new XMLHttpRequest,this._request.open(t,e),this._request.setRequestHeader("X-Requested-With","XMLHttpRequest"),i&&this._request.setRequestHeader("Content-type",i),this._request}}let s=window.PluginBaseClass;class o{static serialize(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if("FORM"!==t.nodeName){if(e)throw Error("The passed element is not a form!");return{}}return new FormData(t)}static serializeJson(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=o.serialize(t,e);if(!(i instanceof FormData)&&0===Object.keys(i).length||i instanceof FormData&&0===Array.from(i.entries()).length)return{};let n={};for(let[t,e]of i.entries())n[t]=e;return n}}let r=window.PluginBaseClass;class a extends r{static #t=this.options={};init(){this._form=this.el,this._form&&(this._client=new n(window.accessKey,window.contextToken),this._reponse=null,this.el.addEventListener("submit",this._formSubmit.bind(this)))}_formSubmit(t){void 0!==t&&t.preventDefault();let e=this._form.getAttribute("action").toLowerCase(),i=o.serialize(this._form);this._client.post(e,i,this._onLoaded.bind(this))}_onLoaded(t){this._reponse=JSON.parse(t),this._reponse.reload&&location.reload()}}let l=window.PluginBaseClass;class h extends l{init(){this.el.dataset.moorlAnimation?this.config=JSON.parse(this.el.dataset.moorlAnimation):this.config=this.options,this.activeAnimation=null,this.zIndex=parseInt(window.moorlAnimationZIndex??"9000"),this.animateInit(),this.animate(),this._registerEvents()}_registerEvents(){let t=this;window.addEventListener("scroll",function(){t.animate()},!1),this.el.addEventListener("mouseenter",()=>{!t.activeAnimation&&t.config.hover&&t.config.hover.active&&t.animateHover()}),this.el.addEventListener("animationstart",()=>{"in"===t.activeAnimation&&t.el.classList.remove("moorl-animation-hidden")}),this.el.addEventListener("animationend",()=>{"out"===t.activeAnimation&&t.el.classList.add("moorl-animation-hidden"),t.el.style.animation=void 0,t.el.style.zIndex=void 0,t.el.style.animationDelay=void 0,t.el.style.animationDuration=void 0,t.activeAnimation=null,t.animate()})}_ms(t){return t.toString()+"ms"}_visible(t){return"isLoaded"===t||("isOverBottom"===t?this._isOverBottom():"isInViewport"===t?this._isInViewport():void 0)}_isInViewport(){return this.el.getBoundingClientRect().bottom<=(window.innerHeight||document.documentElement.clientHeight)}_isOverBottom(){return this.el.getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)}animateHover(){let t=this.config.hover;!this.el.classList.contains("moorl-animation-hidden")&&this._visible(t.condition)&&(this.activeAnimation="hover",this.el.style.animation=t.name,this.el.style.zIndex=this.zIndex,this.el.style.animationDelay=this._ms(t.delay),this.el.style.animationDuration=this._ms(t.duration))}animateIn(){let t=this.config.in;this.el.classList.contains("moorl-animation-hidden")&&this._visible(t.condition)&&(this.activeAnimation="in",this.el.style.animation=t.name,this.el.style.zIndex=this.zIndex,this.el.style.animationDelay=this._ms(t.delay),this.el.style.animationDuration=this._ms(t.duration))}animateOut(){let t=this.config.out;!this.el.classList.contains("moorl-animation-hidden")&&(this._visible(t.condition)||(this.activeAnimation="out",this.el.style.animation=t.name,this.el.style.animationDelay=this._ms(t.delay),this.el.style.animationDuration=this._ms(t.duration)))}animateInit(){let t=this.config;t.in&&t.in.active&&(this._visible(t.in.condition)?"isLoaded"===t.in.condition&&this.el.classList.add("moorl-animation-hidden"):this.el.classList.add("moorl-animation-hidden"))}animate(){!this.activeAnimation&&(this.config.in&&this.config.in.active&&this.animateIn(),this.config.out&&this.config.out.active&&this.animateOut())}}let c=window.PluginBaseClass;class u extends c{static #t=this.options={locale:document.documentElement.lang,intervalTimeout:1e3,from:"now",actionUrl:null};init(){let t=this.options.actionUrl,e=new Intl.RelativeTimeFormat(this.options.locale),i=new Date(this.options.from),s=this.el,o=new n(window.accessKey,window.contextToken);s.dataset.bsToggle||(s.innerText="---");let r="",a=setInterval(function(){let n=new Date,l=Math.floor((i.getTime()-n.getTime())/1e3);l<1&&t&&(clearInterval(a),setTimeout(()=>{o.get(t,t=>{(t=JSON.parse(t)).url?window.location.href=t.url:window.location.reload()})},5e3),l=0);let h=Math.trunc(l/86400),c=Math.trunc(l%86400/3600),u=Math.trunc(l%3600/60),d=Math.trunc(l%60);0!==h?r=e.format(h,"day"):0!==c?r=e.format(c,"hour"):0!==u?r=e.format(u,"minute"):0!==d&&(r=e.format(d,"second")),s.dataset.bsToggle?s.dataset.bsOriginalTitle=r:s.innerText=r},this.options.intervalTimeout)}}let d=window.PluginBaseClass;class p extends d{static #t=this.options={locale:document.documentElement.lang,label:{days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds"},intervalTimeout:1e3,from:"now",actionUrl:null,debug:!1};init(){this.options.actionUrl;let t=this.options.actionUrl;this.options.debug;let e=this.buildContainer(),i=new Date(this.options.from),s=(t,e)=>String(t).padStart(e,"0"),o=new n(window.accessKey,window.contextToken),r=setInterval(function(){let n=new Date,a=Math.floor((i.getTime()-n.getTime())/1e3);a<1&&(clearInterval(r),setTimeout(()=>{t?o.get(t,t=>{(t=JSON.parse(t)).url?window.location.href=t.url:window.location.reload()}):window.location.reload()},5e3),a=0);let l=Math.trunc(a/86400),h=Math.trunc(a%86400/3600),c=Math.trunc(a%3600/60),u=Math.trunc(a%60);e[0].innerText=s(l,2),e[1].innerText=s(h,2),e[2].innerText=s(c,2),e[3].innerText=s(u,2)},this.options.intervalTimeout)}buildContainer(){let t=[];for(let e of["days","hours","minutes","seconds"]){let i=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div");n.classList.add("moorl-countdown-label"),n.innerText=this.options.label[e],s.classList.add("moorl-countdown-time"),s.innerText="--",i.appendChild(n),i.appendChild(s),t.push(s),this.el.appendChild(i)}return t}}let m=window.PluginBaseClass;class _ extends m{static #t=this.options={locale:document.documentElement.lang,currencyIso:"EUR",enablePrices:!0,enableAddToCartSingle:!0,enableAddToCartAll:!0,productQuantities:{},discountValue:0,star:"*"};init(){this._priceElements=this.el.querySelectorAll("[data-price]"),this._productListItems=this.el.querySelectorAll("[data-moorl-product-buy-list-item]"),this._buyButton=this.el.querySelector("[data-moorl-product-buy-list-button]"),this._totalPriceElement=this.el.querySelector(".total-price"),this._discountPriceElement=this.el.querySelector(".discount-price"),this._selectedItemsElement=this.el.querySelector(".selected-items"),this._formValuesElement=this.el.querySelector(".form-values"),this._productIds=[],this._client=new n(window.accessKey,window.contextToken),this._updateTotalPrice(),this._registerEvents()}_registerEvents(){let t=this;this.el.addEventListener("change",e=>{if(t.el.querySelectorAll("[data-price]").forEach(i=>{e.target===i&&t._updateTotalPrice()}),"SELECT"===e.target.nodeName){let i=e.target.closest("[data-moorl-product-buy-list-item]"),n=e.target.form;if(!i||!n)return;let s=n.action,o=new FormData(n),r={};o.forEach(function(t,e){r[e]=t});let a={};for(let[e,i]of Object.entries(t.options))a[e]=i;let l={switched:e.target.name,options:JSON.stringify(r),quantity:i.dataset.quantity??1,templateOptions:JSON.stringify(a),enablePrices:t.options.enablePrices,enableAddToCartSingle:t.options.enableAddToCartSingle,enableAddToCartAll:t.options.enableAddToCartAll};t._client.get(s+"?"+new URLSearchParams(l).toString(),e=>{i.innerHTML=e,t._updateTotalPrice(),window.PluginManager.initializePlugins()})}})}_updateTotalPrice(){if(!this.options.enableAddToCartAll)return;let t=this,e=new Intl.NumberFormat(this.options.locale,{style:"currency",currency:this.options.currencyIso}),i=0,n=0,s=!0;this._formValuesElement.innerHTML=null,0===this._productIds.length&&this.el.querySelectorAll("[data-price]").forEach(t=>{this._productIds.push(t.value)}),this.el.querySelectorAll("[data-price]").forEach(e=>{if(!e.checked){s=!1;return}this._productIds.includes(e.value)||(s=!1),i+=parseFloat(e.dataset.price)*parseInt(e.dataset.quantity),n++,t._createFormValues(e.value,e.dataset.quantity)}),this._totalPriceElement.innerText=e.format(i)+this.options.star,this.options.discountValue>0&&(s?(this._totalPriceElement.classList.add("striked"),this._discountPriceElement.classList.remove("d-none")):(this._totalPriceElement.classList.remove("striked"),this._discountPriceElement.classList.add("d-none")),this._discountPriceElement.innerText=e.format(i-this.options.discountValue/100*i)+this.options.star),this._selectedItemsElement&&(this._selectedItemsElement.innerText=n),this._buyButton.disabled=0===n}_createFormValues(t,e){this._formValuesElement.appendChild(this._createFormValue(`lineItems[${t}][id]`,t)),this._formValuesElement.appendChild(this._createFormValue(`lineItems[${t}][type]`,"product")),this._formValuesElement.appendChild(this._createFormValue(`lineItems[${t}][referencedId]`,t)),this._formValuesElement.appendChild(this._createFormValue(`lineItems[${t}][stackable]`,1)),this._formValuesElement.appendChild(this._createFormValue(`lineItems[${t}][removable]`,1)),this._formValuesElement.appendChild(this._createFormValue(`lineItems[${t}][quantity]`,e))}_createFormValue(t,e){let i=document.createElement("input");return i.type="hidden",i.value=e,i.name=t,i}}let f=window.PluginBaseClass;class g extends f{static #t=this.options={};init(){}_registerEvents(){}}let v=window.PluginBaseClass;class y extends v{static #t=this.options={};init(){this._cmsPageElement=document.querySelector(".cms-page"),this._headingElements=this._cmsPageElement.querySelectorAll("h2,h3,h5,h5,h6"),this._selectedTocLink=window.location.hash,this._selectedHeadline=null,this._registerEvents()}_registerEvents(){let t=this;window.addEventListener("scroll",e=>{t._onScroll()})}_onScroll(){let t=this._currentSection();t!==this._selectedTocLink&&(this._selectedTocLink=t,this._selectTocLink(this._selectedTocLink))}_currentSection(){return(this._headingElements.forEach(t=>{""!==t.id&&(""===this._selectedTocLink&&(this._selectedHeadline=t,this._selectedTocLink=" "),t.getBoundingClientRect().top<=50&&(this._selectedHeadline=t))}),null!==this._selectedHeadline)?this._selectedHeadline.id:this._selectedTocLink}_selectTocLink(t){""!==t.trim()&&(this.el.querySelectorAll(".active").forEach(t=>{t.classList.remove("active")}),this._getParents(this.el.querySelector('a[href="#'+t+'"]'),"li").forEach(t=>{t.classList.add("active")}))}_getParents(t,e){let i=[];for(;t&&t!==document;t=t.parentNode){if(e){t.matches(e)&&i.push(t);continue}i.push(t)}return i}}let b=window.PluginBaseClass;class w extends b{static #t=this.options={offsetTop:0,isSticky:!1};init(){this.options.isSticky&&this._registerEvents()}_registerEvents(){let t=this;window.addEventListener("scroll",e=>{t._onScroll()})}_onScroll(){(document.documentElement.scrollTop||document.body.scrollTop||0)<this.el.getBoundingClientRect().top+this.el.ownerDocument.defaultView.pageYOffset?this.el.style.paddingTop="0":this.el.style.paddingTop=this.options.offsetTop}}let x=window.PluginBaseClass;class E extends x{static #t=this.options={assetPath:"/bundles/moorlfoundation/storefront/js/paint/"};init(){"paintWorklet"in CSS&&(CSS.paintWorklet.addModule(`${this.options.assetPath}dots.js`),CSS.paintWorklet.addModule(`${this.options.assetPath}generateddots.js`)),this.el.addEventListener("mousemove",t=>{let e=this.el.getBoundingClientRect();this.el.style.setProperty("--mouse-x",t.clientX-e.left),this.el.style.setProperty("--mouse-y",t.clientY-e.top)})}}var C=i(156),P=i.n(C);class k{static ucFirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}static lcFirst(t){return t.charAt(0).toLowerCase()+t.slice(1)}static toDashCase(t){return t.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}static toLowerCamelCase(t,e){let i=k.toUpperCamelCase(t,e);return k.lcFirst(i)}static toUpperCamelCase(t,e){return e?t.split(e).map(t=>k.ucFirst(t.toLowerCase())).join(""):k.ucFirst(t.toLowerCase())}static parsePrimitive(t){try{return/^\d+(.|,)\d+$/.test(t)&&(t=t.replace(",",".")),JSON.parse(t)}catch(e){return t.toString()}}}class T{constructor(t=document){this._el=t,t.$emitter=this,this._listeners=[]}publish(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new CustomEvent(t,{detail:e,cancelable:i});return this.el.dispatchEvent(n),n}subscribe(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this,s=t.split("."),o=i.scope?e.bind(i.scope):e;if(i.once&&!0===i.once){let e=o;o=function(i){n.unsubscribe(t),e(i)}}return this.el.addEventListener(s[0],o),this.listeners.push({splitEventName:s,opts:i,cb:o}),!0}unsubscribe(t){let e=t.split(".");return this.listeners=this.listeners.reduce((t,i)=>([...i.splitEventName].sort().toString()===e.sort().toString()?this.el.removeEventListener(i.splitEventName[0],i.cb):t.push(i),t),[]),!0}reset(){return this.listeners.forEach(t=>{this.el.removeEventListener(t.splitEventName[0],t.cb)}),this.listeners=[],!0}get el(){return this._el}set el(t){this._el=t}get listeners(){return this._listeners}set listeners(t){this._listeners=t}}class S{constructor(t,e={},i=!1){if(!(t instanceof Node)){console.warn(`There is no valid element given while trying to create a plugin instance for "${i}".`);return}this.el=t,this.$emitter=new T(this.el),this._pluginName=this._getPluginName(i),this.options=this._mergeOptions(e),this._initialized=!1,this._registerInstance(),this._init()}init(){console.warn(`The "init" method for the plugin "${this._pluginName}" is not defined. The plugin will not be initialized.`)}update(){}_init(){this._initialized||(this.init(),this._initialized=!0)}_update(){this._initialized&&this.update()}_mergeOptions(t){let e=[this.constructor.options,this.options,t];return e.push(this._getConfigFromDataAttribute()),e.push(this._getOptionsFromDataAttribute()),P().all(e.filter(t=>t instanceof Object&&!(t instanceof Array)).map(t=>t||{}))}_getConfigFromDataAttribute(){let t={};if("function"!=typeof this.el.getAttribute)return t;let e=k.toDashCase(this._pluginName),i=this.el.getAttribute(`data-${e}-config`);return i?window.PluginConfigManager.get(this._pluginName,i):t}_getOptionsFromDataAttribute(){let t={};if("function"!=typeof this.el.getAttribute)return t;let e=k.toDashCase(this._pluginName),i=this.el.getAttribute(`data-${e}-options`);if(i)try{return JSON.parse(i)}catch(t){console.error(`The data attribute "data-${e}-options" could not be parsed to json: ${t.message}`)}return t}_registerInstance(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}_getPluginName(t){return t||(t=this.constructor.name),t}}class M extends S{static #t=this.options={parentFilterPanelSelector:".cms-element-product-listing-wrapper",dropdownSelector:".filter-panel-item-dropdown"};_init(){super._init(),this._validateMethods();let t=document.querySelector(this.options.parentFilterPanelSelector);this.listing=window.PluginManager.getPluginInstanceFromElement(t,"Listing"),this.listing.registerFilter(this),this._preventDropdownClose()}_preventDropdownClose(){let t=this.el.querySelector(this.options.dropdownSelector);t&&t.addEventListener("click",t=>{t.stopPropagation()})}_validateMethods(){if("function"!=typeof this.getValues)throw Error(`[${this._pluginName}] Needs the method "getValues"'`);if("function"!=typeof this.getLabels)throw Error(`[${this._pluginName}] Needs the method "getLabels"'`);if("function"!=typeof this.reset)throw Error(`[${this._pluginName}] Needs the method "reset"'`);if("function"!=typeof this.resetAll)throw Error(`[${this._pluginName}] Needs the method "resetAll"'`)}}class O{static isSupported(){return"undefined"!==document.cookie}static setItem(t,e,i){if(null==t)throw Error("You must specify a key to set a cookie");let n=new Date;n.setTime(n.getTime()+864e5*i);let s="";"https:"===location.protocol&&(s="secure"),document.cookie=`${t}=${e};expires=${n.toUTCString()};path=/;sameSite=lax;${s}`}static getItem(t){if(!t)return!1;let e=t+"=",i=document.cookie.split(";");for(let t=0;t<i.length;t++){let n=i[t];for(;" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return!1}static removeItem(t){document.cookie=`${t}= ; expires = Thu, 01 Jan 1970 00:00:00 GMT;path=/`}static key(){return""}static clear(){}}class A extends M{static #t=this.options=P()(M.options,{inputLocationSelector:".location",inputDistanceSelector:".distance",inputPersistSelector:".radius-persist",inputInvalidCLass:"is-invalid",inputTimeout:1e3,locationKey:"location",distanceKey:"distance",persistKey:"radius-persist",errorContainerClass:"filter-radius-error",containerSelector:".filter-radius-container",defaultValue:null,filterRadiusPersist:!1,snippets:{filterRadiusActiveLocationLabel:"",filterRadiusActiveDistanceLabel:"",filterRadiusErrorMessage:""}});init(){this._container=this.el.querySelector(this.options.containerSelector),this._inputLocation=this.el.querySelector(this.options.inputLocationSelector),this._inputDistance=this.el.querySelector(this.options.inputDistanceSelector),this.options.filterRadiusPersist&&(this._inputPersist=this.el.querySelector(this.options.inputPersistSelector)),this._timeout=null,this._hasError=!1,this.options.defaultValue&&(this._inputDistance.value=this.options.defaultValue),this._registerEvents(),this._setValuesFromCookie()}_registerEvents(){this._inputLocation.addEventListener("input",this._onChangeInput.bind(this)),this._inputDistance.addEventListener("input",this._onChangeInput.bind(this)),this.options.filterRadiusPersist&&this._inputPersist.addEventListener("change",this._onChangeInput.bind(this))}_onChangeInput(){clearTimeout(this._timeout),this._timeout=setTimeout(()=>{this._isInputInvalid()?this._setError():(this._removeError(),this.listing.changeListing())},this.options.inputTimeout)}getValues(){let t={};return t[this.options.locationKey]=this._inputLocation.value,t[this.options.distanceKey]=this._inputDistance.value,this.options.filterRadiusPersist&&(t[this.options.persistKey]=!!this._inputPersist.checked),t}_isInputInvalid(){let t=this._inputLocation.value.length<3,e=0===this._inputDistance.value.length;return t||e}_getErrorMessageTemplate(){return`<div class="${this.options.errorContainerClass}">${this.options.snippets.filterRadiusErrorMessage}</div>`}_setError(){this._hasError||(this._inputLocation.classList.add(this.options.inputInvalidCLass),this._inputDistance.classList.add(this.options.inputInvalidCLass),this._container.insertAdjacentHTML("afterend",this._getErrorMessageTemplate()),this._hasError=!0)}_removeError(){this._inputLocation.classList.remove(this.options.inputInvalidCLass),this._inputDistance.classList.remove(this.options.inputInvalidCLass);let t=this.el.querySelector(`.${this.options.errorContainerClass}`);t&&t.remove(),this._hasError=!1}_setValuesFromCookie(){try{let t=O.getItem(this.options.persistKey);if(this.options.filterRadiusPersist&&t){let e=JSON.parse(decodeURIComponent(t));this._inputLocation.value=e[this.options.locationKey],this._inputDistance.value=e[this.options.distanceKey],this._inputPersist.checked=!0,this._onChangeInput()}}catch(t){}}setValuesFromUrl(t){let e=!1;return Object.keys(t).forEach(i=>{i===this.options.locationKey&&(this._inputLocation.value=t[i],e=!0),i===this.options.distanceKey&&(this._inputDistance.value=t[i],e=!0),this.options.filterRadiusPersist&&i===this.options.persistKey&&(this._inputPersist.checked=t[i],e=!0)}),e}getLabels(){let t=[];return this._inputLocation.value.length&&this._inputDistance.value.length?this._inputLocation.value.length&&t.push({label:`${this._inputDistance.value}${this.options.snippets.filterRadiusActiveDistanceLabel} ${this.options.snippets.filterRadiusActiveLocationLabel} "${this._inputLocation.value}"`,id:this.options.locationKey}):t=[],t}reset(t){t===this.options.locationKey&&(this._inputLocation.value=""),t===this.options.distanceKey&&(this._inputDistance.value=""),this.options.filterRadiusPersist&&t===this.options.persistKey&&(this._inputPersist.checked=!1),this._removeError()}resetAll(){this._inputLocation.value="",this._inputDistance.value="",this.options.filterRadiusPersist&&(this._inputPersist.checked=!1),this._removeError()}}class z extends M{static #t=this.options=P()(M.options,{inputSearchSelector:".search",inputInvalidCLass:"is-invalid",inputTimeout:1e3,searchKey:"search",containerSelector:".filter-search-container"});init(){this._container=this.el.querySelector(this.options.containerSelector),this._inputSearch=this.el.querySelector(this.options.inputSearchSelector),this._timeout=null,this._hasError=!1,this._registerEvents()}_registerEvents(){this._inputSearch.addEventListener("input",this._onChangeInput.bind(this))}_onChangeInput(){clearTimeout(this._timeout),this._timeout=setTimeout(()=>{this._isInputInvalid()?this._setError():this._removeError(),this.listing.changeListing()},this.options.inputTimeout)}getValues(){let t={};return t[this.options.searchKey]=this._inputSearch.value,t}_isInputInvalid(){return this._inputSearch.value.length<4}_getErrorMessageTemplate(){return`<div class="${this.options.errorContainerClass}">${this.options.snippets.filterSearchErrorMessage}</div>`}_setError(){this._hasError||(this._inputSearch.classList.add(this.options.inputInvalidCLass),this._inputDistance.classList.add(this.options.inputInvalidCLass),this._container.insertAdjacentHTML("afterend",this._getErrorMessageTemplate()),this._hasError=!0)}_removeError(){this._inputSearch.classList.remove(this.options.inputInvalidCLass);let t=this.el.querySelector(`.${this.options.errorContainerClass}`);t&&t.remove(),this._hasError=!1}setValuesFromUrl(t){let e=!1;return Object.keys(t).forEach(i=>{i===this.options.searchKey&&(this._inputSearch.value=t[i],e=!0)}),e}getLabels(){let t=[];return this._inputSearch.value.length?this._inputSearch.value.length&&t.push({label:`${this._inputSearch.value}`,id:this.options.searchKey}):t=[],t}reset(t){t===this.options.searchKey&&(this._inputSearch.value=""),this._removeError()}resetAll(){this._inputSearch.value="",this._removeError()}}var I=function t(){var e=[].slice.call(arguments),i=!1;"boolean"==typeof e[0]&&(i=e.shift());var n=e[0];if(F(n))throw Error("extendee must be an object");for(var s=e.slice(1),o=s.length,r=0;r<o;r++){var a=s[r];for(var l in a)if(Object.prototype.hasOwnProperty.call(a,l)){var h=a[l];if(i&&(Array.isArray(h)||"[object Object]"==({}).toString.call(h))){var c=Array.isArray(h)?[]:{};n[l]=t(!0,Object.prototype.hasOwnProperty.call(n,l)&&!F(n[l])?n[l]:c,h)}else n[l]=h}}return n};function F(t){return!t||"object"!=typeof t&&"function"!=typeof t}class B{on(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this}emit(t,...e){this._callbacks=this._callbacks||{};let i=this._callbacks[t];if(i)for(let t of i)t.apply(this,e);return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+t,{args:e})),this}makeEvent(t,e){let i={bubbles:!0,cancelable:!0,detail:e};if("function"==typeof window.CustomEvent)return new CustomEvent(t,i);var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),n}off(t,e){if(!this._callbacks||0==arguments.length)return this._callbacks={},this;let i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(let t=0;t<i.length;t++)if(i[t]===e){i.splice(t,1);break}return this}}let D={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2097152,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,defaultHeaders:!0,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init(){},params(t,e,i){if(i)return{dzuuid:i.file.upload.uuid,dzchunkindex:i.index,dztotalfilesize:i.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:i.file.upload.totalChunkCount,dzchunkbyteoffset:i.index*this.options.chunkSize}},accept:(t,e)=>e(),chunksUploaded:function(t,e){e()},binaryBody:!1,fallback(){let t;for(let e of(this.element.className=`${this.element.className} dz-browser-not-supported`,this.element.getElementsByTagName("div")))if(/(^| )dz-message($| )/.test(e.className)){t=e,e.className="dz-message";break}t||(t=R.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t));let e=t.getElementsByTagName("span")[0];return e&&(null!=e.textContent?e.textContent=this.options.dictFallbackMessage:null!=e.innerText&&(e.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize(t,e,i,n){let s={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},o=t.width/t.height;null==e&&null==i?(e=s.srcWidth,i=s.srcHeight):null==e?e=i*o:null==i&&(i=e/o),e=Math.min(e,s.srcWidth),i=Math.min(i,s.srcHeight);let r=e/i;if(s.srcWidth>e||s.srcHeight>i){if("crop"===n)o>r?(s.srcHeight=t.height,s.srcWidth=s.srcHeight*r):(s.srcWidth=t.width,s.srcHeight=s.srcWidth/r);else if("contain"===n)o>r?i=e/o:e=i*o;else throw Error(`Unknown resizeMethod '${n}'`)}return s.srcX=(t.width-s.srcWidth)/2,s.srcY=(t.height-s.srcHeight)/2,s.trgWidth=e,s.trgHeight=i,s},transformFile(t,e){return(this.options.resizeWidth||this.options.resizeHeight)&&t.type.match(/image.*/)?this.resizeImage(t,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,e):e(t)},previewTemplate:function(t){return t&&t.__esModule?t.default:t}('<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail=""></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size=""></span></div>\n    <div class="dz-filename"><span data-dz-name=""></span></div>\n  </div>\n  <div class="dz-progress">\n    <span class="dz-upload" data-dz-uploadprogress=""></span>\n  </div>\n  <div class="dz-error-message"><span data-dz-errormessage=""></span></div>\n  <div class="dz-success-mark">\n    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">\n      <path d="M10.2071 29.7929L14.2929 25.7071C14.6834 25.3166 15.3166 25.3166 15.7071 25.7071L21.2929 31.2929C21.6834 31.6834 22.3166 31.6834 22.7071 31.2929L38.2929 15.7071C38.6834 15.3166 39.3166 15.3166 39.7071 15.7071L43.7929 19.7929C44.1834 20.1834 44.1834 20.8166 43.7929 21.2071L22.7071 42.2929C22.3166 42.6834 21.6834 42.6834 21.2929 42.2929L10.2071 31.2071C9.81658 30.8166 9.81658 30.1834 10.2071 29.7929Z"></path>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54" height="54" viewBox="0 0 54 54" fill="white" xmlns="http://www.w3.org/2000/svg">\n      <path d="M26.2929 20.2929L19.2071 13.2071C18.8166 12.8166 18.1834 12.8166 17.7929 13.2071L13.2071 17.7929C12.8166 18.1834 12.8166 18.8166 13.2071 19.2071L20.2929 26.2929C20.6834 26.6834 20.6834 27.3166 20.2929 27.7071L13.2071 34.7929C12.8166 35.1834 12.8166 35.8166 13.2071 36.2071L17.7929 40.7929C18.1834 41.1834 18.8166 41.1834 19.2071 40.7929L26.2929 33.7071C26.6834 33.3166 27.3166 33.3166 27.7071 33.7071L34.7929 40.7929C35.1834 41.1834 35.8166 41.1834 36.2071 40.7929L40.7929 36.2071C41.1834 35.8166 41.1834 35.1834 40.7929 34.7929L33.7071 27.7071C33.3166 27.3166 33.3166 26.6834 33.7071 26.2929L40.7929 19.2071C41.1834 18.8166 41.1834 18.1834 40.7929 17.7929L36.2071 13.2071C35.8166 12.8166 35.1834 12.8166 34.7929 13.2071L27.7071 20.2929C27.3166 20.6834 26.6834 20.6834 26.2929 20.2929Z"></path>\n    </svg>\n  </div>\n</div>\n'),drop(t){return this.element.classList.remove("dz-drag-hover")},dragstart(t){},dragend(t){return this.element.classList.remove("dz-drag-hover")},dragenter(t){return this.element.classList.add("dz-drag-hover")},dragover(t){return this.element.classList.add("dz-drag-hover")},dragleave(t){return this.element.classList.remove("dz-drag-hover")},paste(t){},reset(){return this.element.classList.remove("dz-started")},addedfile(t){if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){for(var e of(t.previewElement=R.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),t.previewElement.querySelectorAll("[data-dz-name]")))e.textContent=t.name;for(e of t.previewElement.querySelectorAll("[data-dz-size]"))e.innerHTML=this.filesize(t.size);this.options.addRemoveLinks&&(t._removeLink=R.createElement(`<a class="dz-remove" href="javascript:undefined;" data-dz-remove>${this.options.dictRemoveFile}</a>`),t.previewElement.appendChild(t._removeLink));let i=e=>(e.preventDefault(),e.stopPropagation(),t.status===R.UPLOADING)?R.confirm(this.options.dictCancelUploadConfirmation,()=>this.removeFile(t)):this.options.dictRemoveFileConfirmation?R.confirm(this.options.dictRemoveFileConfirmation,()=>this.removeFile(t)):this.removeFile(t);for(let e of t.previewElement.querySelectorAll("[data-dz-remove]"))e.addEventListener("click",i)}},removedfile(t){return null!=t.previewElement&&null!=t.previewElement.parentNode&&t.previewElement.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail(t,e){if(t.previewElement){for(let i of(t.previewElement.classList.remove("dz-file-preview"),t.previewElement.querySelectorAll("[data-dz-thumbnail]")))i.alt=t.name,i.src=e;return setTimeout(()=>t.previewElement.classList.add("dz-image-preview"),1)}},error(t,e){if(t.previewElement)for(let i of(t.previewElement.classList.add("dz-error"),"string"!=typeof e&&e.error&&(e=e.error),t.previewElement.querySelectorAll("[data-dz-errormessage]")))i.textContent=e},errormultiple(){},processing(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple(){},uploadprogress(t,e,i){if(t.previewElement)for(let i of t.previewElement.querySelectorAll("[data-dz-uploadprogress]"))"PROGRESS"===i.nodeName?i.value=e:i.style.width=`${e}%`},totaluploadprogress(){},sending(){},sendingmultiple(){},success(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple(){},canceled(t){return this.emit("error",t,this.options.dictUploadCanceled)},canceledmultiple(){},complete(t){if(t._removeLink&&(t._removeLink.innerHTML=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple(){},maxfilesexceeded(){},maxfilesreached(){},queuecomplete(){},addedfiles(){}};class R extends B{static initClass(){this.prototype.Emitter=B,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}getAcceptedFiles(){return this.files.filter(t=>t.accepted).map(t=>t)}getRejectedFiles(){return this.files.filter(t=>!t.accepted).map(t=>t)}getFilesWithStatus(t){return this.files.filter(e=>e.status===t).map(t=>t)}getQueuedFiles(){return this.getFilesWithStatus(R.QUEUED)}getUploadingFiles(){return this.getFilesWithStatus(R.UPLOADING)}getAddedFiles(){return this.getFilesWithStatus(R.ADDED)}getActiveFiles(){return this.files.filter(t=>t.status===R.UPLOADING||t.status===R.QUEUED).map(t=>t)}init(){if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(R.createElement(`<div class="dz-default dz-message"><button class="dz-button" type="button">${this.options.dictDefaultMessage}</button></div>`)),this.clickableElements.length){let t=()=>{this.hiddenFileInput&&this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=document.createElement("input"),this.hiddenFileInput.setAttribute("type","file"),(null===this.options.maxFiles||this.options.maxFiles>1)&&this.hiddenFileInput.setAttribute("multiple","multiple"),this.hiddenFileInput.className="dz-hidden-input",null!==this.options.acceptedFiles&&this.hiddenFileInput.setAttribute("accept",this.options.acceptedFiles),null!==this.options.capture&&this.hiddenFileInput.setAttribute("capture",this.options.capture),this.hiddenFileInput.setAttribute("tabindex","-1"),this.hiddenFileInput.style.visibility="hidden",this.hiddenFileInput.style.position="absolute",this.hiddenFileInput.style.top="0",this.hiddenFileInput.style.left="0",this.hiddenFileInput.style.height="0",this.hiddenFileInput.style.width="0",R.getElement(this.options.hiddenInputContainer,"hiddenInputContainer").appendChild(this.hiddenFileInput),this.hiddenFileInput.addEventListener("change",()=>{let{files:e}=this.hiddenFileInput;if(e.length)for(let t of e)this.addFile(t);this.emit("addedfiles",e),t()})};t()}for(let t of(this.URL=null!==window.URL?window.URL:window.webkitURL,this.events))this.on(t,this.options[t]);this.on("uploadprogress",()=>this.updateTotalUploadProgress()),this.on("removedfile",()=>this.updateTotalUploadProgress()),this.on("canceled",t=>this.emit("complete",t)),this.on("complete",t=>{if(0===this.getAddedFiles().length&&0===this.getUploadingFiles().length&&0===this.getQueuedFiles().length)return setTimeout(()=>this.emit("queuecomplete"),0)});let t=function(t){if(t.dataTransfer.types){for(var e=0;e<t.dataTransfer.types.length;e++)if("Files"===t.dataTransfer.types[e])return!0}return!1},e=function(e){if(t(e))return(e.stopPropagation(),e.preventDefault)?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:t=>this.emit("dragstart",t),dragenter:t=>(e(t),this.emit("dragenter",t)),dragover:t=>{let i;try{i=t.dataTransfer.effectAllowed}catch(t){}return t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",e(t),this.emit("dragover",t)},dragleave:t=>this.emit("dragleave",t),drop:t=>(e(t),this.drop(t)),dragend:t=>this.emit("dragend",t)}}],this.clickableElements.forEach(t=>this.listeners.push({element:t,events:{click:e=>((t!==this.element||e.target===this.element||R.elementInside(e.target,this.element.querySelector(".dz-message")))&&this.hiddenFileInput.click(),!0)}})),this.enable(),this.options.init.call(this)}destroy(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,R.instances.splice(R.instances.indexOf(this),1)}updateTotalUploadProgress(){let t;let e=0,i=0;if(this.getActiveFiles().length){for(let t of this.getActiveFiles())e+=t.upload.bytesSent,i+=t.upload.total;t=100*e/i}else t=100;return this.emit("totaluploadprogress",t,i,e)}_getParamName(t){return"function"==typeof this.options.paramName?this.options.paramName(t):`${this.options.paramName}${this.options.uploadMultiple?`[${t}]`:""}`}_renameFile(t){return"function"!=typeof this.options.renameFile?t.name:this.options.renameFile(t)}getFallbackForm(){let t,e;if(t=this.getExistingFallback())return t;let i='<div class="dz-fallback">';this.options.dictFallbackText&&(i+=`<p>${this.options.dictFallbackText}</p>`),i+=`<input type="file" name="${this._getParamName(0)}" ${this.options.uploadMultiple?'multiple="multiple"':void 0} /><input type="submit" value="Upload!"></div>`;let n=R.createElement(i);return"FORM"!==this.element.tagName?(e=R.createElement(`<form action="${this.options.url}" enctype="multipart/form-data" method="${this.options.method}"></form>`)).appendChild(n):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=e?e:n}getExistingFallback(){for(let e of["div","form"]){var t;if(t=function(t){for(let e of t)if(/(^| )fallback($| )/.test(e.className))return e}(this.element.getElementsByTagName(e)))return t}}setupEventListeners(){return this.listeners.map(t=>(()=>{let e=[];for(let i in t.events){let n=t.events[i];e.push(t.element.addEventListener(i,n,!1))}return e})())}removeEventListeners(){return this.listeners.map(t=>(()=>{let e=[];for(let i in t.events){let n=t.events[i];e.push(t.element.removeEventListener(i,n,!1))}return e})())}disable(){return this.clickableElements.forEach(t=>t.classList.remove("dz-clickable")),this.removeEventListeners(),this.disabled=!0,this.files.map(t=>this.cancelUpload(t))}enable(){return delete this.disabled,this.clickableElements.forEach(t=>t.classList.add("dz-clickable")),this.setupEventListeners()}filesize(t){let e=0,i="b";if(t>0){let n=["tb","gb","mb","kb","b"];for(let s=0;s<n.length;s++){let o=n[s];if(t>=Math.pow(this.options.filesizeBase,4-s)/10){e=t/Math.pow(this.options.filesizeBase,4-s),i=o;break}}e=Math.round(10*e)/10}return`<strong>${e}</strong> ${this.options.dictFileSizeUnits[i]}`}_updateMaxFilesReachedClass(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}drop(t){if(!t.dataTransfer)return;this.emit("drop",t);let e=[];for(let i=0;i<t.dataTransfer.files.length;i++)e[i]=t.dataTransfer.files[i];if(e.length){let{items:i}=t.dataTransfer;i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(e)}this.emit("addedfiles",e)}paste(t){var e;if(null==(e=null!=t?t.clipboardData:void 0,null!=e?e.items:void 0))return;this.emit("paste",t);let{items:i}=t.clipboardData;if(i.length)return this._addFilesFromItems(i)}handleFiles(t){for(let e of t)this.addFile(e)}_addFilesFromItems(t){return(()=>{let e=[];for(let n of t){var i;null!=n.webkitGetAsEntry&&(i=n.webkitGetAsEntry())?i.isFile?e.push(this.addFile(n.getAsFile())):i.isDirectory?e.push(this._addFilesFromDirectory(i,i.name)):e.push(void 0):null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?e.push(this.addFile(n.getAsFile())):e.push(void 0)}return e})()}_addFilesFromDirectory(t,e){let i=t.createReader(),n=t=>{var e,i;return e=console,i=e=>e.log(t),null!=e&&"function"==typeof e.log?i(e,"log"):void 0};var s=()=>i.readEntries(t=>{if(t.length>0){for(let i of t)i.isFile?i.file(t=>{if(!this.options.ignoreHiddenFiles||"."!==t.name.substring(0,1))return t.fullPath=`${e}/${t.name}`,this.addFile(t)}):i.isDirectory&&this._addFilesFromDirectory(i,`${e}/${i.name}`);s()}return null},n);return s()}accept(t,e){this.options.maxFilesize&&t.size>1048576*this.options.maxFilesize?e(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):R.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(e(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,e):e(this.options.dictInvalidFileType)}addFile(t){t.upload={uuid:R.uuidv4(),progress:0,total:t.size,bytesSent:0,filename:this._renameFile(t)},this.files.push(t),t.status=R.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,e=>{e?(t.accepted=!1,this._errorProcessing([t],e)):(t.accepted=!0,this.options.autoQueue&&this.enqueueFile(t)),this._updateMaxFilesReachedClass()})}enqueueFiles(t){for(let e of t)this.enqueueFile(e);return null}enqueueFile(t){if(t.status===R.ADDED&&!0===t.accepted){if(t.status=R.QUEUED,this.options.autoProcessQueue)return setTimeout(()=>this.processQueue(),0)}else throw Error("This file can't be queued because it has already been processed or was rejected.")}_enqueueThumbnail(t){if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1048576*this.options.maxThumbnailFilesize)return this._thumbnailQueue.push(t),setTimeout(()=>this._processThumbnailQueue(),0)}_processThumbnailQueue(){if(this._processingThumbnail||0===this._thumbnailQueue.length)return;this._processingThumbnail=!0;let t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,e=>(this.emit("thumbnail",t,e),this._processingThumbnail=!1,this._processThumbnailQueue()))}removeFile(t){if(t.status===R.UPLOADING&&this.cancelUpload(t),this.files=N(this.files,t),this.emit("removedfile",t),0===this.files.length)return this.emit("reset")}removeAllFiles(t){for(let e of(null==t&&(t=!1),this.files.slice()))(e.status!==R.UPLOADING||t)&&this.removeFile(e);return null}resizeImage(t,e,i,n,s){return this.createThumbnail(t,e,i,n,!0,(e,i)=>{if(null==i)return s(t);{let{resizeMimeType:e}=this.options;null==e&&(e=t.type);let n=i.toDataURL(e,this.options.resizeQuality);return("image/jpeg"===e||"image/jpg"===e)&&(n=q.restore(t.dataURL,n)),s(R.dataURItoBlob(n))}})}createThumbnail(t,e,i,n,s,o){let r=new FileReader;r.onload=()=>{if(t.dataURL=r.result,"image/svg+xml"===t.type){null!=o&&o(r.result);return}this.createThumbnailFromUrl(t,e,i,n,s,o)},r.readAsDataURL(t)}displayExistingFile(t,e,i,n,s=!0){this.emit("addedfile",t),this.emit("complete",t),s?(t.dataURL=e,this.createThumbnailFromUrl(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,e=>{this.emit("thumbnail",t,e),i&&i()},n)):(this.emit("thumbnail",t,e),i&&i())}createThumbnailFromUrl(t,e,i,n,s,o,r){let a=document.createElement("img");return r&&(a.crossOrigin=r),s="from-image"!=getComputedStyle(document.body).imageOrientation&&s,a.onload=()=>{let r=t=>t(1);return"undefined"!=typeof EXIF&&null!==EXIF&&s&&(r=t=>EXIF.getData(a,function(){return t(EXIF.getTag(this,"Orientation"))})),r(s=>{t.width=a.width,t.height=a.height;let r=this.options.resize.call(this,t,e,i,n),l=document.createElement("canvas"),h=l.getContext("2d");switch(l.width=r.trgWidth,l.height=r.trgHeight,s>4&&(l.width=r.trgHeight,l.height=r.trgWidth),s){case 2:h.translate(l.width,0),h.scale(-1,1);break;case 3:h.translate(l.width,l.height),h.rotate(Math.PI);break;case 4:h.translate(0,l.height),h.scale(1,-1);break;case 5:h.rotate(.5*Math.PI),h.scale(1,-1);break;case 6:h.rotate(.5*Math.PI),h.translate(0,-l.width);break;case 7:h.rotate(.5*Math.PI),h.translate(l.height,-l.width),h.scale(-1,1);break;case 8:h.rotate(-.5*Math.PI),h.translate(-l.height,0)}H(h,a,null!=r.srcX?r.srcX:0,null!=r.srcY?r.srcY:0,r.srcWidth,r.srcHeight,null!=r.trgX?r.trgX:0,null!=r.trgY?r.trgY:0,r.trgWidth,r.trgHeight);let c=l.toDataURL("image/png");if(null!=o)return o(c,l)})},null!=o&&(a.onerror=o),a.src=t.dataURL}processQueue(){let{parallelUploads:t}=this.options,e=this.getUploadingFiles().length,i=e;if(e>=t)return;let n=this.getQueuedFiles();if(n.length>0){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,t-e));for(;i<t;){if(!n.length)return;this.processFile(n.shift()),i++}}}processFile(t){return this.processFiles([t])}processFiles(t){for(let e of t)e.processing=!0,e.status=R.UPLOADING,this.emit("processing",e);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)}_getFilesWithXhr(t){return this.files.filter(e=>e.xhr===t).map(t=>t)}cancelUpload(t){if(t.status===R.UPLOADING){let e=this._getFilesWithXhr(t.xhr);for(let t of e)t.status=R.CANCELED;for(let i of(void 0!==t.xhr&&t.xhr.abort(),e))this.emit("canceled",i);this.options.uploadMultiple&&this.emit("canceledmultiple",e)}else(t.status===R.ADDED||t.status===R.QUEUED)&&(t.status=R.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));if(this.options.autoProcessQueue)return this.processQueue()}resolveOption(t,...e){return"function"==typeof t?t.apply(this,e):t}uploadFile(t){return this.uploadFiles([t])}uploadFiles(t){this._transformFiles(t,e=>{if(this.options.chunking){let i=e[0];t[0].upload.chunked=this.options.chunking&&(this.options.forceChunking||i.size>this.options.chunkSize),t[0].upload.totalChunkCount=Math.ceil(i.size/this.options.chunkSize)}if(t[0].upload.chunked){let i=t[0],n=e[0],s=0;i.upload.chunks=[];let o=()=>{let e=0;for(;void 0!==i.upload.chunks[e];)e++;if(e>=i.upload.totalChunkCount)return;s++;let o=e*this.options.chunkSize,r=Math.min(o+this.options.chunkSize,n.size),a={name:this._getParamName(0),data:n.webkitSlice?n.webkitSlice(o,r):n.slice(o,r),filename:i.upload.filename,chunkIndex:e};i.upload.chunks[e]={file:i,index:e,dataBlock:a,status:R.UPLOADING,progress:0,retries:0},this._uploadData(t,[a])};if(i.upload.finishedChunkUpload=(e,n)=>{let s=!0;e.status=R.SUCCESS,e.dataBlock=null,e.response=e.xhr.responseText,e.responseHeaders=e.xhr.getAllResponseHeaders(),e.xhr=null;for(let t=0;t<i.upload.totalChunkCount;t++){if(void 0===i.upload.chunks[t])return o();i.upload.chunks[t].status!==R.SUCCESS&&(s=!1)}s&&this.options.chunksUploaded(i,()=>{this._finished(t,n,null)})},this.options.parallelChunkUploads)for(let t=0;t<i.upload.totalChunkCount;t++)o();else o()}else{let i=[];for(let n=0;n<t.length;n++)i[n]={name:this._getParamName(n),data:e[n],filename:t[n].upload.filename};this._uploadData(t,i)}})}_getChunk(t,e){for(let i=0;i<t.upload.totalChunkCount;i++)if(void 0!==t.upload.chunks[i]&&t.upload.chunks[i].xhr===e)return t.upload.chunks[i]}_uploadData(t,e){let i=new XMLHttpRequest;for(let e of t)e.xhr=i;t[0].upload.chunked&&(t[0].upload.chunks[e[0].chunkIndex].xhr=i);let n=this.resolveOption(this.options.method,t,e),s=this.resolveOption(this.options.url,t,e);i.open(n,s,!0),this.resolveOption(this.options.timeout,t)&&(i.timeout=this.resolveOption(this.options.timeout,t)),i.withCredentials=!!this.options.withCredentials,i.onload=e=>{this._finishedUploading(t,i,e)},i.ontimeout=()=>{this._handleUploadError(t,i,`Request timedout after ${this.options.timeout/1e3} seconds`)},i.onerror=()=>{this._handleUploadError(t,i)},(null!=i.upload?i.upload:i).onprogress=e=>this._updateFilesUploadProgress(t,i,e);let o=this.options.defaultHeaders?{Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}:{};for(let e in this.options.binaryBody&&(o["Content-Type"]=t[0].type),this.options.headers&&I(o,this.options.headers),o){let t=o[e];t&&i.setRequestHeader(e,t)}if(this.options.binaryBody){for(let e of t)this.emit("sending",e,i);this.options.uploadMultiple&&this.emit("sendingmultiple",t,i),this.submitRequest(i,null,t)}else{let n=new FormData;if(this.options.params){let e=this.options.params;for(let s in"function"==typeof e&&(e=e.call(this,t,i,t[0].upload.chunked?this._getChunk(t[0],i):null)),e){let t=e[s];if(Array.isArray(t))for(let e=0;e<t.length;e++)n.append(s,t[e]);else n.append(s,t)}}for(let e of t)this.emit("sending",e,i,n);this.options.uploadMultiple&&this.emit("sendingmultiple",t,i,n),this._addFormElementData(n);for(let t=0;t<e.length;t++){let i=e[t];n.append(i.name,i.data,i.filename)}this.submitRequest(i,n,t)}}_transformFiles(t,e){let i=[],n=0;for(let s=0;s<t.length;s++)this.options.transformFile.call(this,t[s],o=>{i[s]=o,++n===t.length&&e(i)})}_addFormElementData(t){if("FORM"===this.element.tagName)for(let e of this.element.querySelectorAll("input, textarea, select, button")){let i=e.getAttribute("name"),n=e.getAttribute("type");if(n&&(n=n.toLowerCase()),null!=i){if("SELECT"===e.tagName&&e.hasAttribute("multiple"))for(let n of e.options)n.selected&&t.append(i,n.value);else(!n||"checkbox"!==n&&"radio"!==n||e.checked)&&t.append(i,e.value)}}}_updateFilesUploadProgress(t,e,i){if(t[0].upload.chunked){let n=t[0],s=this._getChunk(n,e);i?(s.progress=100*i.loaded/i.total,s.total=i.total,s.bytesSent=i.loaded):(s.progress=100,s.bytesSent=s.total),n.upload.progress=0,n.upload.total=0,n.upload.bytesSent=0;for(let t=0;t<n.upload.totalChunkCount;t++)n.upload.chunks[t]&&void 0!==n.upload.chunks[t].progress&&(n.upload.progress+=n.upload.chunks[t].progress,n.upload.total+=n.upload.chunks[t].total,n.upload.bytesSent+=n.upload.chunks[t].bytesSent);n.upload.progress=n.upload.progress/n.upload.totalChunkCount,this.emit("uploadprogress",n,n.upload.progress,n.upload.bytesSent)}else for(let e of t)e.upload.total&&e.upload.bytesSent&&e.upload.bytesSent==e.upload.total||(i?(e.upload.progress=100*i.loaded/i.total,e.upload.total=i.total,e.upload.bytesSent=i.loaded):(e.upload.progress=100,e.upload.bytesSent=e.upload.total),this.emit("uploadprogress",e,e.upload.progress,e.upload.bytesSent))}_finishedUploading(t,e,i){let n;if(t[0].status!==R.CANCELED&&4===e.readyState){if("arraybuffer"!==e.responseType&&"blob"!==e.responseType&&(n=e.responseText,e.getResponseHeader("content-type")&&~e.getResponseHeader("content-type").indexOf("application/json")))try{n=JSON.parse(n)}catch(t){i=t,n="Invalid JSON response from server."}this._updateFilesUploadProgress(t,e),200<=e.status&&e.status<300?t[0].upload.chunked?t[0].upload.finishedChunkUpload(this._getChunk(t[0],e),n):this._finished(t,n,i):this._handleUploadError(t,e,n)}}_handleUploadError(t,e,i){if(t[0].status!==R.CANCELED){if(t[0].upload.chunked&&this.options.retryChunks){let i=this._getChunk(t[0],e);if(i.retries++<this.options.retryChunksLimit){this._uploadData(t,[i.dataBlock]);return}console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(t,i||this.options.dictResponseError.replace("{{statusCode}}",e.status),e)}}submitRequest(t,e,i){if(1!=t.readyState){console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.");return}if(this.options.binaryBody){if(i[0].upload.chunked){let e=this._getChunk(i[0],t);t.send(e.dataBlock.data)}else t.send(i[0])}else t.send(e)}_finished(t,e,i){for(let n of t)n.status=R.SUCCESS,this.emit("success",n,e,i),this.emit("complete",n);if(this.options.uploadMultiple&&(this.emit("successmultiple",t,e,i),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()}_errorProcessing(t,e,i){for(let n of t)n.status=R.ERROR,this.emit("error",n,e,i),this.emit("complete",n);if(this.options.uploadMultiple&&(this.emit("errormultiple",t,e,i),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()}static uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}constructor(t,e){let i,n;if(super(),this.element=t,this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw Error("Invalid dropzone element.");if(this.element.dropzone)throw Error("Dropzone already attached.");R.instances.push(this),this.element.dropzone=this;let s=null!=(n=R.optionsForElement(this.element))?n:{};if(this.options=I(!0,{},D,s,null!=e?e:{}),this.options.previewTemplate=this.options.previewTemplate.replace(/\n*/g,""),this.options.forceFallback||!R.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(this.options.uploadMultiple&&this.options.chunking)throw Error("You cannot set both: uploadMultiple and chunking.");if(this.options.binaryBody&&this.options.uploadMultiple)throw Error("You cannot set both: binaryBody and uploadMultiple.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),null!=this.options.renameFilename&&(this.options.renameFile=t=>this.options.renameFilename.call(this,t.name,t)),"string"==typeof this.options.method&&(this.options.method=this.options.method.toUpperCase()),(i=this.getExistingFallback())&&i.parentNode&&i.parentNode.removeChild(i),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=R.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=R.getElements(this.options.clickable,"clickable")),this.init()}}R.initClass(),R.options={},R.optionsForElement=function(t){return t.getAttribute("id")?R.options[Z(t.getAttribute("id"))]:void 0},R.instances=[],R.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),(null!=t?t.dropzone:void 0)==null)throw Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},R.discover=function(){let t;if(document.querySelectorAll)t=document.querySelectorAll(".dropzone");else{t=[];let e=e=>(()=>{let i=[];for(let n of e)/(^| )dropzone($| )/.test(n.className)?i.push(t.push(n)):i.push(void 0);return i})();e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))}return(()=>{let e=[];for(let i of t)!1!==R.optionsForElement(i)?e.push(new R(i)):e.push(void 0);return e})()},R.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],R.isBrowserSupported=function(){let t=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if("classList"in document.createElement("a")){for(let e of(void 0!==R.blacklistedBrowsers&&(R.blockedBrowsers=R.blacklistedBrowsers),R.blockedBrowsers))if(e.test(navigator.userAgent)){t=!1;continue}}else t=!1}else t=!1;return t},R.dataURItoBlob=function(t){let e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),s=new Uint8Array(n);for(let t=0,i=e.length,n=0<=i;n?t<=i:t>=i;n?t++:t--)s[t]=e.charCodeAt(t);return new Blob([n],{type:i})};let N=(t,e)=>t.filter(t=>t!==e).map(t=>t),Z=t=>t.replace(/[\-_](\w)/g,t=>t.charAt(1).toUpperCase());R.createElement=function(t){let e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]},R.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},R.getElement=function(t,e){let i;if("string"==typeof t?i=document.querySelector(t):null!=t.nodeType&&(i=t),null==i)throw Error(`Invalid \`${e}\` option provided. Please provide a CSS selector or a plain HTML element.`);return i},R.getElements=function(t,e){let i,n;if(t instanceof Array){n=[];try{for(i of t)n.push(this.getElement(i,e))}catch(t){n=null}}else if("string"==typeof t)for(i of(n=[],document.querySelectorAll(t)))n.push(i);else null!=t.nodeType&&(n=[t]);if(null==n||!n.length)throw Error(`Invalid \`${e}\` option provided. Please provide a CSS selector, a plain HTML element or a list of those.`);return n},R.confirm=function(t,e,i){return window.confirm(t)?e():null!=i?i():void 0},R.isValidFile=function(t,e){if(!e)return!0;e=e.split(",");let i=t.type,n=i.replace(/\/.*$/,"");for(let s of e)if("."===(s=s.trim()).charAt(0)){if(-1!==t.name.toLowerCase().indexOf(s.toLowerCase(),t.name.length-s.length))return!0}else if(/\/\*$/.test(s)){if(n===s.replace(/\/.*$/,""))return!0}else if(i===s)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new R(this,t)})}),R.ADDED="added",R.QUEUED="queued",R.ACCEPTED=R.QUEUED,R.UPLOADING="uploading",R.PROCESSING=R.UPLOADING,R.CANCELED="canceled",R.ERROR="error",R.SUCCESS="success";let j=function(t){t.naturalWidth;let e=t.naturalHeight,i=document.createElement("canvas");i.width=1,i.height=e;let n=i.getContext("2d");n.drawImage(t,0,0);let{data:s}=n.getImageData(1,0,1,e),o=0,r=e,a=e;for(;a>o;)0===s[(a-1)*4+3]?r=a:o=a,a=r+o>>1;let l=a/e;return 0===l?1:l};var H=function(t,e,i,n,s,o,r,a,l,h){let c=j(e);return t.drawImage(e,i,n,s,o,r,a,l,h/c)};class q{static initClass(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}static encode64(t){let e,i,n,s,o,r="",a="",l="",h=0;for(;e=t[h++],i=t[h++],a=t[h++],n=e>>2,s=(3&e)<<4|i>>4,o=(15&i)<<2|a>>6,l=63&a,isNaN(i)?o=l=64:isNaN(a)&&(l=64),r=r+this.KEY_STR.charAt(n)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(l),e=i=a="",n=s=o=l="",h<t.length;);return r}static restore(t,e){if(!t.match("data:image/jpeg;base64,"))return e;let i=this.decode64(t.replace("data:image/jpeg;base64,","")),n=this.slice2Segments(i),s=this.exifManipulation(e,n);return`data:image/jpeg;base64,${this.encode64(s)}`}static exifManipulation(t,e){let i=this.getExifArray(e);return new Uint8Array(this.insertExif(t,i))}static getExifArray(t){let e;let i=0;for(;i<t.length;){if(255===(e=t[i])[0]&225===e[1])return e;i++}return[]}static insertExif(t,e){let i=t.replace("data:image/jpeg;base64,",""),n=this.decode64(i),s=n.indexOf(255,3),o=n.slice(0,s),r=n.slice(s),a=o;return(a=a.concat(e)).concat(r)}static slice2Segments(t){let e=0,i=[];for(;;){var n;if(255===t[e]&218===t[e+1])break;if(255===t[e]&216===t[e+1])e+=2;else{n=256*t[e+2]+t[e+3];let s=e+n+2,o=t.slice(e,s);i.push(o),e=s}if(e>t.length)break}return i}static decode64(t){let e,i,n,s,o;let r="",a="",l=0,h=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(t)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");n=this.KEY_STR.indexOf(t.charAt(l++)),s=this.KEY_STR.indexOf(t.charAt(l++)),o=this.KEY_STR.indexOf(t.charAt(l++)),a=this.KEY_STR.indexOf(t.charAt(l++)),e=n<<2|s>>4,i=(15&s)<<4|o>>2,r=(3&o)<<6|a,h.push(e),64!==o&&h.push(i),64!==a&&h.push(r),e=i=r="",n=s=o=a="",l<t.length;);return h}}q.initClass();let U=window.PluginBaseClass;class W extends U{static #t=this.options={};init(){let t=new R(this.el.querySelector(".dropzone"),{url:this.options.url,params:(t,e,i)=>Object.fromEntries(Object.entries(this.options.params).filter(t=>{let[e,i]=t;return null!=i})),disablePreviews:!0,dictDefaultMessage:this.options.dictDefaultMessage}),e=this.el.querySelector(".moorl-customer-upload-image"),i=this.el.querySelector(".moorl-customer-upload-files");t.on("success",(t,n,s)=>{if(e)e.innerHTML=n;else if(i){let t=R.createElement(n.trim());document.getElementById(t.id)||i.append(t)}else window.location.reload()})}}var $=i(215),V=i.n($),G=i(564);let K=window.PluginBaseClass;class Y extends K{static #t=this.options={locations:[],mapSelector:".moorl-location-map",legendSelector:".legend",tileLayer:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',options:[],offsetTop:120,padding:5,zoom:14,cookieConsent:!1};init(){this.cookieEnabledName="moorl-location-map",this._mapElement=this.el.querySelector(this.options.mapSelector),this._legendElement=this.el.querySelector(this.options.legendSelector),this._initMap(),this._initLocations(this.options.locations),this._registerEvents()}_registerEvents(){let t=document.querySelector(".cms-element-product-listing-wrapper");if(t){let e=window.PluginManager.getPluginInstanceFromElement(t,"Listing");if(!e)return;e.$emitter.subscribe("Listing/afterRenderResponse",()=>{this._initLocationsFromListing()}),this._initLocationsFromListing()}}_initMap(){if(this.options.cookieConsent&&!O.getItem(this.cookieEnabledName)||!this._mapElement)return;let t={scrollWheelZoom:!0,dragging:!0,tap:!0};if(this.options.options&&(t.scrollWheelZoom=this.options.options.includes("scrollWheelZoom"),t.dragging=this.options.options.includes("dragging"),t.tap=this.options.options.includes("tap"),t.gestureHandling=this.options.options.includes("gestureHandling")),V().Map.addInitHook("addHandler","gestureHandling",G.GestureHandling),this._mapInstance={},this._mapInstance.layerGroup=V().layerGroup([]),this._mapInstance.map=V().map(this._mapElement,t),V().tileLayer(this.options.tileLayer,{attribution:this.options.attribution}).addTo(this._mapInstance.map),this._legendElement){let t=V().control({position:"bottomleft"});t.onAdd=t=>this._legendElement.cloneNode(!0),t.addTo(this._mapInstance.map),this._legendElement.remove()}}_initLocationsFromListing(){let t=document.querySelectorAll("ul.js-listing-wrapper > li"),e=[];t&&t.forEach(t=>{e.push(JSON.parse(t.dataset.entityLocation)),t.addEventListener("click",()=>{this._focusItem(t.dataset.entityId)})}),this._initLocations(e)}_initLocations(t){let e=[];for(let i of t){if(i.radius){let t=V().circle(i.latlng,i.radius);e.push(t);continue}let t={};i.entityId&&(t.entityId=i.entityId),i.icon&&(t.icon=this._getIcon(i.icon));let n=V().marker(i.latlng,t);if(i.popup){let t={autoPan:!1,autoClose:!0};this.options.options&&(t.autoPan=this.options.options.includes("autoPan"),t.autoClose=this.options.options.includes("autoClose")),n.bindPopup(i.popup,t).on("click",()=>{this._focusItem(i.entityId)}).on("popupclose",()=>{this.options.options&&this.options.options.includes("fitBounds")&&this._fitBounds()})}e.push(n)}this._mapInstance&&(this._mapInstance.layerGroup&&this._mapInstance.layerGroup.clearLayers(),this._mapInstance.layerGroup=V().featureGroup(e).addTo(this._mapInstance.map),this._fitBounds())}_fitBounds(){this._mapInstance.map.fitBounds(this._mapInstance.layerGroup.getBounds(),{padding:[this.options.padding,this.options.padding]}),this._updateListingElements(null)}_focusItem(t){this._mapInstance.layerGroup.eachLayer(e=>{e.options.entityId===t&&(e.getPopup().isOpen()||e.openPopup(),this.options.options&&this.options.options.includes("flyTo")&&this._mapInstance.map.flyTo(e.getLatLng(),this.options.zoom,{animate:!0,duration:1}))}),this._updateListingElements(t)}_updateListingElements(t){let e=document.querySelectorAll("ul.js-listing-wrapper > li");e&&e.forEach(e=>{if(e.classList.remove("is-active"),e.classList.remove("shadow"),e.dataset.entityId===t&&(e.classList.add("is-active"),e.classList.add("shadow"),this.options.options&&this.options.options.includes("scrollTo"))){let t=e.getBoundingClientRect().top+window.scrollY-this.options.offsetTop;window.scrollTo({top:t,behavior:"smooth"})}})}_getIcon(t){if(!t.svg)return V().icon(t);{let e={iconSize:[40,60],iconAnchor:[20,60],popupAnchor:[0,-40],className:t.className,html:`<div class="marker-pin"></div>${t.svg}`};return V().divIcon(e)}}}let X=window.PluginBaseClass;class Q extends X{static #t=this.options={url:null,toggle:!1,title:"",placement:"top",animation:!1};init(){this._popover=new bootstrap.Popover(this.el,{html:!0,sanitize:!1,animation:this.options.animation,content:"",title:this.options.title,placement:this.options.placement}),this._loaded=!1,this._scheduled=null,this._isMouseOverPopover=!1,this._registerEvents()}_registerEvents(){if(this.options.toggle){this.el.addEventListener("click",t=>{t.preventDefault(),this._togglePopover()});return}this.el.addEventListener("mouseenter",()=>this._showPopover()),this.el.addEventListener("mouseleave",()=>this._scheduleHidePopover())}_togglePopover(){this._loaded?(this._popover.toggle(),window.PluginManager.initializePlugins()):fetch(this.options.url).then(t=>t.text()).then(t=>{this._popover.setContent({".popover-body":t}),this._popover.show(),window.PluginManager.initializePlugins(),this._loaded=!0})}_showPopover(){if(this._scheduled){clearTimeout(this._scheduled),this._scheduled=null;return}this._loaded?(this._popover.show(),this._attachPopoverEvents()):fetch(this.options.url).then(t=>t.text()).then(t=>{this._popover.setContent({".popover-body":t}),this._popover.show(),this._loaded=!0,this._attachPopoverEvents()})}_scheduleHidePopover(){this._scheduled||(this._scheduled=setTimeout(()=>{this._isMouseOverPopover||(this._popover.hide(),this._scheduled=null)},200))}_attachPopoverEvents(){window.PluginManager.initializePlugins(),setTimeout(()=>{let t=this._popover.tip;t&&(t.addEventListener("mouseenter",()=>{clearTimeout(this._scheduled),this._scheduled=null,this._isMouseOverPopover=!0}),t.addEventListener("mouseleave",()=>{this._isMouseOverPopover=!1,this._scheduleHidePopover()}))},50)}}let J="js-offcanvas-singleton";class tt{constructor(){this.$emitter=new T}open(t,e,i,n,s,o,r){this._removeExistingOffCanvas();let a=this._createOffCanvas(i,o,r,n);this.setContent(t,s),this._openOffcanvas(a,e)}setContent(t,e){let i=this.getOffCanvas();i[0]&&(i[0].innerHTML=t,this._registerEvents(e),this._setAriaAttrs())}setAdditionalClassName(t){this.getOffCanvas()[0].classList.add(t)}getOffCanvas(){return document.querySelectorAll(`.${J}`)}close(t){let e=this.getOffCanvas();e.forEach(t=>{bootstrap.Offcanvas.getInstance(t).hide()}),setTimeout(()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:e})},t)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(t,e){window.focusHandler.saveFocusState("offcanvas"),tt.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof e&&e()}_registerEvents(t){let e=this.getOffCanvas();e.forEach(i=>{let n=()=>{setTimeout(()=>{i.remove(),window.focusHandler.resumeFocusState("offcanvas"),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:e})},t),i.removeEventListener("hide.bs.offcanvas",n)};i.addEventListener("hide.bs.offcanvas",n)}),window.addEventListener("popstate",this.close.bind(this,t),{once:!0}),document.querySelectorAll(".js-offcanvas-close").forEach(e=>e.addEventListener("click",this.close.bind(this,t)))}_setAriaAttrs(){let t=this.getOffCanvas()[0],e="off-canvas-headline",i=t.querySelector(`[data-id="${e}"]`);i&&!t.hasAttribute("aria-labelledby")&&(i.setAttribute("id",e),t.setAttribute("aria-labelledby",e))}_removeExistingOffCanvas(){return tt.bsOffcanvas=null,this.getOffCanvas().forEach(t=>t.remove())}_getPositionClass(t){return"left"===t?"offcanvas-start":"right"===t?"offcanvas-end":`offcanvas-${t}`}_createOffCanvas(t,e,i,n){let s=document.createElement("div");if(s.classList.add("offcanvas",J),s.classList.add(this._getPositionClass(t)),s.setAttribute("tabindex","-1"),!0===e&&s.classList.add("is-fullwidth"),i){let t=typeof i;if("string"===t)s.classList.add(i);else if(Array.isArray(i))i.forEach(t=>{s.classList.add(t)});else throw Error(`The type "${t}" is not supported. Please pass an array or a string.`)}return document.body.appendChild(s),tt.bsOffcanvas=new bootstrap.Offcanvas(s,{backdrop:!1!==n||"static"}),s}}let te=Object.freeze(new tt);class ti{static open(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";te.open(t,e,i,n,s,o,r)}static setContent(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;te.setContent(t,e,i)}static setAdditionalClassName(t){te.setAdditionalClassName(t)}static close(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:350;te.close(t)}static exists(){return te.exists()}static getOffCanvas(){return te.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return 350}}let tn="loader",ts={BEFORE:"before",INNER:"inner"};class to{constructor(t,e=ts.BEFORE){this.parent=t instanceof Element?t:document.body.querySelector(t),this.position=e}create(){if(!this.exists()){if(this.position===ts.INNER){this._previousHTML=this.parent.innerHTML,this.parent.innerHTML=to.getTemplate();return}this.parent.insertAdjacentHTML(this._getPosition(),to.getTemplate())}}remove(){if(this.position===ts.INNER){this.parent.innerHTML=this._previousHTML;return}this.parent.querySelectorAll(`.${tn}`).forEach(t=>t.remove())}exists(){return this.parent.querySelectorAll(`.${tn}`).length>0}_getPosition(){return this.position===ts.BEFORE?"afterbegin":"beforeend"}static getTemplate(){return`<div class="${tn}" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>`}static SELECTOR_CLASS(){return tn}}class tr extends ti{static open(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",s=!(arguments.length>4)||void 0===arguments[4]||arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ti.REMOVE_OFF_CANVAS_DELAY(),r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";if(!t)throw Error("A url must be given!");te._removeExistingOffCanvas();let l=te._createOffCanvas(n,r,a,s);this.setContent(t,e,i,s,o),te._openOffcanvas(l)}static setContent(t,e,i,n,s){super.setContent(`<div class="offcanvas-body">${to.getTemplate()}</div>`,n,s);let o=t=>{super.setContent(t,n,s),"function"==typeof i&&i(t)};e?fetch(t,{method:"POST",body:e instanceof FormData?e:JSON.stringify(e),headers:{"X-Requested-With":"XMLHttpRequest"}}).then(t=>t.text()).then(t=>tr.executeCallback(o,t)):fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(t=>t.text()).then(t=>tr.executeCallback(o,t))}static executeCallback(t,e){"function"==typeof t&&t(e),window.PluginManager.initializePlugins()}}let ta="element-loader-backdrop";class tl extends to{static create(t){t.classList.add("has-element-loader"),tl.exists(t)||(tl.appendLoader(t),setTimeout(()=>{let e=t.querySelector(`.${ta}`);e&&e.classList.add("element-loader-backdrop-open")},1))}static remove(t){t.classList.remove("has-element-loader");let e=t.querySelector(`.${ta}`);e&&e.remove()}static exists(t){return t.querySelectorAll(`.${ta}`).length>0}static getTemplate(){return`
        <div class="${ta}">
            <div class="loader" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        `}static appendLoader(t){t.insertAdjacentHTML("beforeend",tl.getTemplate())}}let th="CookieConfiguration_Update";class tc extends S{static #t=this.options={offCanvasPosition:"left",submitEvent:"click",cookiePreference:"cookie-preference",cookieSelector:"[data-cookie]",buttonOpenSelector:".js-cookie-configuration-button button",buttonSubmitSelector:".js-offcanvas-cookie-submit",buttonAcceptAllSelector:".js-offcanvas-cookie-accept-all",globalButtonAcceptAllSelector:".js-cookie-accept-all-button",parentInputSelector:".offcanvas-cookie-parent-input",customLinkSelector:`[href="${window.router["frontend.cookie.offcanvas"]}"]`,entriesActiveClass:"offcanvas-cookie-entries--active",entriesClass:"offcanvas-cookie-entries",groupClass:"offcanvas-cookie-group",parentInputClass:"offcanvas-cookie-parent-input"};init(){this.lastState={active:[],inactive:[]},this._httpClient=new n,this._registerEvents()}_registerEvents(){let{submitEvent:t,buttonOpenSelector:e,customLinkSelector:i,globalButtonAcceptAllSelector:n}=this.options;Array.from(document.querySelectorAll(e)).forEach(e=>{e.addEventListener(t,this.openOffCanvas.bind(this))}),Array.from(document.querySelectorAll(i)).forEach(e=>{e.addEventListener(t,this._handleCustomLink.bind(this))}),Array.from(document.querySelectorAll(n)).forEach(e=>{e.addEventListener(t,this._acceptAllCookiesFromCookieBar.bind(this))})}_registerOffCanvasEvents(){let{submitEvent:t,buttonSubmitSelector:e,buttonAcceptAllSelector:i}=this.options,n=this._getOffCanvas();if(n){let s=n.querySelector(e),o=n.querySelector(i),r=Array.from(n.querySelectorAll('input[type="checkbox"]'));s&&s.addEventListener(t,this._handleSubmit.bind(this,O)),o&&o.addEventListener(t,this._acceptAllCookiesFromOffCanvas.bind(this,O)),r.forEach(e=>{e.addEventListener(t,this._handleCheckbox.bind(this))})}}_handleCustomLink(t){t.preventDefault(),this.openOffCanvas()}_handleUpdateListener(t,e){let i=this._getUpdatedCookies(t,e);document.$emitter.publish(th,i)}_getUpdatedCookies(t,e){let{lastState:i}=this,n={};return t.forEach(t=>{i.inactive.includes(t)&&(n[t]=!0)}),e.forEach(t=>{i.active.includes(t)&&(n[t]=!1)}),n}openOffCanvas(t){let{offCanvasPosition:e}=this.options,i=window.router["frontend.cookie.offcanvas"];this._hideCookieBar(),tr.open(i,!1,this._onOffCanvasOpened.bind(this,t),e)}closeOffCanvas(t){tr.close(),"function"==typeof t&&t()}_onOffCanvasOpened(t){this._registerOffCanvasEvents(),this._setInitialState(),this._setInitialOffcanvasState(),PluginManager.initializePlugins(),"function"==typeof t&&t()}_hideCookieBar(){let t=PluginManager.getPluginInstances("CookiePermission");t&&t[0]&&(t[0]._hideCookieBar(),t[0]._removeBodyPadding())}_setInitialState(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t||this._getCookies("all"),i=[],n=[];e.forEach(t=>{let{cookie:e,required:s}=t;O.getItem(e)||s?i.push(e):n.push(e)}),this.lastState={active:i,inactive:n}}_setInitialOffcanvasState(){let t=this.lastState.active,e=this._getOffCanvas();t.forEach(t=>{let i=e.querySelector(`[data-cookie="${t}"]`);i.checked=!0,this._childCheckboxEvent(i)})}_handleCheckbox(t){let{parentInputClass:e}=this.options,{target:i}=t;(i.classList.contains(e)?this._parentCheckboxEvent:this._childCheckboxEvent).call(this,i)}_findParentEl(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(;t&&!t.classList.contains(i);){if(t.classList.contains(e))return t;t=t.parentElement}return null}_isChecked(t){return!!t.checked}_parentCheckboxEvent(t){let{groupClass:e}=this.options,i=this._isChecked(t),n=this._findParentEl(t,e);this._toggleWholeGroup(i,n)}_childCheckboxEvent(t){let{groupClass:e}=this.options,i=this._isChecked(t),n=this._findParentEl(t,e);this._toggleParentCheckbox(i,n)}_toggleWholeGroup(t,e){Array.from(e.querySelectorAll("input")).forEach(e=>{e.checked=t})}_toggleParentCheckbox(t,e){let{parentInputSelector:i}=this.options,n=Array.from(e.querySelectorAll(`input:not(${i})`)),s=Array.from(e.querySelectorAll(`input:not(${i}):checked`));if(n.length>0){let t=e.querySelector(i);if(t){let e=s.length>0,i=e&&s.length!==n.length;t.checked=e,t.indeterminate=i}}}_handleSubmit(){let t=this._getCookies("active"),e=this._getCookies("inactive"),{cookiePreference:i}=this.options,n=[],s=[];e.forEach(t=>{let{cookie:e}=t;s.push(e),O.getItem(e)&&O.removeItem(e)}),t.forEach(t=>{let{cookie:e,value:i,expiration:s}=t;n.push(e),e&&i&&O.setItem(e,i,s)}),O.setItem(i,"1","30"),this._handleUpdateListener(n,s),this.closeOffCanvas(document.$emitter.publish("CookieConfiguration_CloseOffCanvas"))}acceptAllCookies(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t){this._handleAcceptAll(),this.closeOffCanvas();return}tl.create(this.el),fetch(window.router["frontend.cookie.offcanvas"],{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(t=>t.text()).then(t=>{let e=new DOMParser().parseFromString(t,"text/html");this._handleAcceptAll(e),tl.remove(this.el),this._hideCookieBar()})}_acceptAllCookiesFromCookieBar(){return this.acceptAllCookies(!0)}_acceptAllCookiesFromOffCanvas(){return this.acceptAllCookies()}_handleAcceptAll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this._getCookies("all",t);this._setInitialState(e);let{cookiePreference:i}=this.options;e.forEach(t=>{let{cookie:e,value:i,expiration:n}=t;e&&i&&O.setItem(e,i,n)}),O.setItem(i,"1","30"),this._handleUpdateListener(e.map(t=>{let{cookie:e}=t;return e}),[])}_getCookies(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{cookieSelector:i}=this.options;return e||(e=this._getOffCanvas()),Array.from(e.querySelectorAll(i)).filter(e=>{switch(t){case"all":return!0;case"active":return this._isChecked(e);case"inactive":return!this._isChecked(e);default:return!1}}).map(t=>{let{cookie:e,cookieValue:i,cookieExpiration:n,cookieRequired:s}=t.dataset;return{cookie:e,value:i,expiration:n,required:s}})}_getOffCanvas(){let t=ti?ti.getOffCanvas():[];return!!t&&t.length>0&&t[0]}}let tu=window.PluginBaseClass;class td extends tu{static #t=this.options={cookieKey:null,content:null,reload:!0};init(){this._acceptButton=this.el.querySelector(".js-moorl-cookie-box-button button"),this._registerEvents(),this._toggle()}_registerEvents(){document.$emitter.subscribe(th,t=>{this._toggle()}),this._acceptButton.addEventListener("click",t=>{if(O.setItem(this.options.cookieKey,"1","30"),this.options.reload){window.location.reload();return}document.$emitter.publish(th,{"${this.options.cookieKey}":!0}),this.el.style.display="none"})}_toggle(){O.getItem(this.options.cookieKey)?this.options.content?(this.el.parentElement.innerHTML=this.options.content,window.PluginManager.initializePlugins()):this.el.style.display="none":this.el.style.display="flex"}}let tp=window.PluginBaseClass,tm=window.PluginBaseClass;class t_ extends tm{static #t=this.options={inputElId:null,type:null};init(){this.options.inputElId&&(this._inputEl=document.getElementById(this.options.inputElId),this._inputEl)&&(this._maxLength=parseInt(this._inputEl.maxLength),this._minLength=parseInt(this._inputEl.minLength),this._maxLength&&("progress-bar"===this.options.type&&(this._progressBarEl=this.el.querySelector(".progress-bar")),this._writeCurrent(),setTimeout(()=>{this._writeCurrent()},1e3),this._registerEvents()))}_registerEvents(){["oninput","keyup","change"].forEach(t=>{this._inputEl.addEventListener(t,()=>{this._writeCurrent()})})}_writeCurrent(){this._currentLength=parseInt(this._inputEl.value.length),"progress-bar"===this.options.type?(this._currentPercentage=Math.ceil(this._currentLength/this._maxLength*100),this._currentPercentage>=100?(this._progressBarEl.classList.remove("bg-success"),this._progressBarEl.classList.remove("bg-warning"),this._progressBarEl.classList.add("bg-danger")):this._currentPercentage>=90?(this._progressBarEl.classList.remove("bg-success"),this._progressBarEl.classList.remove("bg-danger"),this._progressBarEl.classList.add("bg-warning")):(this._progressBarEl.classList.remove("bg-danger"),this._progressBarEl.classList.remove("bg-warning"),this._progressBarEl.classList.add("bg-success")),this._progressBarEl.style.width=`${this._currentPercentage}%`,this._progressBarEl.innerText=`${this._currentLength}/${this._maxLength}`):this.el.innerText=`${this._currentLength}/${this._maxLength}`}}let tf=window.PluginBaseClass;class tg extends tf{static #t=this.options={};init(){this._registerEvents()}_registerEvents(){this.el.addEventListener("click",()=>{try{navigator.clipboard.writeText(this.el.innerText).then(()=>{this.el.classList.add("success"),setTimeout(()=>{this.el.classList.remove("success")},1e3)})}catch(t){console.error("Failed to copy: ",t)}})}}function tv(t,e){t.split(/\s+/).forEach(t=>{e(t)})}class ty{constructor(){this._events={}}on(t,e){tv(t,t=>{let i=this._events[t]||[];i.push(e),this._events[t]=i})}off(t,e){var i=arguments.length;if(0===i){this._events={};return}tv(t,t=>{if(1===i){delete this._events[t];return}let n=this._events[t];void 0!==n&&(n.splice(n.indexOf(e),1),this._events[t]=n)})}trigger(t,...e){var i=this;tv(t,t=>{let n=i._events[t];void 0!==n&&n.forEach(t=>{t.apply(i,e)})})}}function tb(t){return t.plugins={},class extends t{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(e,i){t.plugins[e]={name:e,fn:i}}initializePlugins(t){var e,i;let n=this,s=[];if(Array.isArray(t))t.forEach(t=>{"string"==typeof t?s.push(t):(n.plugins.settings[t.name]=t.options,s.push(t.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(n.plugins.settings[e]=t[e],s.push(e));for(;i=s.shift();)n.require(i)}loadPlugin(e){var i=this.plugins,n=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=n.fn.apply(this,[this.plugins.settings[e]||{}]),i.names.push(e)}require(t){var e=this.plugins;if(!this.plugins.loaded.hasOwnProperty(t)){if(e.requested[t])throw Error('Plugin has circular dependency ("'+t+'")');this.loadPlugin(t)}return e.loaded[t]}}}let tw=t=>(t=t.filter(Boolean)).length<2?t[0]||"":1==tP(t)?"["+t.join("")+"]":"(?:"+t.join("|")+")",tx=t=>{if(!tE(t))return t.join("");let e="",i=0,n=()=>{i>1&&(e+="{"+i+"}")};return t.forEach((s,o)=>{if(s===t[o-1]){i++;return}n(),e+=s,i=1}),n(),e},tL=t=>tw(Array.from(t)),tE=t=>new Set(t).size!==t.length,tC=t=>(t+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),tP=t=>t.reduce((t,e)=>Math.max(t,tk(e)),0),tk=t=>Array.from(t).length,tT=t=>{if(1===t.length)return[[t]];let e=[];return tT(t.substring(1)).forEach(function(i){let n=i.slice(0);n[0]=t.charAt(0)+n[0],e.push(n),(n=i.slice(0)).unshift(t.charAt(0)),e.push(n)}),e},tS=[[0,65535]],tM={},tO={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let t in tO){let e=tO[t]||"";for(let i=0;i<e.length;i++)tM[e.substring(i,i+1)]=t}let tA=RegExp(Object.keys(tM).join("|")+"|[̀-ͯ·ʾʼ]","gu"),tz=e=>{void 0===t&&(t=tR(e||tS))},tI=(t,e="NFKD")=>t.normalize(e),tF=t=>Array.from(t).reduce((t,e)=>t+tB(e),""),tB=t=>(t=tI(t).toLowerCase().replace(tA,t=>tM[t]||""),tI(t,"NFC")),tD=t=>{let e={},i=(t,i)=>{let n=e[t]||new Set,s=RegExp("^"+tL(n)+"$","iu");i.match(s)||(n.add(tC(i)),e[t]=n)};for(let e of function*(t){for(let[e,i]of t)for(let t=e;t<=i;t++){let e=String.fromCharCode(t),i=tF(e);i==e.toLowerCase()||i.length>3||0==i.length||(yield{folded:i,composed:e,code_point:t})}}(t))i(e.folded,e.folded),i(e.folded,e.composed);return e},tR=t=>{let i=tD(t),n={},s=[];for(let t in i){let e=i[t];e&&(n[t]=tL(e)),t.length>1&&s.push(tC(t))}return s.sort((t,e)=>e.length-t.length),e=RegExp("^"+tw(s),"u"),n},tN=(e,i=1)=>{let n=0;return(e=e.map(e=>(t[e]&&(n+=e.length),t[e]||e)),n>=i)?tx(e):""},tZ=(t,e=1)=>(e=Math.max(e,t.length-1),tw(tT(t).map(t=>tN(t,e)))),tj=(t,e=!0)=>{let i=+(t.length>1);return tw(t.map(t=>{let n=[],s=e?t.length():t.length()-1;for(let e=0;e<s;e++)n.push(tZ(t.substrs[e]||"",i));return tx(n)}))},tH=(t,e)=>{for(let i of e){if(i.start!=t.start||i.end!=t.end||i.substrs.join("")!==t.substrs.join(""))continue;let e=t.parts,n=t=>{for(let i of e){if(i.start===t.start&&i.substr===t.substr)break;if(1!=t.length&&1!=i.length&&(t.start<i.start&&t.end>i.start||i.start<t.start&&i.end>t.start))return!0}return!1};if(!(i.parts.filter(n).length>0))return!0}return!1};class tq{parts;substrs;start;end;constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let i=new tq,n=JSON.parse(JSON.stringify(this.parts)),s=n.pop();for(let t of n)i.add(t);let o=e.substr.substring(0,t-s.start),r=o.length;return i.add({start:s.start,end:s.start+r,length:r,substr:o}),i}}let tU=t=>{tz(),t=tF(t);let i="",n=[new tq];for(let s=0;s<t.length;s++){let o=t.substring(s).match(e),r=t.substring(s,s+1),a=o?o[0]:null,l=[],h=new Set;for(let t of n){let e=t.last();if(!e||1==e.length||e.end<=s){if(a){let e=a.length;t.add({start:s,end:s+e,length:e,substr:a}),h.add("1")}else t.add({start:s,end:s+1,length:1,substr:r}),h.add("2")}else if(a){let i=t.clone(s,e),n=a.length;i.add({start:s,end:s+n,length:n,substr:a}),l.push(i)}else h.add("3")}if(l.length>0){for(let t of l=l.sort((t,e)=>t.length()-e.length()))tH(t,n)||n.push(t);continue}if(s>0&&1==h.size&&!h.has("3")){i+=tj(n,!1);let t=new tq,e=n[0];e&&t.add(e.last()),n=[t]}}return i+tj(n,!0)},tW=(t,e)=>{if(t)return t[e]},t$=(t,e)=>{if(t){for(var i,n=e.split(".");(i=n.shift())&&(t=t[i]););return t}},tV=(t,e,i)=>{var n,s;return t?(t+="",null==e.regex||-1===(s=t.search(e.regex)))?0:(n=e.string.length/t.length,0===s&&(n+=.5),n*i):0},tG=(t,e)=>{var i=t[e];if("function"==typeof i)return i;i&&!Array.isArray(i)&&(t[e]=[i])},tK=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},tY=(t,e)=>"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=tF(t+"").toLowerCase())>(e=tF(e+"").toLowerCase())?1:e>t?-1:0;class tX{items;settings;constructor(t,e){this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){var n;if(!t||!t.length)return[];let s=[],o=t.split(/\s+/);return i&&(n=RegExp("^("+Object.keys(i).map(tC).join("|")+"):(.*)$")),o.forEach(t=>{let i;let o=null,r=null;n&&(i=t.match(n))&&(o=i[1],t=i[2]),t.length>0&&(r=this.settings.diacritics?tU(t)||null:tC(t))&&e&&(r="\\b"+r),s.push({string:t,regex:r?RegExp(r,"iu"):null,field:o})}),s}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){let e=t.tokens,i=e.length;if(!i)return function(){return 0};let n=t.options.fields,s=t.weights,o=n.length,r=t.getAttrFn;if(!o)return function(){return 1};let a=1===o?function(t,e){let i=n[0].field;return tV(r(e,i),t,s[i]||1)}:function(t,e){var i=0;if(t.field){let n=r(e,t.field);!t.regex&&n?i+=1/o:i+=tV(n,t,1)}else tK(s,(n,s)=>{i+=tV(r(e,s),t,n)});return i/o};return 1===i?function(t){return a(e[0],t)}:"and"===t.options.conjunction?function(t){var n,s=0;for(let i of e){if((n=a(i,t))<=0)return 0;s+=n}return s/i}:function(t){var n=0;return tK(e,e=>{n+=a(e,t)}),n/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i=[];let n=this,s=t.options,o=!t.query&&s.sort_empty?s.sort_empty:s.sort;if("function"==typeof o)return o.bind(this);let r=function(e,i){return"$score"===e?i.score:t.getAttrFn(n.items[i.id],e)};if(o)for(let e of o)(t.query||"$score"!==e.field)&&i.push(e);if(t.query){for(let t of(e=!0,i))if("$score"===t.field){e=!1;break}e&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(t=>"$score"!==t.field);return i.length?function(t,e){var n,s;for(let o of i)if(s=o.field,n=("desc"===o.direction?-1:1)*tY(r(s,t),r(s,e)))return n;return 0}:null}prepareSearch(t,e){let i={};var n=Object.assign({},e);if(tG(n,"sort"),tG(n,"sort_empty"),n.fields){tG(n,"fields");let t=[];n.fields.forEach(e=>{"string"==typeof e&&(e={field:e,weight:1}),t.push(e),i[e.field]="weight"in e?e.weight:1}),n.fields=t}return{options:n,query:t.toLowerCase().trim(),tokens:this.tokenize(t,n.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:n.nesting?t$:tW}}search(t,e){var i,n;e=(n=this.prepareSearch(t,e)).options,t=n.query;let s=e.score||this._getScoreFunction(n);t.length?tK(this.items,(t,o)=>{i=s(t),(!1===e.filter||i>0)&&n.items.push({score:i,id:o})}):tK(this.items,(t,e)=>{n.items.push({score:1,id:e})});let o=this._getSortFunction(n);return o&&n.items.sort(o),n.total=n.items.length,"number"==typeof e.limit&&(n.items=n.items.slice(0,e.limit)),n}}let tQ=t=>null==t?null:tJ(t),tJ=t=>"boolean"==typeof t?t?"1":"0":t+"",t0=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),t1=(t,e)=>e>0?window.setTimeout(t,e):(t.call(null),null),t2=(t,e)=>{var i;return function(n,s){var o=this;i&&(o.loading=Math.max(o.loading-1,0),clearTimeout(i)),i=setTimeout(function(){i=null,o.loadedSearches[n]=!0,t.call(o,n,s)},e)}},t3=(t,e,i)=>{var n,s=t.trigger,o={};for(n of(t.trigger=function(){var i=arguments[0];if(-1===e.indexOf(i))return s.apply(t,arguments);o[i]=arguments},i.apply(t,[]),t.trigger=s,e))n in o&&s.apply(t,o[n])},t6=t=>({start:t.selectionStart||0,length:(t.selectionEnd||0)-(t.selectionStart||0)}),t4=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},t9=(t,e,i,n)=>{t.addEventListener(e,i,n)},t5=(t,e)=>!!e&&!!e[t]&&1==+!!e.altKey+ +!!e.ctrlKey+ +!!e.shiftKey+ +!!e.metaKey,t7=(t,e)=>t.getAttribute("id")||(t.setAttribute("id",e),e),t8=t=>t.replace(/[\\"']/g,"\\$&"),et=(t,e)=>{e&&t.append(e)},ee=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},ei=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(en(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},en=t=>!!("string"==typeof t&&t.indexOf("<")>-1),es=t=>t.replace(/['"\\]/g,"\\$&"),eo=(t,e)=>{var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!1),t.dispatchEvent(i)},er=(t,e)=>{Object.assign(t.style,e)},ea=(t,...e)=>{var i=eh(e);(t=ec(t)).map(t=>{i.map(e=>{t.classList.add(e)})})},el=(t,...e)=>{var i=eh(e);(t=ec(t)).map(t=>{i.map(e=>{t.classList.remove(e)})})},eh=t=>{var e=[];return ee(t,t=>{"string"==typeof t&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},ec=t=>(Array.isArray(t)||(t=[t]),t),eu=(t,e,i)=>{if(!i||i.contains(t))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}},ed=(t,e=0)=>e>0?t[t.length-1]:t[0],ep=t=>0===Object.keys(t).length,em=(t,e)=>{if(!t)return -1;e=e||t.nodeName;for(var i=0;t=t.previousElementSibling;)t.matches(e)&&i++;return i},e_=(t,e)=>{ee(e,(e,i)=>{null==e?t.removeAttribute(i):t.setAttribute(i,""+e)})},ef=(t,e)=>{t.parentNode&&t.parentNode.replaceChild(e,t)},eg=(t,e)=>{if(null===e)return;if("string"==typeof e){if(!e.length)return;e=RegExp(e,"i")}let i=t=>{var i=t.data.match(e);if(i&&t.data.length>0){var n=document.createElement("span");n.className="highlight";var s=t.splitText(i.index);s.splitText(i[0].length);var o=s.cloneNode(!0);return n.appendChild(o),ef(s,n),1}return 0},n=t=>{1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&("highlight"!==t.className||"SPAN"!==t.tagName)&&Array.from(t.childNodes).forEach(t=>{s(t)})},s=t=>3===t.nodeType?i(t):(n(t),0);s(t)},ev=t=>{var e=t.querySelectorAll("span.highlight");Array.prototype.forEach.call(e,function(t){var e=t.parentNode;e.replaceChild(t.firstChild,t),e.normalize()})},ey="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey",eb={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(t){return t.length>0},render:{}};function ew(t,e){var i,n,s,o,r,a,l,h=Object.assign({},eb,e),c=h.dataAttr,u=h.labelField,d=h.valueField,p=h.disabledField,m=h.optgroupField,_=h.optgroupLabelField,f=h.optgroupValueField,g=t.tagName.toLowerCase(),v=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!v&&!h.allowEmptyOption){let e=t.querySelector('option[value=""]');e&&(v=e.textContent)}var y={placeholder:v,options:[],optgroups:[],items:[],maxItems:null};if("select"===g){let e;n=y.options,s={},o=1,e=0,r=t=>{var e=Object.assign({},t.dataset),i=c&&e[c];return"string"==typeof i&&i.length&&(e=Object.assign(e,JSON.parse(i))),e},a=(t,i)=>{var o=tQ(t.value);if(null!=o&&(o||h.allowEmptyOption)){if(s.hasOwnProperty(o)){if(i){var a=s[o][m];a?Array.isArray(a)?a.push(i):s[o][m]=[a,i]:s[o][m]=i}}else{var l=r(t);l[u]=l[u]||t.textContent,l[d]=l[d]||o,l[p]=l[p]||t.disabled,l[m]=l[m]||i,l.$option=t,l.$order=l.$order||++e,s[o]=l,n.push(l)}t.selected&&y.items.push(o)}},l=t=>{var i,n;(n=r(t))[_]=n[_]||t.getAttribute("label")||"",n[f]=n[f]||o++,n[p]=n[p]||t.disabled,n.$order=n.$order||++e,y.optgroups.push(n),i=n[f],ee(t.children,t=>{a(t,i)})},y.maxItems=t.hasAttribute("multiple")?null:1,ee(t.children,t=>{"optgroup"===(i=t.tagName.toLowerCase())?l(t):"option"===i&&a(t)})}else(()=>{let e=t.getAttribute(c);if(e)y.options=JSON.parse(e),ee(y.options,t=>{y.items.push(t[d])});else{var i=t.value.trim()||"";if(!h.allowEmptyOption&&!i.length)return;let e=i.split(h.delimiter);ee(e,t=>{let e={};e[u]=t,e[d]=t,y.options.push(e)}),y.items=e}})();return Object.assign({},eb,y,e)}var ex=0;class eL extends tb(ty){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,ex++;var i,n,s=ei(t);if(s.tomselect)throw Error("Tom Select already initialized on this element");s.tomselect=this,i=(window.getComputedStyle&&window.getComputedStyle(s,null)).getPropertyValue("direction");let o=ew(s,e);this.settings=o,this.input=s,this.tabIndex=s.tabIndex||0,this.is_select_tag="select"===s.tagName.toLowerCase(),this.rtl=/rtl/i.test(i),this.inputId=t7(s,"tomselect-"+ex),this.isRequired=s.required,this.sifter=new tX(this.options,{diacritics:o.diacritics}),o.mode=o.mode||(1===o.maxItems?"single":"multi"),"boolean"!=typeof o.hideSelected&&(o.hideSelected="multi"===o.mode),"boolean"!=typeof o.hidePlaceholder&&(o.hidePlaceholder="multi"!==o.mode);var r=o.createFilter;"function"!=typeof r&&("string"==typeof r&&(r=new RegExp(r)),r instanceof RegExp?o.createFilter=t=>r.test(t):o.createFilter=t=>this.settings.duplicates||!this.options[t]),this.initializePlugins(o.plugins),this.setupCallbacks(),this.setupTemplates();let a=ei("<div>"),l=ei("<div>"),h=this._render("dropdown"),c=ei('<div role="listbox" tabindex="-1">'),u=this.input.getAttribute("class")||"",d=o.mode;(ea(a,o.wrapperClass,u,d),ea(l,o.controlClass),et(a,l),ea(h,o.dropdownClass,d),o.copyClassesToDropdown&&ea(h,u),ea(c,o.dropdownContentClass),et(h,c),ei(o.dropdownParent||a).appendChild(h),en(o.controlInput))?(n=ei(o.controlInput),ee(["autocorrect","autocapitalize","autocomplete","spellcheck"],t=>{s.getAttribute(t)&&e_(n,{[t]:s.getAttribute(t)})}),n.tabIndex=-1,l.appendChild(n),this.focus_node=n):o.controlInput?(n=ei(o.controlInput),this.focus_node=n):(n=ei("<input/>"),this.focus_node=l),this.wrapper=a,this.dropdown=h,this.dropdown_content=c,this.control=l,this.control_input=n,this.setup()}setup(){let t=this,e=t.settings,i=t.control_input,n=t.dropdown,s=t.dropdown_content,o=t.wrapper,r=t.control,a=t.input,l=t.focus_node,h={passive:!0},c=t.inputId+"-ts-dropdown";e_(s,{id:c}),e_(l,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":c});let u=t7(l,t.inputId+"-ts-control"),d="label[for='"+es(t.inputId)+"']",p=document.querySelector(d),m=t.focus.bind(t);if(p){t9(p,"click",m),e_(p,{for:u});let e=t7(p,t.inputId+"-ts-label");e_(l,{"aria-labelledby":e}),e_(s,{"aria-labelledby":e})}o.style.width=a.style.width,t.plugins.names.length&&ea([o,n],"plugin-"+t.plugins.names.join(" plugin-")),(null===e.maxItems||e.maxItems>1)&&t.is_select_tag&&e_(a,{multiple:"multiple"}),e.placeholder&&e_(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=RegExp("\\s*"+tC(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=t2(e.load,e.loadThrottle)),t9(n,"mousemove",()=>{t.ignoreHover=!1}),t9(n,"mouseenter",e=>{var i=eu(e.target,"[data-selectable]",n);i&&t.onOptionHover(e,i)},{capture:!0}),t9(n,"click",e=>{let i=eu(e.target,"[data-selectable]");i&&(t.onOptionSelect(e,i),t4(e,!0))}),t9(r,"click",e=>{var n=eu(e.target,"[data-ts-item]",r);if(n&&t.onItemSelect(e,n)){t4(e,!0);return}""==i.value&&(t.onClick(),t4(e,!0))}),t9(l,"keydown",e=>t.onKeyDown(e)),t9(i,"keypress",e=>t.onKeyPress(e)),t9(i,"input",e=>t.onInput(e)),t9(l,"blur",e=>t.onBlur(e)),t9(l,"focus",e=>t.onFocus(e)),t9(i,"paste",e=>t.onPaste(e));let _=e=>{let s=e.composedPath()[0];if(!o.contains(s)&&!n.contains(s)){t.isFocused&&t.blur(),t.inputState();return}s==i&&t.isOpen?e.stopPropagation():t4(e,!0)},f=()=>{t.isOpen&&t.positionDropdown()};t9(document,"mousedown",_),t9(window,"scroll",f,h),t9(window,"resize",f,h),this._destroy=()=>{document.removeEventListener("mousedown",_),window.removeEventListener("scroll",f),window.removeEventListener("resize",f),p&&p.removeEventListener("click",m)},this.revertSettings={innerHTML:a.innerHTML,tabIndex:a.tabIndex},a.tabIndex=-1,a.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,t9(a,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,a.disabled?t.disable():a.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),ea(a,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),!0===e.preload&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),ee(e,t=>{this.registerOptionGroup(t)})}setupTemplates(){var t=this.settings.labelField,e=this.settings.optgroupLabelField;this.settings.render=Object.assign({},{optgroup:t=>{let e=document.createElement("div");return e.className="optgroup",e.appendChild(t.options),e},optgroup_header:(t,i)=>'<div class="optgroup-header">'+i(t[e])+"</div>",option:(e,i)=>"<div>"+i(e[t])+"</div>",item:(e,i)=>"<div>"+i(e[t])+"</div>",option_create:(t,e)=>'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"},this.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)(e=this.settings[i[t]])&&this.on(t,e)}sync(t=!0){let e=t?ew(this.input,{delimiter:this.settings.delimiter}):this.settings;this.setupOptions(e.options,e.optgroups),this.setValue(e.items||[],!0),this.lastQuery=null}onClick(){if(this.activeItems.length>0){this.clearActiveItems(),this.focus();return}this.isFocused&&this.isOpen?this.blur():this.focus()}onMouseDown(){}onChange(){eo(this.input,"input"),eo(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){t4(t);return}e.settings.splitOn&&setTimeout(()=>{var t=e.inputValue();t.match(e.settings.splitOn)&&ee(t.trim().split(e.settings.splitOn),t=>{tQ(t)&&(this.options[t]?e.addItem(t):e.createItem(t))})},0)}onKeyPress(t){if(this.isLocked){t4(t);return}var e=String.fromCharCode(t.keyCode||t.which);if(this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter){this.createItem(),t4(t);return}}onKeyDown(t){if(this.ignoreHover=!0,this.isLocked){9!==t.keyCode&&t4(t);return}switch(t.keyCode){case 65:if(t5(ey,t)&&""==this.control_input.value){t4(t),this.selectAll();return}break;case 27:this.isOpen&&(t4(t,!0),this.close()),this.clearActiveItems();return;case 40:if(!this.isOpen&&this.hasOptions)this.open();else if(this.activeOption){let t=this.getAdjacent(this.activeOption,1);t&&this.setActiveOption(t)}t4(t);return;case 38:if(this.activeOption){let t=this.getAdjacent(this.activeOption,-1);t&&this.setActiveOption(t)}t4(t);return;case 13:this.canSelect(this.activeOption)?(this.onOptionSelect(t,this.activeOption),t4(t)):this.settings.create&&this.createItem()?t4(t):document.activeElement==this.control_input&&this.isOpen&&t4(t);return;case 37:this.advanceSelection(-1,t);return;case 39:this.advanceSelection(1,t);return;case 9:this.settings.selectOnTab&&(this.canSelect(this.activeOption)&&(this.onOptionSelect(t,this.activeOption),t4(t)),this.settings.create&&this.createItem()&&t4(t));return;case 8:case 46:this.deleteSelection(t);return}this.isInputHidden&&!t5(ey,t)&&t4(t)}onInput(t){if(this.isLocked)return;let e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,""==e){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=t1(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){let t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this.isFocused;if(this.isDisabled||this.isReadOnly){this.blur(),t4(t);return}this.ignoreFocus||(this.isFocused=!0,"focus"===this.settings.preload&&this.preload(),e||this.trigger("focus"),this.activeItems.length||(this.inputState(),this.refreshOptions(!!this.settings.openOnFocus)),this.refreshState())}onBlur(t){if(!1!==document.hasFocus()){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,i):i()}}}onOptionSelect(t,e){var i,n=this;!(e.parentElement&&e.parentElement.matches("[data-disabled]"))&&(e.classList.contains("create")?n.createItem(null,()=>{n.settings.closeAfterSelect&&n.close()}):void 0!==(i=e.dataset.value)&&(n.lastQuery=null,n.addItem(i),n.settings.closeAfterSelect&&n.close(),!n.settings.hideSelected&&t.type&&/click/.test(t.type)&&n.setActiveOption(e)))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){return!this.isLocked&&"multi"===this.settings.mode&&(t4(t),this.setActiveItem(e,t),!0)}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){if(!this.canLoad(t))return;ea(this.wrapper,this.settings.loadingClass),this.loading++;let e=this.loadCallback.bind(this);this.settings.load.call(this,t,e)}loadCallback(t,e){this.loading=Math.max(this.loading-1,0),this.lastQuery=null,this.clearActiveOption(),this.setupOptions(t,e),this.refreshOptions(this.isFocused&&!this.isInputHidden),this.loading||el(this.wrapper,this.settings.loadingClass),this.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input;e.value!==t&&(e.value=t,eo(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){t3(this,e?[]:["change"],()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){0===t&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i,n,s,o,r,a;if("single"!==this.settings.mode){if(!t){this.clearActiveItems(),this.isFocused&&this.inputState();return}if("click"===(i=e&&e.type.toLowerCase())&&t5("shiftKey",e)&&this.activeItems.length){for(a=this.getLastActive(),(s=Array.prototype.indexOf.call(this.control.children,a))>(o=Array.prototype.indexOf.call(this.control.children,t))&&(r=s,s=o,o=r),n=s;n<=o;n++)t=this.control.children[n],-1===this.activeItems.indexOf(t)&&this.setActiveItemClass(t);t4(e)}else"click"===i&&t5(ey,e)||"keydown"===i&&t5("shiftKey",e)?t.classList.contains("active")?this.removeActiveItem(t):this.setActiveItemClass(t):(this.clearActiveItems(),this.setActiveItemClass(t));this.inputState(),this.isFocused||this.focus()}}setActiveItemClass(t){let e=this.control.querySelector(".last-active");e&&el(e,"last-active"),ea(t,"active last-active"),this.trigger("item_select",t),-1==this.activeItems.indexOf(t)&&this.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),el(t,"active")}clearActiveItems(){el(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,e_(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),e_(t,{"aria-selected":"true"}),ea(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;let i=this.dropdown_content,n=i.clientHeight,s=i.scrollTop||0,o=t.offsetHeight,r=t.getBoundingClientRect().top-i.getBoundingClientRect().top+s;r+o>n+s?this.scroll(r-n+o,e):r<s&&this.scroll(r,e)}scroll(t,e){let i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(el(this.activeOption,"active"),e_(this.activeOption,{"aria-selected":null})),this.activeOption=null,e_(this.focus_node,{"aria-activedescendant":null})}selectAll(){let t=this;if("single"===t.settings.mode)return;let e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,ee(e,e=>{t.setActiveItemClass(e)}))}inputState(){this.control.contains(this.control_input)&&(e_(this.control_input,{placeholder:this.settings.placeholder}),this.activeItems.length>0||!this.isFocused&&this.settings.hidePlaceholder&&this.items.length>0?(this.setTextboxValue(),this.isInputHidden=!0):(this.settings.hidePlaceholder&&this.items.length>0&&e_(this.control_input,{placeholder:""}),this.isInputHidden=!1),this.wrapper.classList.toggle("input-hidden",this.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return"string"==typeof t.sortField&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,n=this,s=this.getSearchOptions();if(n.settings.score&&"function"!=typeof(i=n.settings.score.call(n,t)))throw Error('Tom Select "score" setting must be a function that returns a function');return t!==n.lastQuery?(n.lastQuery=t,e=n.sifter.search(t,Object.assign(s,{score:i})),n.currentResults=e):e=Object.assign({},n.currentResults),n.settings.hideSelected&&(e.items=e.items.filter(t=>{let e=tQ(t.id);return!(e&&-1!==n.items.indexOf(e))})),e}refreshOptions(t=!0){let e={},i=[];var n,s,o,r,a,l,h,c,u,d,p=this,m=p.inputValue();let _=m===p.lastQuery||""==m&&null==p.lastQuery;var f=p.search(m),g=null,v=p.settings.shouldOpen||!1,y=p.dropdown_content;_&&(g=p.activeOption)&&(u=g.closest("[data-group]")),r=f.items.length,"number"==typeof p.settings.maxOptions&&(r=Math.min(r,p.settings.maxOptions)),r>0&&(v=!0);let b=(t,n)=>{let s=e[t];if(void 0!==s){let t=i[s];if(void 0!==t)return[s,t.fragment]}let o=document.createDocumentFragment();return s=i.length,i.push({fragment:o,order:n,optgroup:t}),[s,o]};for(n=0;n<r;n++){let t=f.items[n];if(!t)continue;let i=t.id,r=p.options[i];if(void 0===r)continue;let h=tJ(i),c=p.getOption(h,!0);for(p.settings.hideSelected||c.classList.toggle("selected",p.items.includes(h)),s=0,o=(l=Array.isArray(a=r[p.settings.optgroupField]||"")?a:[a])&&l.length;s<o;s++){a=l[s];let t=r.$order,n=p.optgroups[a];void 0===n?a="":t=n.$order;let[o,h]=b(a,t);s>0&&(e_(c=c.cloneNode(!0),{id:r.$id+"-clone-"+s,"aria-selected":null}),c.classList.add("ts-cloned"),el(c,"active"),p.activeOption&&p.activeOption.dataset.value==i&&u&&u.dataset.group===a.toString()&&(g=c)),h.appendChild(c),""!=a&&(e[a]=o)}}p.settings.lockOptgroupOrder&&i.sort((t,e)=>t.order-e.order),h=document.createDocumentFragment(),ee(i,t=>{let e=t.fragment,i=t.optgroup;if(!e||!e.children.length)return;let n=p.optgroups[i];if(void 0!==n){let t=document.createDocumentFragment();et(t,p.render("optgroup_header",n)),et(t,e),et(h,p.render("optgroup",{group:n,options:t}))}else et(h,e)}),y.innerHTML="",et(y,h),p.settings.highlight&&(ev(y),f.query.length&&f.tokens.length&&ee(f.tokens,t=>{eg(y,t.regex)}));var w=t=>{let e=p.render(t,{input:m});return e&&(v=!0,y.insertBefore(e,y.firstChild)),e};if(p.loading?w("loading"):p.settings.shouldLoad.call(p,m)?0===f.items.length&&w("no_results"):w("not_loading"),(c=p.canCreate(m))&&(d=w("option_create")),p.hasOptions=f.items.length>0||c,v){if(f.items.length>0){if(g||"single"!==p.settings.mode||void 0==p.items[0]||(g=p.getOption(p.items[0])),!y.contains(g)){let t=0;d&&!p.settings.addPrecedence&&(t=1),g=p.selectable()[t]}}else d&&(g=d);t&&!p.isOpen&&(p.open(),p.scrollToOption(g,"auto")),p.setActiveOption(g)}else p.clearActiveOption(),t&&p.isOpen&&p.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){if(Array.isArray(t))return this.addOptions(t,e),!1;let i=tQ(t[this.settings.valueField]);return!(null===i||this.options.hasOwnProperty(i))&&(t.$order=t.$order||++this.order,t.$id=this.inputId+"-opt-"+t.$order,this.options[i]=t,this.lastQuery=null,e&&(this.userOptions[i]=e,this.trigger("option_add",i,t)),i)}addOptions(t,e=!1){ee(t,t=>{this.addOption(t,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=tQ(t[this.settings.optgroupValueField]);return null!==e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){var i,n;let s=tQ(t),o=tQ(e[this.settings.valueField]);if(null===s)return;let r=this.options[s];if(void 0==r)return;if("string"!=typeof o)throw Error("Value must be set in option data");let a=this.getOption(s),l=this.getItem(s);if(e.$order=e.$order||r.$order,delete this.options[s],this.uncacheValue(o),this.options[o]=e,a){if(this.dropdown_content.contains(a)){let t=this._render("option",e);ef(a,t),this.activeOption===a&&this.setActiveOption(t)}a.remove()}l&&(-1!==(n=this.items.indexOf(s))&&this.items.splice(n,1,o),i=this._render("item",e),l.classList.contains("active")&&ea(i,"active"),ef(l,i)),this.lastQuery=null}removeOption(t,e){t=tJ(t),this.uncacheValue(t),delete this.userOptions[t],delete this.options[t],this.lastQuery=null,this.trigger("option_remove",t),this.removeItem(t,e)}clearOptions(t){let e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();let i={};ee(this.options,(t,n)=>{e(t,n)&&(i[n]=t)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){let i=tQ(t);if(null===i)return null;let n=this.options[i];if(void 0!=n){if(n.$div)return n.$div;if(e)return this._render("option",n)}return null}getAdjacent(t,e,i="option"){var n;if(!t)return null;n="item"==i?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]");for(let i=0;i<n.length;i++)if(n[i]==t){if(e>0)return n[i+1];return n[i-1]}return null}getItem(t){if("object"==typeof t)return t;var e=tQ(t);return null!==e?this.control.querySelector(`[data-value="${t8(e)}"]`):null}addItems(t,e){var i=this,n=Array.isArray(t)?t:[t];let s=(n=n.filter(t=>-1===i.items.indexOf(t)))[n.length-1];n.forEach(t=>{i.isPending=t!==s,i.addItem(t,e)})}addItem(t,e){t3(this,e?[]:["change","dropdown_close"],()=>{var i,n;let s=this.settings.mode,o=tQ(t);if((!o||-1===this.items.indexOf(o)||("single"===s&&this.close(),"single"!==s&&this.settings.duplicates))&&null!==o&&this.options.hasOwnProperty(o)&&("single"===s&&this.clear(e),!("multi"===s&&this.isFull()))){if(i=this._render("item",this.options[o]),this.control.contains(i)&&(i=i.cloneNode(!0)),n=this.isFull(),this.items.splice(this.caretPos,0,o),this.insertAtCaret(i),this.isSetup){if(!this.isPending&&this.settings.hideSelected){let t=this.getOption(o),e=this.getAdjacent(t,1);e&&this.setActiveOption(e)}this.isPending||this.settings.closeAfterSelect||this.refreshOptions(this.isFocused&&"single"!==s),!1!=this.settings.closeAfterSelect&&this.isFull()?this.close():this.isPending||this.positionDropdown(),this.trigger("item_add",o,i),this.isPending||this.updateOriginalInput({silent:e})}(!this.isPending||!n&&this.isFull())&&(this.inputState(),this.refreshState())}})}removeItem(t=null,e){var i,n;if(!(t=this.getItem(t)))return;let s=t.dataset.value;i=em(t),t.remove(),t.classList.contains("active")&&(n=this.activeItems.indexOf(t),this.activeItems.splice(n,1),el(t,"active")),this.items.splice(i,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(s)&&this.removeOption(s,e),i<this.caretPos&&this.setCaret(this.caretPos-1),this.updateOriginalInput({silent:e}),this.refreshState(),this.positionDropdown(),this.trigger("item_remove",s,t)}createItem(t=null,e=()=>{}){3==arguments.length&&(e=arguments[2]),"function"!=typeof e&&(e=()=>{});var i,n=this,s=n.caretPos;if(t=t||n.inputValue(),!n.canCreate(t))return e(),!1;n.lock();var o=!1,r=t=>{if(n.unlock(),!t||"object"!=typeof t)return e();var i=tQ(t[n.settings.valueField]);if("string"!=typeof i)return e();n.setTextboxValue(),n.addOption(t,!0),n.setCaret(s),n.addItem(i),e(t),o=!0};return i="function"==typeof n.settings.create?n.settings.create.call(this,t,r):{[n.settings.labelField]:t,[n.settings.valueField]:t},o||r(i),!0}refreshItems(){this.lastQuery=null,this.isSetup&&this.addItems(this.items),this.updateOriginalInput(),this.refreshState()}refreshState(){this.refreshValidityState();let t=this.isFull(),e=this.isLocked;this.wrapper.classList.toggle("rtl",this.rtl);let i=this.wrapper.classList;i.toggle("focus",this.isFocused),i.toggle("disabled",this.isDisabled),i.toggle("readonly",this.isReadOnly),i.toggle("required",this.isRequired),i.toggle("invalid",!this.isValid),i.toggle("locked",e),i.toggle("full",t),i.toggle("input-active",this.isFocused&&!this.isInputHidden),i.toggle("dropdown-active",this.isOpen),i.toggle("has-options",ep(this.options)),i.toggle("has-items",this.items.length>0)}refreshValidityState(){this.input.validity&&(this.isValid=this.input.validity.valid,this.isInvalid=!this.isValid)}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){var e,i;let n=this,s=n.input.querySelector('option[value=""]');if(n.is_select_tag){let t=[],r=n.input.querySelectorAll("option:checked").length;function o(e,i,o){return e||(e=ei('<option value="'+t0(i)+'">'+t0(o)+"</option>")),e!=s&&n.input.append(e),t.push(e),(e!=s||r>0)&&(e.selected=!0),e}n.input.querySelectorAll("option:checked").forEach(t=>{t.selected=!1}),0==n.items.length&&"single"==n.settings.mode?o(s,"",""):n.items.forEach(s=>{i=(e=n.options[s])[n.settings.labelField]||"",t.includes(e.$option)?o(n.input.querySelector(`option[value="${t8(s)}"]:not(:checked)`),s,i):e.$option=o(e.$option,s,i)})}else n.input.value=n.getValue();n.isSetup&&!t.silent&&n.trigger("change",n.getValue())}open(){this.isLocked||this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.isOpen=!0,e_(this.focus_node,{"aria-expanded":"true"}),this.refreshState(),er(this.dropdown,{visibility:"hidden",display:"block"}),this.positionDropdown(),er(this.dropdown,{visibility:"visible",display:"block"}),this.focus(),this.trigger("dropdown_open",this.dropdown))}close(t=!0){var e=this.isOpen;t&&(this.setTextboxValue(),"single"===this.settings.mode&&this.items.length&&this.inputState()),this.isOpen=!1,e_(this.focus_node,{"aria-expanded":"false"}),er(this.dropdown,{display:"none"}),this.settings.hideSelected&&this.clearActiveOption(),this.refreshState(),e&&this.trigger("dropdown_close",this.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,n=e.left+window.scrollX;er(this.dropdown,{width:e.width+"px",top:i+"px",left:n+"px"})}}clear(t){var e=this;e.items.length&&(ee(e.controlChildren(),t=>{e.removeItem(t,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear"))}insertAtCaret(t){let e=this.caretPos,i=this.control;i.insertBefore(t,i.children[e]||null),this.setCaret(e+1)}deleteSelection(t){var e,i,n;e=t&&8===t.keyCode?-1:1,i=t6(this.control_input);let s=[];if(this.activeItems.length)n=em(ed(this.activeItems,e)),e>0&&n++,ee(this.activeItems,t=>s.push(t));else if((this.isFocused||"single"===this.settings.mode)&&this.items.length){let t;let n=this.controlChildren();e<0&&0===i.start&&0===i.length?t=n[this.caretPos-1]:e>0&&i.start===this.inputValue().length&&(t=n[this.caretPos]),void 0!==t&&s.push(t)}if(!this.shouldDelete(s,t))return!1;for(t4(t,!0),void 0!==n&&this.setCaret(n);s.length;)this.removeItem(s.pop());return this.inputState(),this.positionDropdown(),this.refreshOptions(!1),!0}shouldDelete(t,e){let i=t.map(t=>t.dataset.value);return!!i.length&&("function"!=typeof this.settings.onDelete||!1!==this.settings.onDelete(i,e))}advanceSelection(t,e){var i,n;this.rtl&&(t*=-1),!this.inputValue().length&&(t5(ey,e)||t5("shiftKey",e)?(n=(i=this.getLastActive(t))?i.classList.contains("active")?this.getAdjacent(i,t,"item"):i:t>0?this.control_input.nextElementSibling:this.control_input.previousElementSibling)&&(n.classList.contains("active")&&this.removeActiveItem(i),this.setActiveItemClass(n)):this.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");if(i)return ed(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this.revertSettings;this.trigger("destroy"),this.off(),this.wrapper.remove(),this.dropdown.remove(),this.input.innerHTML=t.innerHTML,this.input.tabIndex=t.tabIndex,el(this.input,"tomselected","ts-hidden-accessible"),this._destroy(),delete this.input.tomselect}render(t,e){var i;if("function"!=typeof this.settings.render[t]||!(i=this.settings.render[t].call(this,e,t0)))return null;if(i=ei(i),"option"===t||"option_create"===t?e[this.settings.disabledField]?e_(i,{"aria-disabled":"true"}):e_(i,{"data-selectable":""}):"optgroup"===t&&(e_(i,{"data-group":e.group[this.settings.optgroupValueField]}),e.group[this.settings.disabledField]&&e_(i,{"data-disabled":""})),"option"===t||"item"===t){let n=tJ(e[this.settings.valueField]);e_(i,{"data-value":n}),"item"===t?(ea(i,this.settings.itemClass),e_(i,{"data-ts-item":""})):(ea(i,this.settings.optionClass),e_(i,{role:"option",id:e.$id}),e.$div=i,this.options[n]=e)}return i}_render(t,e){let i=this.render(t,e);if(null==i)throw"HTMLElement expected";return i}clearCache(){ee(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){let e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var n=this,s=n[e];n[e]=function(){var e,o;return("after"===t&&(e=s.apply(n,arguments)),o=i.apply(n,arguments),"instead"===t)?o:("before"===t&&(e=s.apply(n,arguments)),e)}}}let eE=(t,e,i,n)=>{t.addEventListener(e,i,n)},eC=t=>null==t?null:eP(t),eP=t=>"boolean"==typeof t?t?"1":"0":t+"",ek=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},eT=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(eS(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},eS=t=>!!("string"==typeof t&&t.indexOf("<")>-1),eM=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(eO(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},eO=t=>!!("string"==typeof t&&t.indexOf("<")>-1),eA=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},ez=(t,e,i,n)=>{t.addEventListener(e,i,n)},eI=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},eF=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(eB(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},eB=t=>!!("string"==typeof t&&t.indexOf("<")>-1),eD=(t,e)=>{eI(e,(e,i)=>{null==e?t.removeAttribute(i):t.setAttribute(i,""+e)})},eR=(t,e)=>{var i;null==(i=t.parentNode)||i.insertBefore(e,t.nextSibling)},eN=(t,e)=>{var i;null==(i=t.parentNode)||i.insertBefore(e,t)},eZ=(t,e)=>{do{var i;if(t==(e=null==(i=e)?void 0:i.previousElementSibling))return!0}while(e&&e.previousElementSibling)return!1},ej=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},eH=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(eq(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},eq=t=>!!("string"==typeof t&&t.indexOf("<")>-1),eU=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},eW=(t,...e)=>{var i=e$(e);(t=eV(t)).map(t=>{i.map(e=>{t.classList.remove(e)})})},e$=t=>{var e=[];return eU(t,t=>{"string"==typeof t&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},eV=t=>(Array.isArray(t)||(t=[t]),t),eG=(t,e)=>{if(!t)return -1;e=e||t.nodeName;for(var i=0;t=t.previousElementSibling;)t.matches(e)&&i++;return i},eK=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},eY=(t,e,i,n)=>{t.addEventListener(e,i,n)},eX=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},eQ=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(eJ(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},eJ=t=>!!("string"==typeof t&&t.indexOf("<")>-1),e0=(t,...e)=>{var i=e1(e);(t=e2(t)).map(t=>{i.map(e=>{t.classList.add(e)})})},e1=t=>{var e=[];return eX(t,t=>{"string"==typeof t&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},e2=t=>(Array.isArray(t)||(t=[t]),t),e3=(t,e,i,n)=>{t.addEventListener(e,i,n)},e6=(t,e,i)=>{for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}},e4=(t,e)=>{if(!t)return -1;e=e||t.nodeName;for(var i=0;t=t.previousElementSibling;)t.matches(e)&&i++;return i},e9=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),e5=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},e7=(t,e,i,n)=>{t.addEventListener(e,i,n)},e8=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(it(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},it=t=>!!("string"==typeof t&&t.indexOf("<")>-1),ie=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},ii=(t,...e)=>{var i=is(e);(t=io(t)).map(t=>{i.map(e=>{t.classList.add(e)})})},is=t=>{var e=[];return ie(t,t=>{"string"==typeof t&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},io=t=>(Array.isArray(t)||(t=[t]),t);eL.define("change_listener",function(){eE(this.input,"change",()=>{this.sync()})}),eL.define("checkbox_options",function(t){var e=this,i=e.onOptionSelect;e.settings.hideSelected=!1;let n=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},t);var s=function(t,e){e?(t.checked=!0,n.uncheckedClassNames&&t.classList.remove(...n.uncheckedClassNames),n.checkedClassNames&&t.classList.add(...n.checkedClassNames)):(t.checked=!1,n.checkedClassNames&&t.classList.remove(...n.checkedClassNames),n.uncheckedClassNames&&t.classList.add(...n.uncheckedClassNames))},o=function(t){setTimeout(()=>{var e=t.querySelector("input."+n.className);e instanceof HTMLInputElement&&s(e,t.classList.contains("selected"))},1)};e.hook("after","setupTemplates",()=>{var t=e.settings.render.option;e.settings.render.option=(i,o)=>{var r=eT(t.call(e,i,o)),a=document.createElement("input");n.className&&a.classList.add(n.className),a.addEventListener("click",function(t){ek(t)}),a.type="checkbox";let l=eC(i[e.settings.valueField]);return s(a,!!(l&&e.items.indexOf(l)>-1)),r.prepend(a),r}}),e.on("item_remove",t=>{var i=e.getOption(t);i&&(i.classList.remove("selected"),o(i))}),e.on("item_add",t=>{var i=e.getOption(t);i&&o(i)}),e.hook("instead","onOptionSelect",(t,n)=>{if(n.classList.contains("selected")){n.classList.remove("selected"),e.removeItem(n.dataset.value),e.refreshOptions(),ek(t,!0);return}i.call(e,t,n),o(n)})}),eL.define("clear_button",function(t){let e=this,i=Object.assign({className:"clear-button",title:"Clear All",html:t=>`<div class="${t.className}" title="${t.title}">&#10799;</div>`},t);e.on("initialize",()=>{var t=eM(i.html(i));t.addEventListener("click",t=>{e.isLocked||(e.clear(),"single"===e.settings.mode&&e.settings.allowEmptyOption&&e.addItem(""),t.preventDefault(),t.stopPropagation())}),e.control.appendChild(t)})}),eL.define("drag_drop",function(){let t;var e=this;if("multi"!==e.settings.mode)return;var i=e.lock,n=e.unlock;let s=!0;e.hook("after","setupTemplates",()=>{var i=e.settings.render.item;e.settings.render.item=(n,o)=>{let r=eF(i.call(e,n,o));eD(r,{draggable:"true"});let a=e=>{e.preventDefault(),r.classList.add("ts-drag-over"),l(r,t)},l=(t,e)=>{void 0!==e&&(eZ(e,r)?eR(t,e):eN(t,e))};return ez(r,"mousedown",t=>{s||eA(t),t.stopPropagation()}),ez(r,"dragstart",e=>{t=r,setTimeout(()=>{r.classList.add("ts-dragging")},0)}),ez(r,"dragenter",a),ez(r,"dragover",a),ez(r,"dragleave",()=>{r.classList.remove("ts-drag-over")}),ez(r,"dragend",()=>{document.querySelectorAll(".ts-drag-over").forEach(t=>t.classList.remove("ts-drag-over")),null==(i=t)||i.classList.remove("ts-dragging"),t=void 0;var i,n=[];e.control.querySelectorAll("[data-value]").forEach(t=>{if(t.dataset.value){let e=t.dataset.value;e&&n.push(e)}}),e.setValue(n)}),r}}),e.hook("instead","lock",()=>(s=!1,i.call(e))),e.hook("instead","unlock",()=>(s=!0,n.call(e)))}),eL.define("dropdown_header",function(t){let e=this,i=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:t=>'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a class="'+t.closeClass+'">&times;</a></div></div>'},t);e.on("initialize",()=>{var t=eH(i.html(i)),n=t.querySelector("."+i.closeClass);n&&n.addEventListener("click",t=>{ej(t,!0),e.close()}),e.dropdown.insertBefore(t,e.dropdown.firstChild)})}),eL.define("caret_position",function(){var t=this;t.hook("instead","setCaret",e=>{"single"!==t.settings.mode&&t.control.contains(t.control_input)?(e=Math.max(0,Math.min(t.items.length,e)))==t.caretPos||t.isPending||t.controlChildren().forEach((i,n)=>{n<e?t.control_input.insertAdjacentElement("beforebegin",i):t.control.appendChild(i)}):e=t.items.length,t.caretPos=e}),t.hook("instead","moveCaret",e=>{if(!t.isFocused)return;let i=t.getLastActive(e);if(i){let n=eG(i);t.setCaret(e>0?n+1:n),t.setActiveItem(),eW(i,"last-active")}else t.setCaret(t.caretPos+e)})}),eL.define("dropdown_input",function(){let t=this;t.settings.shouldOpen=!0,t.hook("before","setup",()=>{t.focus_node=t.control,e0(t.control_input,"dropdown-input");let e=eQ('<div class="dropdown-input-wrap">');e.append(t.control_input),t.dropdown.insertBefore(e,t.dropdown.firstChild);let i=eQ('<input class="items-placeholder" tabindex="-1" />');i.placeholder=t.settings.placeholder||"",t.control.append(i)}),t.on("initialize",()=>{t.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case 27:t.isOpen&&(eK(e,!0),t.close()),t.clearActiveItems();return;case 9:t.focus_node.tabIndex=-1}return t.onKeyDown.call(t,e)}),t.on("blur",()=>{t.focus_node.tabIndex=t.isDisabled?-1:t.tabIndex}),t.on("dropdown_open",()=>{t.control_input.focus()});let e=t.onBlur;t.hook("instead","onBlur",i=>{if(!i||i.relatedTarget!=t.control_input)return e.call(t)}),eY(t.control_input,"blur",()=>t.onBlur()),t.hook("before","close",()=>{t.isOpen&&t.focus_node.focus({preventScroll:!0})})})}),eL.define("input_autogrow",function(){var t=this;t.on("initialize",()=>{var e=document.createElement("span"),i=t.control_input;for(let n of(e.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",t.wrapper.appendChild(e),["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]))e.style[n]=i.style[n];var n=()=>{e.textContent=i.value,i.style.width=e.clientWidth+"px"};n(),t.on("update item_add item_remove",n),e3(i,"input",n),e3(i,"keyup",n),e3(i,"blur",n),e3(i,"update",n)})}),eL.define("no_backspace_delete",function(){var t=this,e=t.deleteSelection;this.hook("instead","deleteSelection",i=>!!t.activeItems.length&&e.call(t,i))}),eL.define("no_active_items",function(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}),eL.define("optgroup_columns",function(){var t=this,e=t.onKeyDown;t.hook("instead","onKeyDown",i=>{var n,s,o,r;if(!t.isOpen||37!==i.keyCode&&39!==i.keyCode)return e.call(t,i);t.ignoreHover=!0,r=e6(t.activeOption,"[data-group]"),n=e4(t.activeOption,"[data-selectable]"),r&&(r=37===i.keyCode?r.previousSibling:r.nextSibling)&&(s=(o=r.querySelectorAll("[data-selectable]"))[Math.min(o.length-1,n)])&&t.setActiveOption(s)})}),eL.define("remove_button",function(t){let e=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},t);var i=this;if(e.append){var n='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+e9(e.title)+'">'+e.label+"</a>";i.hook("after","setupTemplates",()=>{var t=i.settings.render.item;i.settings.render.item=(e,s)=>{var o=e8(t.call(i,e,s)),r=e8(n);return o.appendChild(r),e7(r,"mousedown",t=>{e5(t,!0)}),e7(r,"click",t=>{!i.isLocked&&(e5(t,!0),!i.isLocked&&i.shouldDelete([o],t)&&(i.removeItem(o),i.refreshOptions(!1),i.inputState()))}),o}})}}),eL.define("restore_on_backspace",function(t){let e=this,i=Object.assign({text:t=>t[e.settings.labelField]},t);e.on("item_remove",function(t){if(e.isFocused&&""===e.control_input.value.trim()){var n=e.options[t];n&&e.setTextboxValue(i.text.call(e,n))}})}),eL.define("virtual_scroll",function(){let t=this,e=t.canLoad,i=t.clearActiveOption,n=t.loadCallback;var s,o,r={},a=!1,l=[];if(t.settings.shouldLoadMore||(t.settings.shouldLoadMore=()=>{if(s.clientHeight/(s.scrollHeight-s.scrollTop)>.9)return!0;if(t.activeOption){var e=t.selectable();if(Array.from(e).indexOf(t.activeOption)>=e.length-2)return!0}return!1}),!t.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";t.settings.sortField=[{field:"$order"},{field:"$score"}];let h=e=>("number"!=typeof t.settings.maxOptions||!(s.children.length>=t.settings.maxOptions))&&e in r&&!!r[e],c=(e,i)=>!!(t.items.indexOf(i)>=0||l.indexOf(i)>=0);t.setNextUrl=(t,e)=>{r[t]=e},t.getUrl=e=>{if(e in r){let t=r[e];return r[e]=!1,t}return t.clearPagination(),t.settings.firstUrl.call(t,e)},t.clearPagination=()=>{r={}},t.hook("instead","clearActiveOption",()=>{if(!a)return i.call(t)}),t.hook("instead","canLoad",i=>i in r?h(i):e.call(t,i)),t.hook("instead","loadCallback",(e,i)=>{if(a){if(o){let i=e[0];void 0!==i&&(o.dataset.value=i[t.settings.valueField])}}else t.clearOptions(c);n.call(t,e,i),a=!1}),t.hook("after","refreshOptions",()=>{var e;let i=t.lastValue;h(i)?(e=t.render("loading_more",{query:i}))&&(e.setAttribute("data-selectable",""),o=e):i in r&&!s.querySelector(".no-results")&&(e=t.render("no_more_results",{query:i})),e&&(ii(e,t.settings.optionClass),s.append(e))}),t.on("initialize",()=>{l=Object.keys(t.options),s=t.dropdown_content,t.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},t.settings.render),s.addEventListener("scroll",()=>{t.settings.shouldLoadMore.call(t)&&h(t.lastValue)&&(a||(a=!0,t.load.call(t,t.lastValue)))})})});let ir=window.PluginBaseClass;class ia extends ir{static #t=this.options={desktop:!0,mobile:!1};init(){new eL(this.el,{})}}let il=window.PluginBaseClass;class ih extends il{static #t=this.options={src:null,attributes:null};init(){fetch(this.options.src).then(t=>t.text()).then(t=>{this.el.innerHTML=t})}}let ic=window.PluginBaseClass;class iu extends ic{static #t=this.options={inputLocationSelector:".location",buttonMyLocationSelector:".my-location"};init(){this._inputLocation=this.el.querySelector(this.options.inputLocationSelector),this._buttonMyLocation=this.el.querySelector(this.options.buttonMyLocationSelector),this._registerEvents()}_registerEvents(){this._buttonMyLocation&&this._buttonMyLocation.addEventListener("click",this._onClickButton.bind(this))}_onClickButton(){this._inputLocation.value="0|0",navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{this._inputLocation.value=`${t.coords.latitude}|${t.coords.longitude}`,this._inputLocation.dispatchEvent(new Event("input"))})}}/*!
 * Signature Pad v4.2.0 | https://github.com/szimek/signature_pad
 * (c) 2024 Szymon Nowak | Released under the MIT license
 */class id{constructor(t,e,i,n){if(isNaN(t)||isNaN(e))throw Error(`Point is invalid: (${t}, ${e})`);this.x=+t,this.y=+e,this.pressure=i||0,this.time=n||Date.now()}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return this.x===t.x&&this.y===t.y&&this.pressure===t.pressure&&this.time===t.time}velocityFrom(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}}class ip{static fromPoints(t,e){let i=this.calculateControlPoints(t[0],t[1],t[2]).c2,n=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new ip(t[1],i,n,t[2],e.start,e.end)}static calculateControlPoints(t,e,i){let n=t.x-e.x,s=t.y-e.y,o=e.x-i.x,r=e.y-i.y,a={x:(t.x+e.x)/2,y:(t.y+e.y)/2},l={x:(e.x+i.x)/2,y:(e.y+i.y)/2},h=Math.sqrt(n*n+s*s),c=Math.sqrt(o*o+r*r),u=a.x-l.x,d=a.y-l.y,p=c/(h+c),m={x:l.x+u*p,y:l.y+d*p},_=e.x-m.x,f=e.y-m.y;return{c1:new id(a.x+_,a.y+f),c2:new id(l.x+_,l.y+f)}}constructor(t,e,i,n,s,o){this.startPoint=t,this.control2=e,this.control1=i,this.endPoint=n,this.startWidth=s,this.endWidth=o}length(){let t,e;let i=0;for(let n=0;n<=10;n+=1){let s=n/10,o=this.point(s,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),r=this.point(s,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(n>0){let n=o-t,s=r-e;i+=Math.sqrt(n*n+s*s)}t=o,e=r}return i}point(t,e,i,n,s){return e*(1-t)*(1-t)*(1-t)+3*i*(1-t)*(1-t)*t+3*n*(1-t)*t*t+s*t*t*t}}class im{constructor(){try{this._et=new EventTarget}catch(t){this._et=document}}addEventListener(t,e,i){this._et.addEventListener(t,e,i)}dispatchEvent(t){return this._et.dispatchEvent(t)}removeEventListener(t,e,i){this._et.removeEventListener(t,e,i)}}class i_ extends im{constructor(t,e={}){super(),this.canvas=t,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=t=>{1===t.buttons&&this._strokeBegin(t)},this._handleMouseMove=t=>{this._strokeMoveUpdate(t)},this._handleMouseUp=t=>{1===t.buttons&&this._strokeEnd(t)},this._handleTouchStart=t=>{if(t.cancelable&&t.preventDefault(),1===t.targetTouches.length){let e=t.changedTouches[0];this._strokeBegin(e)}},this._handleTouchMove=t=>{t.cancelable&&t.preventDefault();let e=t.targetTouches[0];this._strokeMoveUpdate(e)},this._handleTouchEnd=t=>{if(t.target===this.canvas){t.cancelable&&t.preventDefault();let e=t.changedTouches[0];this._strokeEnd(e)}},this._handlePointerStart=t=>{t.preventDefault(),this._strokeBegin(t)},this._handlePointerMove=t=>{this._strokeMoveUpdate(t)},this._handlePointerEnd=t=>{this._drawingStroke&&(t.preventDefault(),this._strokeEnd(t))},this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle="throttle"in e?e.throttle:16,this.minDistance="minDistance"in e?e.minDistance:5,this.dotSize=e.dotSize||0,this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=e.compositeOperation||"source-over",this.canvasContextOptions="canvasContextOptions"in e?e.canvasContextOptions:{},this._strokeMoveUpdate=this.throttle?function(t,e=250){let i,n,s,o=0,r=null,a=()=>{o=Date.now(),r=null,i=t.apply(n,s),r||(n=null,s=[])};return function(...l){let h=Date.now(),c=e-(h-o);return n=this,s=l,c<=0||c>e?(r&&(clearTimeout(r),r=null),o=h,i=t.apply(n,s),r||(n=null,s=[])):r||(r=window.setTimeout(a,c)),i}}(i_.prototype._strokeUpdate,this.throttle):i_.prototype._strokeUpdate,this._ctx=t.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){let{_ctx:t,canvas:e}=this;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(t,e={}){return new Promise((i,n)=>{let s=new Image,o=e.ratio||window.devicePixelRatio||1,r=e.width||this.canvas.width/o,a=e.height||this.canvas.height/o,l=e.xOffset||0,h=e.yOffset||0;this._reset(this._getPointGroupOptions()),s.onload=()=>{this._ctx.drawImage(s,l,h,r,a),i()},s.onerror=t=>{n(t)},s.crossOrigin="anonymous",s.src=t,this._isEmpty=!1})}toDataURL(t="image/png",e){return"image/svg+xml"===t?("object"!=typeof e&&(e=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(e))}`):("number"!=typeof e&&(e=void 0),this.canvas.toDataURL(t,e))}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";let t=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!t?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(t,{clear:e=!0}={}){e&&this.clear(),this._fromData(t,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(t)}toData(){return this._data}_getPointGroupOptions(t){return{penColor:t&&"penColor"in t?t.penColor:this.penColor,dotSize:t&&"dotSize"in t?t.dotSize:this.dotSize,minWidth:t&&"minWidth"in t?t.minWidth:this.minWidth,maxWidth:t&&"maxWidth"in t?t.maxWidth:this.maxWidth,velocityFilterWeight:t&&"velocityFilterWeight"in t?t.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:t&&"compositeOperation"in t?t.compositeOperation:this.compositeOperation}}_strokeBegin(t){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:t,cancelable:!0})))return;this._drawingStroke=!0;let e=this._getPointGroupOptions(),i=Object.assign(Object.assign({},e),{points:[]});this._data.push(i),this._reset(e),this._strokeUpdate(t)}_strokeUpdate(t){if(!this._drawingStroke)return;if(0===this._data.length){this._strokeBegin(t);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:t}));let e=t.clientX,i=t.clientY,n=void 0!==t.pressure?t.pressure:void 0!==t.force?t.force:0,s=this._createPoint(e,i,n),o=this._data[this._data.length-1],r=o.points,a=r.length>0&&r[r.length-1],l=!!a&&s.distanceTo(a)<=this.minDistance,h=this._getPointGroupOptions(o);if(!a||!(a&&l)){let t=this._addPoint(s,h);a?t&&this._drawCurve(t,h):this._drawDot(s,h),r.push({time:s.time,x:s.x,y:s.y,pressure:s.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:t}))}_strokeEnd(t){this._drawingStroke&&(this._strokeUpdate(t),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:t})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(t){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(t.minWidth+t.maxWidth)/2,this._ctx.fillStyle=t.penColor,this._ctx.globalCompositeOperation=t.compositeOperation}_createPoint(t,e,i){let n=this.canvas.getBoundingClientRect();return new id(t-n.left,e-n.top,i,new Date().getTime())}_addPoint(t,e){let{_lastPoints:i}=this;if(i.push(t),i.length>2){3===i.length&&i.unshift(i[0]);let t=this._calculateCurveWidths(i[1],i[2],e),n=ip.fromPoints(i,t);return i.shift(),n}return null}_calculateCurveWidths(t,e,i){let n=i.velocityFilterWeight*e.velocityFrom(t)+(1-i.velocityFilterWeight)*this._lastVelocity,s=this._strokeWidth(n,i),o={end:s,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=s,o}_strokeWidth(t,e){return Math.max(e.maxWidth/(t+1),e.minWidth)}_drawCurveSegment(t,e,i){let n=this._ctx;n.moveTo(t,e),n.arc(t,e,i,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(t,e){let i=this._ctx,n=t.endWidth-t.startWidth,s=2*Math.ceil(t.length());i.beginPath(),i.fillStyle=e.penColor;for(let i=0;i<s;i+=1){let o=i/s,r=o*o,a=r*o,l=1-o,h=l*l,c=h*l,u=c*t.startPoint.x;u+=3*h*o*t.control1.x+3*l*r*t.control2.x+a*t.endPoint.x;let d=c*t.startPoint.y;d+=3*h*o*t.control1.y+3*l*r*t.control2.y+a*t.endPoint.y;let p=Math.min(t.startWidth+a*n,e.maxWidth);this._drawCurveSegment(u,d,p)}i.closePath(),i.fill()}_drawDot(t,e){let i=this._ctx,n=e.dotSize>0?e.dotSize:(e.minWidth+e.maxWidth)/2;i.beginPath(),this._drawCurveSegment(t.x,t.y,n),i.closePath(),i.fillStyle=e.penColor,i.fill()}_fromData(t,e,i){for(let n of t){let{points:t}=n,s=this._getPointGroupOptions(n);if(t.length>1)for(let i=0;i<t.length;i+=1){let n=t[i],o=new id(n.x,n.y,n.pressure,n.time);0===i&&this._reset(s);let r=this._addPoint(o,s);r&&e(r,s)}else this._reset(s),i(t[0],s)}}toSVG({includeBackgroundColor:t=!1}={}){let e=this._data,i=Math.max(window.devicePixelRatio||1,1),n=this.canvas.width/i,s=this.canvas.height/i,o=document.createElementNS("http://www.w3.org/2000/svg","svg");if(o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),o.setAttribute("viewBox",`0 0 ${n} ${s}`),o.setAttribute("width",n.toString()),o.setAttribute("height",s.toString()),t&&this.backgroundColor){let t=document.createElement("rect");t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("fill",this.backgroundColor),o.appendChild(t)}return this._fromData(e,(t,{penColor:e})=>{let i=document.createElement("path");if(!isNaN(t.control1.x)&&!isNaN(t.control1.y)&&!isNaN(t.control2.x)&&!isNaN(t.control2.y)){let n=`M ${t.startPoint.x.toFixed(3)},${t.startPoint.y.toFixed(3)} C ${t.control1.x.toFixed(3)},${t.control1.y.toFixed(3)} ${t.control2.x.toFixed(3)},${t.control2.y.toFixed(3)} ${t.endPoint.x.toFixed(3)},${t.endPoint.y.toFixed(3)}`;i.setAttribute("d",n),i.setAttribute("stroke-width",(2.25*t.endWidth).toFixed(3)),i.setAttribute("stroke",e),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),o.appendChild(i)}},(t,{penColor:e,dotSize:i,minWidth:n,maxWidth:s})=>{let r=document.createElement("circle");r.setAttribute("r",(i>0?i:(n+s)/2).toString()),r.setAttribute("cx",t.x.toString()),r.setAttribute("cy",t.y.toString()),r.setAttribute("fill",e),o.appendChild(r)}),o.outerHTML}}let ig=window.PluginBaseClass;class iv extends ig{static #t=this.options={dotSize:null,minWidth:null,maxWidth:null,throttle:null,minDistance:null,backgroundColor:null,penColor:null,velocityFilterWeight:.7};init(){this._canvas=this.el.querySelector("canvas"),this._input=this.el.querySelector("input"),this._button=this.el.querySelector("[data-fb-refresh]"),this.signaturePad=new i_(this._canvas),this.signaturePad.addEventListener("endStroke",()=>{this._input.value=this.signaturePad.toDataURL()}),this._button.addEventListener("click",()=>{this.signaturePad.clear(),this._input.value=""}),this._input.value&&this.signaturePad.fromDataURL(this._input.value)}}let iy=window.PluginManager;if(iy.register("MoorlFoundation",class extends s{init(){this._client=new n(window.accessKey,window.contextToken),this._registerModalEvents(),this.callback=null}_registerModalEvents(){let t=this,e=document.querySelectorAll("[data-moorl-foundation-modal]");if(0===e.length)return;let i=document.getElementById("moorlFoundationModal");e.forEach(t=>{t.addEventListener("click",()=>{let e=t.dataset.moorlFoundationModal;this._client.get(e,t=>{this._openModal(t,null)})})}),i.addEventListener("hidden.bs.modal",()=>{i.innerHTML=""}),window.moorlFoundationModal=function(e,i){t._client.get(e,e=>{t._openModal(e,i)})}}_openModal(t,e){let i=document.getElementById("moorlFoundationModal");i.innerHTML=t;let n=bootstrap.Modal.getInstance(i)??new bootstrap.Modal(i);n.show(),window.PluginManager.initializePlugins(),"function"==typeof e&&e(i,n)}}),iy.register("MoorlFoundationForm",a,"[data-moorl-foundation-form]"),iy.register("MoorlAnimation",h,"[data-moorl-animation]"),iy.register("MoorlLocation",Y,"[data-moorl-location]"),iy.register("MoorlRelativeTime",u,"[data-moorl-relative-time]"),iy.register("MoorlCountdown",p,"[data-moorl-countdown]"),iy.register("MoorlProductBuyList",_,"[data-moorl-product-buy-list]"),iy.register("MoorlPartsList",g,"[data-moorl-parts-list]"),iy.register("MoorlToc",y,"[data-moorl-toc]"),iy.register("MoorlGrid",w,"[data-moorl-grid]"),iy.register("MoorlPaint",E,".moorl-paint"),iy.register("MoorlFoundationFilterRadius",A,"[data-moorl-foundation-filter-radius]"),iy.register("MoorlFoundationFilterSearch",z,"[data-moorl-foundation-filter-search]"),iy.register("MoorlCustomerUpload",W,"[data-moorl-customer-upload]"),iy.register("MoorlHoverCard",Q,"[data-moorl-hover-card]"),iy.register("MoorlCookieBox",td,"[data-moorl-cookie-box]"),iy.register("MoorlModal",class extends tp{init(){this._client=new n(window.accessKey,window.contextToken),this._registerEvents()}_registerEvents(){this.el.addEventListener("click",t=>{let e=this.el.dataset.moorlModal;e&&(t.preventDefault(),this._openModal(e))})}_openModal(t,e){this._client.get(t,t=>{let i=document.getElementById("moorlFoundationModal");i||console.error("#moorlFoundationModal not found. Please be sure, that views/storefront/base.html.twig is extended correctly"),i.innerHTML=t;let n=bootstrap.Modal.getInstance(i)??new bootstrap.Modal(i);n.show(),i.addEventListener("hidden.bs.modal",()=>{i.innerHTML=""}),"function"==typeof e&&e(i,n)})}},"[data-moorl-modal]"),iy.register("MoorlCharCounter",t_,"[data-moorl-char-counter]"),iy.register("MoorlCopy",tg,"[data-moorl-copy]"),iy.register("MoorlSelectSearch",ia,"[data-moorl-select-search]"),iy.register("MoorlSvgLoader",ih,"[data-moorl-svg-loader]"),iy.register("MoorlInputLocation",iu,"[data-moorl-input-location]"),iy.register("MoorlFbSignature",iv,"[data-moorl-fb-signature]"),window.moorlAnimation)for(let t of window.moorlAnimation)iy.register("MoorlAnimation",h,t.cssSelector,t)})()})();