"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[17977],{977:(t,e,i)=>{let s,n;function r(t,e){t.split(/\s+/).forEach(t=>{e(t)})}i.r(e),i.d(e,{default:()=>es});class o{constructor(){this._events={}}on(t,e){r(t,t=>{let i=this._events[t]||[];i.push(e),this._events[t]=i})}off(t,e){var i=arguments.length;if(0===i){this._events={};return}r(t,t=>{if(1===i){delete this._events[t];return}let s=this._events[t];void 0!==s&&(s.splice(s.indexOf(e),1),this._events[t]=s)})}trigger(t,...e){var i=this;r(t,t=>{let s=i._events[t];void 0!==s&&s.forEach(t=>{t.apply(i,e)})})}}function l(t){return t.plugins={},class extends t{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(e,i){t.plugins[e]={name:e,fn:i}}initializePlugins(t){var e,i;let s=this,n=[];if(Array.isArray(t))t.forEach(t=>{"string"==typeof t?n.push(t):(s.plugins.settings[t.name]=t.options,n.push(t.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(s.plugins.settings[e]=t[e],n.push(e));for(;i=n.shift();)s.require(i)}loadPlugin(e){var i=this.plugins,s=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=s.fn.apply(this,[this.plugins.settings[e]||{}]),i.names.push(e)}require(t){var e=this.plugins;if(!this.plugins.loaded.hasOwnProperty(t)){if(e.requested[t])throw Error('Plugin has circular dependency ("'+t+'")');this.loadPlugin(t)}return e.loaded[t]}}}let a=t=>(t=t.filter(Boolean)).length<2?t[0]||"":1==p(t)?"["+t.join("")+"]":"(?:"+t.join("|")+")",d=t=>{if(!h(t))return t.join("");let e="",i=0,s=()=>{i>1&&(e+="{"+i+"}")};return t.forEach((n,r)=>{if(n===t[r-1]){i++;return}s(),e+=n,i=1}),s(),e},c=t=>a(Array.from(t)),h=t=>new Set(t).size!==t.length,u=t=>(t+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),p=t=>t.reduce((t,e)=>Math.max(t,g(e)),0),g=t=>Array.from(t).length,f=t=>{if(1===t.length)return[[t]];let e=[];return f(t.substring(1)).forEach(function(i){let s=i.slice(0);s[0]=t.charAt(0)+s[0],e.push(s),(s=i.slice(0)).unshift(t.charAt(0)),e.push(s)}),e},m=[[0,65535]],v={},y={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let t in y){let e=y[t]||"";for(let i=0;i<e.length;i++)v[e.substring(i,i+1)]=t}let O=RegExp(Object.keys(v).join("|")+"|[̀-ͯ·ʾʼ]","gu"),b=t=>{void 0===s&&(s=S(t||m))},w=(t,e="NFKD")=>t.normalize(e),_=t=>Array.from(t).reduce((t,e)=>t+A(e),""),A=t=>(t=w(t).toLowerCase().replace(O,t=>v[t]||""),w(t,"NFC")),C=t=>{let e={},i=(t,i)=>{let s=e[t]||new Set,n=RegExp("^"+c(s)+"$","iu");i.match(n)||(s.add(u(i)),e[t]=s)};for(let e of function*(t){for(let[e,i]of t)for(let t=e;t<=i;t++){let e=String.fromCharCode(t),i=_(e);i==e.toLowerCase()||i.length>3||0==i.length||(yield{folded:i,composed:e,code_point:t})}}(t))i(e.folded,e.folded),i(e.folded,e.composed);return e},S=t=>{let e=C(t),i={},s=[];for(let t in e){let n=e[t];n&&(i[t]=c(n)),t.length>1&&s.push(u(t))}return s.sort((t,e)=>e.length-t.length),n=RegExp("^"+a(s),"u"),i},I=(t,e=1)=>{let i=0;return(t=t.map(t=>(s[t]&&(i+=t.length),s[t]||t)),i>=e)?d(t):""},k=(t,e=1)=>(e=Math.max(e,t.length-1),a(f(t).map(t=>I(t,e)))),x=(t,e=!0)=>{let i=+(t.length>1);return a(t.map(t=>{let s=[],n=e?t.length():t.length()-1;for(let e=0;e<n;e++)s.push(k(t.substrs[e]||"",i));return d(s)}))},L=(t,e)=>{for(let i of e){if(i.start!=t.start||i.end!=t.end||i.substrs.join("")!==t.substrs.join(""))continue;let e=t.parts,s=t=>{for(let i of e){if(i.start===t.start&&i.substr===t.substr)break;if(1!=t.length&&1!=i.length&&(t.start<i.start&&t.end>i.start||i.start<t.start&&i.end>t.start))return!0}return!1};if(!(i.parts.filter(s).length>0))return!0}return!1};class F{parts;substrs;start;end;constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let i=new F,s=JSON.parse(JSON.stringify(this.parts)),n=s.pop();for(let t of s)i.add(t);let r=e.substr.substring(0,t-n.start),o=r.length;return i.add({start:n.start,end:n.start+o,length:o,substr:r}),i}}let E=t=>{b(),t=_(t);let e="",i=[new F];for(let s=0;s<t.length;s++){let r=t.substring(s).match(n),o=t.substring(s,s+1),l=r?r[0]:null,a=[],d=new Set;for(let t of i){let e=t.last();if(!e||1==e.length||e.end<=s){if(l){let e=l.length;t.add({start:s,end:s+e,length:e,substr:l}),d.add("1")}else t.add({start:s,end:s+1,length:1,substr:o}),d.add("2")}else if(l){let i=t.clone(s,e),n=l.length;i.add({start:s,end:s+n,length:n,substr:l}),a.push(i)}else d.add("3")}if(a.length>0){for(let t of a=a.sort((t,e)=>t.length()-e.length()))L(t,i)||i.push(t);continue}if(s>0&&1==d.size&&!d.has("3")){e+=x(i,!1);let t=new F,s=i[0];s&&t.add(s.last()),i=[t]}}return e+x(i,!0)},T=(t,e)=>{if(t)return t[e]},P=(t,e)=>{if(t){for(var i,s=e.split(".");(i=s.shift())&&(t=t[i]););return t}},q=(t,e,i)=>{var s,n;return t?(t+="",null==e.regex||-1===(n=t.search(e.regex)))?0:(s=e.string.length/t.length,0===n&&(s+=.5),s*i):0},N=(t,e)=>{var i=t[e];if("function"==typeof i)return i;i&&!Array.isArray(i)&&(t[e]=[i])},j=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},$=(t,e)=>"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=_(t+"").toLowerCase())>(e=_(e+"").toLowerCase())?1:e>t?-1:0;class V{items;settings;constructor(t,e){this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,i){var s;if(!t||!t.length)return[];let n=[],r=t.split(/\s+/);return i&&(s=RegExp("^("+Object.keys(i).map(u).join("|")+"):(.*)$")),r.forEach(t=>{let i;let r=null,o=null;s&&(i=t.match(s))&&(r=i[1],t=i[2]),t.length>0&&(o=this.settings.diacritics?E(t)||null:u(t))&&e&&(o="\\b"+o),n.push({string:t,regex:o?RegExp(o,"iu"):null,field:r})}),n}getScoreFunction(t,e){var i=this.prepareSearch(t,e);return this._getScoreFunction(i)}_getScoreFunction(t){let e=t.tokens,i=e.length;if(!i)return function(){return 0};let s=t.options.fields,n=t.weights,r=s.length,o=t.getAttrFn;if(!r)return function(){return 1};let l=1===r?function(t,e){let i=s[0].field;return q(o(e,i),t,n[i]||1)}:function(t,e){var i=0;if(t.field){let s=o(e,t.field);!t.regex&&s?i+=1/r:i+=q(s,t,1)}else j(n,(s,n)=>{i+=q(o(e,n),t,s)});return i/r};return 1===i?function(t){return l(e[0],t)}:"and"===t.options.conjunction?function(t){var s,n=0;for(let i of e){if((s=l(i,t))<=0)return 0;n+=s}return n/i}:function(t){var s=0;return j(e,e=>{s+=l(e,t)}),s/i}}getSortFunction(t,e){var i=this.prepareSearch(t,e);return this._getSortFunction(i)}_getSortFunction(t){var e,i=[];let s=this,n=t.options,r=!t.query&&n.sort_empty?n.sort_empty:n.sort;if("function"==typeof r)return r.bind(this);let o=function(e,i){return"$score"===e?i.score:t.getAttrFn(s.items[i.id],e)};if(r)for(let e of r)(t.query||"$score"!==e.field)&&i.push(e);if(t.query){for(let t of(e=!0,i))if("$score"===t.field){e=!1;break}e&&i.unshift({field:"$score",direction:"desc"})}else i=i.filter(t=>"$score"!==t.field);return i.length?function(t,e){var s,n;for(let r of i)if(n=r.field,s=("desc"===r.direction?-1:1)*$(o(n,t),o(n,e)))return s;return 0}:null}prepareSearch(t,e){let i={};var s=Object.assign({},e);if(N(s,"sort"),N(s,"sort_empty"),s.fields){N(s,"fields");let t=[];s.fields.forEach(e=>{"string"==typeof e&&(e={field:e,weight:1}),t.push(e),i[e.field]="weight"in e?e.weight:1}),s.fields=t}return{options:s,query:t.toLowerCase().trim(),tokens:this.tokenize(t,s.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:s.nesting?P:T}}search(t,e){var i,s;e=(s=this.prepareSearch(t,e)).options,t=s.query;let n=e.score||this._getScoreFunction(s);t.length?j(this.items,(t,r)=>{i=n(t),(!1===e.filter||i>0)&&s.items.push({score:i,id:r})}):j(this.items,(t,e)=>{s.items.push({score:1,id:e})});let r=this._getSortFunction(s);return r&&s.items.sort(r),s.total=s.items.length,"number"==typeof e.limit&&(s.items=s.items.slice(0,e.limit)),s}}let D=t=>null==t?null:H(t),H=t=>"boolean"==typeof t?t?"1":"0":t+"",M=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),R=(t,e)=>e>0?window.setTimeout(t,e):(t.call(null),null),B=(t,e)=>{var i;return function(s,n){var r=this;i&&(r.loading=Math.max(r.loading-1,0),clearTimeout(i)),i=setTimeout(function(){i=null,r.loadedSearches[s]=!0,t.call(r,s,n)},e)}},z=(t,e,i)=>{var s,n=t.trigger,r={};for(s of(t.trigger=function(){var i=arguments[0];if(-1===e.indexOf(i))return n.apply(t,arguments);r[i]=arguments},i.apply(t,[]),t.trigger=n,e))s in r&&n.apply(t,r[s])},K=t=>({start:t.selectionStart||0,length:(t.selectionEnd||0)-(t.selectionStart||0)}),Q=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},G=(t,e,i,s)=>{t.addEventListener(e,i,s)},U=(t,e)=>!!e&&!!e[t]&&1==+!!e.altKey+ +!!e.ctrlKey+ +!!e.shiftKey+ +!!e.metaKey,J=(t,e)=>t.getAttribute("id")||(t.setAttribute("id",e),e),W=t=>t.replace(/[\\"']/g,"\\$&"),X=(t,e)=>{e&&t.append(e)},Y=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},Z=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(tt(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},tt=t=>!!("string"==typeof t&&t.indexOf("<")>-1),te=t=>t.replace(/['"\\]/g,"\\$&"),ti=(t,e)=>{var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!1),t.dispatchEvent(i)},ts=(t,e)=>{Object.assign(t.style,e)},tn=(t,...e)=>{var i=to(e);(t=tl(t)).map(t=>{i.map(e=>{t.classList.add(e)})})},tr=(t,...e)=>{var i=to(e);(t=tl(t)).map(t=>{i.map(e=>{t.classList.remove(e)})})},to=t=>{var e=[];return Y(t,t=>{"string"==typeof t&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},tl=t=>(Array.isArray(t)||(t=[t]),t),ta=(t,e,i)=>{if(!i||i.contains(t))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}},td=(t,e=0)=>e>0?t[t.length-1]:t[0],tc=t=>0===Object.keys(t).length,th=(t,e)=>{if(!t)return -1;e=e||t.nodeName;for(var i=0;t=t.previousElementSibling;)t.matches(e)&&i++;return i},tu=(t,e)=>{Y(e,(e,i)=>{null==e?t.removeAttribute(i):t.setAttribute(i,""+e)})},tp=(t,e)=>{t.parentNode&&t.parentNode.replaceChild(e,t)},tg=(t,e)=>{if(null===e)return;if("string"==typeof e){if(!e.length)return;e=RegExp(e,"i")}let i=t=>{var i=t.data.match(e);if(i&&t.data.length>0){var s=document.createElement("span");s.className="highlight";var n=t.splitText(i.index);n.splitText(i[0].length);var r=n.cloneNode(!0);return s.appendChild(r),tp(n,s),1}return 0},s=t=>{1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&("highlight"!==t.className||"SPAN"!==t.tagName)&&Array.from(t.childNodes).forEach(t=>{n(t)})},n=t=>3===t.nodeType?i(t):(s(t),0);n(t)},tf=t=>{var e=t.querySelectorAll("span.highlight");Array.prototype.forEach.call(e,function(t){var e=t.parentNode;e.replaceChild(t.firstChild,t),e.normalize()})},tm="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey",tv={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(t){return t.length>0},render:{}};function ty(t,e){var i,s,n,r,o,l,a,d=Object.assign({},tv,e),c=d.dataAttr,h=d.labelField,u=d.valueField,p=d.disabledField,g=d.optgroupField,f=d.optgroupLabelField,m=d.optgroupValueField,v=t.tagName.toLowerCase(),y=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!y&&!d.allowEmptyOption){let e=t.querySelector('option[value=""]');e&&(y=e.textContent)}var O={placeholder:y,options:[],optgroups:[],items:[],maxItems:null};if("select"===v){let e;s=O.options,n={},r=1,e=0,o=t=>{var e=Object.assign({},t.dataset),i=c&&e[c];return"string"==typeof i&&i.length&&(e=Object.assign(e,JSON.parse(i))),e},l=(t,i)=>{var r=D(t.value);if(null!=r&&(r||d.allowEmptyOption)){if(n.hasOwnProperty(r)){if(i){var l=n[r][g];l?Array.isArray(l)?l.push(i):n[r][g]=[l,i]:n[r][g]=i}}else{var a=o(t);a[h]=a[h]||t.textContent,a[u]=a[u]||r,a[p]=a[p]||t.disabled,a[g]=a[g]||i,a.$option=t,a.$order=a.$order||++e,n[r]=a,s.push(a)}t.selected&&O.items.push(r)}},a=t=>{var i,s;(s=o(t))[f]=s[f]||t.getAttribute("label")||"",s[m]=s[m]||r++,s[p]=s[p]||t.disabled,s.$order=s.$order||++e,O.optgroups.push(s),i=s[m],Y(t.children,t=>{l(t,i)})},O.maxItems=t.hasAttribute("multiple")?null:1,Y(t.children,t=>{"optgroup"===(i=t.tagName.toLowerCase())?a(t):"option"===i&&l(t)})}else(()=>{let e=t.getAttribute(c);if(e)O.options=JSON.parse(e),Y(O.options,t=>{O.items.push(t[u])});else{var i=t.value.trim()||"";if(!d.allowEmptyOption&&!i.length)return;let e=i.split(d.delimiter);Y(e,t=>{let e={};e[h]=t,e[u]=t,O.options.push(e)}),O.items=e}})();return Object.assign({},tv,O,e)}var tO=0;class tb extends l(o){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,tO++;var i,s,n=Z(t);if(n.tomselect)throw Error("Tom Select already initialized on this element");n.tomselect=this,i=(window.getComputedStyle&&window.getComputedStyle(n,null)).getPropertyValue("direction");let r=ty(n,e);this.settings=r,this.input=n,this.tabIndex=n.tabIndex||0,this.is_select_tag="select"===n.tagName.toLowerCase(),this.rtl=/rtl/i.test(i),this.inputId=J(n,"tomselect-"+tO),this.isRequired=n.required,this.sifter=new V(this.options,{diacritics:r.diacritics}),r.mode=r.mode||(1===r.maxItems?"single":"multi"),"boolean"!=typeof r.hideSelected&&(r.hideSelected="multi"===r.mode),"boolean"!=typeof r.hidePlaceholder&&(r.hidePlaceholder="multi"!==r.mode);var o=r.createFilter;"function"!=typeof o&&("string"==typeof o&&(o=new RegExp(o)),o instanceof RegExp?r.createFilter=t=>o.test(t):r.createFilter=t=>this.settings.duplicates||!this.options[t]),this.initializePlugins(r.plugins),this.setupCallbacks(),this.setupTemplates();let l=Z("<div>"),a=Z("<div>"),d=this._render("dropdown"),c=Z('<div role="listbox" tabindex="-1">'),h=this.input.getAttribute("class")||"",u=r.mode;(tn(l,r.wrapperClass,h,u),tn(a,r.controlClass),X(l,a),tn(d,r.dropdownClass,u),r.copyClassesToDropdown&&tn(d,h),tn(c,r.dropdownContentClass),X(d,c),Z(r.dropdownParent||l).appendChild(d),tt(r.controlInput))?(s=Z(r.controlInput),Y(["autocorrect","autocapitalize","autocomplete","spellcheck"],t=>{n.getAttribute(t)&&tu(s,{[t]:n.getAttribute(t)})}),s.tabIndex=-1,a.appendChild(s),this.focus_node=s):r.controlInput?(s=Z(r.controlInput),this.focus_node=s):(s=Z("<input/>"),this.focus_node=a),this.wrapper=l,this.dropdown=d,this.dropdown_content=c,this.control=a,this.control_input=s,this.setup()}setup(){let t=this,e=t.settings,i=t.control_input,s=t.dropdown,n=t.dropdown_content,r=t.wrapper,o=t.control,l=t.input,a=t.focus_node,d={passive:!0},c=t.inputId+"-ts-dropdown";tu(n,{id:c}),tu(a,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":c});let h=J(a,t.inputId+"-ts-control"),p="label[for='"+te(t.inputId)+"']",g=document.querySelector(p),f=t.focus.bind(t);if(g){G(g,"click",f),tu(g,{for:h});let e=J(g,t.inputId+"-ts-label");tu(a,{"aria-labelledby":e}),tu(n,{"aria-labelledby":e})}r.style.width=l.style.width,t.plugins.names.length&&tn([r,s],"plugin-"+t.plugins.names.join(" plugin-")),(null===e.maxItems||e.maxItems>1)&&t.is_select_tag&&tu(l,{multiple:"multiple"}),e.placeholder&&tu(i,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=RegExp("\\s*"+u(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=B(e.load,e.loadThrottle)),G(s,"mousemove",()=>{t.ignoreHover=!1}),G(s,"mouseenter",e=>{var i=ta(e.target,"[data-selectable]",s);i&&t.onOptionHover(e,i)},{capture:!0}),G(s,"click",e=>{let i=ta(e.target,"[data-selectable]");i&&(t.onOptionSelect(e,i),Q(e,!0))}),G(o,"click",e=>{var s=ta(e.target,"[data-ts-item]",o);if(s&&t.onItemSelect(e,s)){Q(e,!0);return}""==i.value&&(t.onClick(),Q(e,!0))}),G(a,"keydown",e=>t.onKeyDown(e)),G(i,"keypress",e=>t.onKeyPress(e)),G(i,"input",e=>t.onInput(e)),G(a,"blur",e=>t.onBlur(e)),G(a,"focus",e=>t.onFocus(e)),G(i,"paste",e=>t.onPaste(e));let m=e=>{let n=e.composedPath()[0];if(!r.contains(n)&&!s.contains(n)){t.isFocused&&t.blur(),t.inputState();return}n==i&&t.isOpen?e.stopPropagation():Q(e,!0)},v=()=>{t.isOpen&&t.positionDropdown()};G(document,"mousedown",m),G(window,"scroll",v,d),G(window,"resize",v,d),this._destroy=()=>{document.removeEventListener("mousedown",m),window.removeEventListener("scroll",v),window.removeEventListener("resize",v),g&&g.removeEventListener("click",f)},this.revertSettings={innerHTML:l.innerHTML,tabIndex:l.tabIndex},l.tabIndex=-1,l.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,G(l,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,l.disabled?t.disable():l.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),tn(l,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),!0===e.preload&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),Y(e,t=>{this.registerOptionGroup(t)})}setupTemplates(){var t=this.settings.labelField,e=this.settings.optgroupLabelField;this.settings.render=Object.assign({},{optgroup:t=>{let e=document.createElement("div");return e.className="optgroup",e.appendChild(t.options),e},optgroup_header:(t,i)=>'<div class="optgroup-header">'+i(t[e])+"</div>",option:(e,i)=>"<div>"+i(e[t])+"</div>",item:(e,i)=>"<div>"+i(e[t])+"</div>",option_create:(t,e)=>'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"},this.settings.render)}setupCallbacks(){var t,e,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in i)(e=this.settings[i[t]])&&this.on(t,e)}sync(t=!0){let e=t?ty(this.input,{delimiter:this.settings.delimiter}):this.settings;this.setupOptions(e.options,e.optgroups),this.setValue(e.items||[],!0),this.lastQuery=null}onClick(){if(this.activeItems.length>0){this.clearActiveItems(),this.focus();return}this.isFocused&&this.isOpen?this.blur():this.focus()}onMouseDown(){}onChange(){ti(this.input,"input"),ti(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){Q(t);return}e.settings.splitOn&&setTimeout(()=>{var t=e.inputValue();t.match(e.settings.splitOn)&&Y(t.trim().split(e.settings.splitOn),t=>{D(t)&&(this.options[t]?e.addItem(t):e.createItem(t))})},0)}onKeyPress(t){if(this.isLocked){Q(t);return}var e=String.fromCharCode(t.keyCode||t.which);if(this.settings.create&&"multi"===this.settings.mode&&e===this.settings.delimiter){this.createItem(),Q(t);return}}onKeyDown(t){if(this.ignoreHover=!0,this.isLocked){9!==t.keyCode&&Q(t);return}switch(t.keyCode){case 65:if(U(tm,t)&&""==this.control_input.value){Q(t),this.selectAll();return}break;case 27:this.isOpen&&(Q(t,!0),this.close()),this.clearActiveItems();return;case 40:if(!this.isOpen&&this.hasOptions)this.open();else if(this.activeOption){let t=this.getAdjacent(this.activeOption,1);t&&this.setActiveOption(t)}Q(t);return;case 38:if(this.activeOption){let t=this.getAdjacent(this.activeOption,-1);t&&this.setActiveOption(t)}Q(t);return;case 13:this.canSelect(this.activeOption)?(this.onOptionSelect(t,this.activeOption),Q(t)):this.settings.create&&this.createItem()?Q(t):document.activeElement==this.control_input&&this.isOpen&&Q(t);return;case 37:this.advanceSelection(-1,t);return;case 39:this.advanceSelection(1,t);return;case 9:this.settings.selectOnTab&&(this.canSelect(this.activeOption)&&(this.onOptionSelect(t,this.activeOption),Q(t)),this.settings.create&&this.createItem()&&Q(t));return;case 8:case 46:this.deleteSelection(t);return}this.isInputHidden&&!U(tm,t)&&Q(t)}onInput(t){if(this.isLocked)return;let e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,""==e){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=R(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){let t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this.isFocused;if(this.isDisabled||this.isReadOnly){this.blur(),Q(t);return}this.ignoreFocus||(this.isFocused=!0,"focus"===this.settings.preload&&this.preload(),e||this.trigger("focus"),this.activeItems.length||(this.inputState(),this.refreshOptions(!!this.settings.openOnFocus)),this.refreshState())}onBlur(t){if(!1!==document.hasFocus()){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var i=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,i):i()}}}onOptionSelect(t,e){var i,s=this;!(e.parentElement&&e.parentElement.matches("[data-disabled]"))&&(e.classList.contains("create")?s.createItem(null,()=>{s.settings.closeAfterSelect&&s.close()}):void 0!==(i=e.dataset.value)&&(s.lastQuery=null,s.addItem(i),s.settings.closeAfterSelect&&s.close(),!s.settings.hideSelected&&t.type&&/click/.test(t.type)&&s.setActiveOption(e)))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){return!this.isLocked&&"multi"===this.settings.mode&&(Q(t),this.setActiveItem(e,t),!0)}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){if(!this.canLoad(t))return;tn(this.wrapper,this.settings.loadingClass),this.loading++;let e=this.loadCallback.bind(this);this.settings.load.call(this,t,e)}loadCallback(t,e){this.loading=Math.max(this.loading-1,0),this.lastQuery=null,this.clearActiveOption(),this.setupOptions(t,e),this.refreshOptions(this.isFocused&&!this.isInputHidden),this.loading||tr(this.wrapper,this.settings.loadingClass),this.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input;e.value!==t&&(e.value=t,ti(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){z(this,e?[]:["change"],()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){0===t&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var i,s,n,r,o,l;if("single"!==this.settings.mode){if(!t){this.clearActiveItems(),this.isFocused&&this.inputState();return}if("click"===(i=e&&e.type.toLowerCase())&&U("shiftKey",e)&&this.activeItems.length){for(l=this.getLastActive(),(n=Array.prototype.indexOf.call(this.control.children,l))>(r=Array.prototype.indexOf.call(this.control.children,t))&&(o=n,n=r,r=o),s=n;s<=r;s++)t=this.control.children[s],-1===this.activeItems.indexOf(t)&&this.setActiveItemClass(t);Q(e)}else"click"===i&&U(tm,e)||"keydown"===i&&U("shiftKey",e)?t.classList.contains("active")?this.removeActiveItem(t):this.setActiveItemClass(t):(this.clearActiveItems(),this.setActiveItemClass(t));this.inputState(),this.isFocused||this.focus()}}setActiveItemClass(t){let e=this.control.querySelector(".last-active");e&&tr(e,"last-active"),tn(t,"active last-active"),this.trigger("item_select",t),-1==this.activeItems.indexOf(t)&&this.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),tr(t,"active")}clearActiveItems(){tr(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,tu(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),tu(t,{"aria-selected":"true"}),tn(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;let i=this.dropdown_content,s=i.clientHeight,n=i.scrollTop||0,r=t.offsetHeight,o=t.getBoundingClientRect().top-i.getBoundingClientRect().top+n;o+r>s+n?this.scroll(o-s+r,e):o<n&&this.scroll(o,e)}scroll(t,e){let i=this.dropdown_content;e&&(i.style.scrollBehavior=e),i.scrollTop=t,i.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(tr(this.activeOption,"active"),tu(this.activeOption,{"aria-selected":null})),this.activeOption=null,tu(this.focus_node,{"aria-activedescendant":null})}selectAll(){let t=this;if("single"===t.settings.mode)return;let e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,Y(e,e=>{t.setActiveItemClass(e)}))}inputState(){this.control.contains(this.control_input)&&(tu(this.control_input,{placeholder:this.settings.placeholder}),this.activeItems.length>0||!this.isFocused&&this.settings.hidePlaceholder&&this.items.length>0?(this.setTextboxValue(),this.isInputHidden=!0):(this.settings.hidePlaceholder&&this.items.length>0&&tu(this.control_input,{placeholder:""}),this.isInputHidden=!1),this.wrapper.classList.toggle("input-hidden",this.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return"string"==typeof t.sortField&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,i,s=this,n=this.getSearchOptions();if(s.settings.score&&"function"!=typeof(i=s.settings.score.call(s,t)))throw Error('Tom Select "score" setting must be a function that returns a function');return t!==s.lastQuery?(s.lastQuery=t,e=s.sifter.search(t,Object.assign(n,{score:i})),s.currentResults=e):e=Object.assign({},s.currentResults),s.settings.hideSelected&&(e.items=e.items.filter(t=>{let e=D(t.id);return!(e&&-1!==s.items.indexOf(e))})),e}refreshOptions(t=!0){let e={},i=[];var s,n,r,o,l,a,d,c,h,u,p=this,g=p.inputValue();let f=g===p.lastQuery||""==g&&null==p.lastQuery;var m=p.search(g),v=null,y=p.settings.shouldOpen||!1,O=p.dropdown_content;f&&(v=p.activeOption)&&(h=v.closest("[data-group]")),o=m.items.length,"number"==typeof p.settings.maxOptions&&(o=Math.min(o,p.settings.maxOptions)),o>0&&(y=!0);let b=(t,s)=>{let n=e[t];if(void 0!==n){let t=i[n];if(void 0!==t)return[n,t.fragment]}let r=document.createDocumentFragment();return n=i.length,i.push({fragment:r,order:s,optgroup:t}),[n,r]};for(s=0;s<o;s++){let t=m.items[s];if(!t)continue;let i=t.id,o=p.options[i];if(void 0===o)continue;let d=H(i),c=p.getOption(d,!0);for(p.settings.hideSelected||c.classList.toggle("selected",p.items.includes(d)),n=0,r=(a=Array.isArray(l=o[p.settings.optgroupField]||"")?l:[l])&&a.length;n<r;n++){l=a[n];let t=o.$order,s=p.optgroups[l];void 0===s?l="":t=s.$order;let[r,d]=b(l,t);n>0&&(tu(c=c.cloneNode(!0),{id:o.$id+"-clone-"+n,"aria-selected":null}),c.classList.add("ts-cloned"),tr(c,"active"),p.activeOption&&p.activeOption.dataset.value==i&&h&&h.dataset.group===l.toString()&&(v=c)),d.appendChild(c),""!=l&&(e[l]=r)}}p.settings.lockOptgroupOrder&&i.sort((t,e)=>t.order-e.order),d=document.createDocumentFragment(),Y(i,t=>{let e=t.fragment,i=t.optgroup;if(!e||!e.children.length)return;let s=p.optgroups[i];if(void 0!==s){let t=document.createDocumentFragment();X(t,p.render("optgroup_header",s)),X(t,e),X(d,p.render("optgroup",{group:s,options:t}))}else X(d,e)}),O.innerHTML="",X(O,d),p.settings.highlight&&(tf(O),m.query.length&&m.tokens.length&&Y(m.tokens,t=>{tg(O,t.regex)}));var w=t=>{let e=p.render(t,{input:g});return e&&(y=!0,O.insertBefore(e,O.firstChild)),e};if(p.loading?w("loading"):p.settings.shouldLoad.call(p,g)?0===m.items.length&&w("no_results"):w("not_loading"),(c=p.canCreate(g))&&(u=w("option_create")),p.hasOptions=m.items.length>0||c,y){if(m.items.length>0){if(v||"single"!==p.settings.mode||void 0==p.items[0]||(v=p.getOption(p.items[0])),!O.contains(v)){let t=0;u&&!p.settings.addPrecedence&&(t=1),v=p.selectable()[t]}}else u&&(v=u);t&&!p.isOpen&&(p.open(),p.scrollToOption(v,"auto")),p.setActiveOption(v)}else p.clearActiveOption(),t&&p.isOpen&&p.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){if(Array.isArray(t))return this.addOptions(t,e),!1;let i=D(t[this.settings.valueField]);return!(null===i||this.options.hasOwnProperty(i))&&(t.$order=t.$order||++this.order,t.$id=this.inputId+"-opt-"+t.$order,this.options[i]=t,this.lastQuery=null,e&&(this.userOptions[i]=e,this.trigger("option_add",i,t)),i)}addOptions(t,e=!1){Y(t,t=>{this.addOption(t,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=D(t[this.settings.optgroupValueField]);return null!==e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var i;e[this.settings.optgroupValueField]=t,(i=this.registerOptionGroup(e))&&this.trigger("optgroup_add",i,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){var i,s;let n=D(t),r=D(e[this.settings.valueField]);if(null===n)return;let o=this.options[n];if(void 0==o)return;if("string"!=typeof r)throw Error("Value must be set in option data");let l=this.getOption(n),a=this.getItem(n);if(e.$order=e.$order||o.$order,delete this.options[n],this.uncacheValue(r),this.options[r]=e,l){if(this.dropdown_content.contains(l)){let t=this._render("option",e);tp(l,t),this.activeOption===l&&this.setActiveOption(t)}l.remove()}a&&(-1!==(s=this.items.indexOf(n))&&this.items.splice(s,1,r),i=this._render("item",e),a.classList.contains("active")&&tn(i,"active"),tp(a,i)),this.lastQuery=null}removeOption(t,e){t=H(t),this.uncacheValue(t),delete this.userOptions[t],delete this.options[t],this.lastQuery=null,this.trigger("option_remove",t),this.removeItem(t,e)}clearOptions(t){let e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();let i={};Y(this.options,(t,s)=>{e(t,s)&&(i[s]=t)}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){let i=D(t);if(null===i)return null;let s=this.options[i];if(void 0!=s){if(s.$div)return s.$div;if(e)return this._render("option",s)}return null}getAdjacent(t,e,i="option"){var s;if(!t)return null;s="item"==i?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]");for(let i=0;i<s.length;i++)if(s[i]==t){if(e>0)return s[i+1];return s[i-1]}return null}getItem(t){if("object"==typeof t)return t;var e=D(t);return null!==e?this.control.querySelector(`[data-value="${W(e)}"]`):null}addItems(t,e){var i=this,s=Array.isArray(t)?t:[t];let n=(s=s.filter(t=>-1===i.items.indexOf(t)))[s.length-1];s.forEach(t=>{i.isPending=t!==n,i.addItem(t,e)})}addItem(t,e){z(this,e?[]:["change","dropdown_close"],()=>{var i,s;let n=this.settings.mode,r=D(t);if((!r||-1===this.items.indexOf(r)||("single"===n&&this.close(),"single"!==n&&this.settings.duplicates))&&null!==r&&this.options.hasOwnProperty(r)&&("single"===n&&this.clear(e),!("multi"===n&&this.isFull()))){if(i=this._render("item",this.options[r]),this.control.contains(i)&&(i=i.cloneNode(!0)),s=this.isFull(),this.items.splice(this.caretPos,0,r),this.insertAtCaret(i),this.isSetup){if(!this.isPending&&this.settings.hideSelected){let t=this.getOption(r),e=this.getAdjacent(t,1);e&&this.setActiveOption(e)}this.isPending||this.settings.closeAfterSelect||this.refreshOptions(this.isFocused&&"single"!==n),!1!=this.settings.closeAfterSelect&&this.isFull()?this.close():this.isPending||this.positionDropdown(),this.trigger("item_add",r,i),this.isPending||this.updateOriginalInput({silent:e})}(!this.isPending||!s&&this.isFull())&&(this.inputState(),this.refreshState())}})}removeItem(t=null,e){var i,s;if(!(t=this.getItem(t)))return;let n=t.dataset.value;i=th(t),t.remove(),t.classList.contains("active")&&(s=this.activeItems.indexOf(t),this.activeItems.splice(s,1),tr(t,"active")),this.items.splice(i,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(n)&&this.removeOption(n,e),i<this.caretPos&&this.setCaret(this.caretPos-1),this.updateOriginalInput({silent:e}),this.refreshState(),this.positionDropdown(),this.trigger("item_remove",n,t)}createItem(t=null,e=()=>{}){3==arguments.length&&(e=arguments[2]),"function"!=typeof e&&(e=()=>{});var i,s=this,n=s.caretPos;if(t=t||s.inputValue(),!s.canCreate(t))return e(),!1;s.lock();var r=!1,o=t=>{if(s.unlock(),!t||"object"!=typeof t)return e();var i=D(t[s.settings.valueField]);if("string"!=typeof i)return e();s.setTextboxValue(),s.addOption(t,!0),s.setCaret(n),s.addItem(i),e(t),r=!0};return i="function"==typeof s.settings.create?s.settings.create.call(this,t,o):{[s.settings.labelField]:t,[s.settings.valueField]:t},r||o(i),!0}refreshItems(){this.lastQuery=null,this.isSetup&&this.addItems(this.items),this.updateOriginalInput(),this.refreshState()}refreshState(){this.refreshValidityState();let t=this.isFull(),e=this.isLocked;this.wrapper.classList.toggle("rtl",this.rtl);let i=this.wrapper.classList;i.toggle("focus",this.isFocused),i.toggle("disabled",this.isDisabled),i.toggle("readonly",this.isReadOnly),i.toggle("required",this.isRequired),i.toggle("invalid",!this.isValid),i.toggle("locked",e),i.toggle("full",t),i.toggle("input-active",this.isFocused&&!this.isInputHidden),i.toggle("dropdown-active",this.isOpen),i.toggle("has-options",tc(this.options)),i.toggle("has-items",this.items.length>0)}refreshValidityState(){this.input.validity&&(this.isValid=this.input.validity.valid,this.isInvalid=!this.isValid)}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){var e,i;let s=this,n=s.input.querySelector('option[value=""]');if(s.is_select_tag){let t=[],o=s.input.querySelectorAll("option:checked").length;function r(e,i,r){return e||(e=Z('<option value="'+M(i)+'">'+M(r)+"</option>")),e!=n&&s.input.append(e),t.push(e),(e!=n||o>0)&&(e.selected=!0),e}s.input.querySelectorAll("option:checked").forEach(t=>{t.selected=!1}),0==s.items.length&&"single"==s.settings.mode?r(n,"",""):s.items.forEach(n=>{i=(e=s.options[n])[s.settings.labelField]||"",t.includes(e.$option)?r(s.input.querySelector(`option[value="${W(n)}"]:not(:checked)`),n,i):e.$option=r(e.$option,n,i)})}else s.input.value=s.getValue();s.isSetup&&!t.silent&&s.trigger("change",s.getValue())}open(){this.isLocked||this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.isOpen=!0,tu(this.focus_node,{"aria-expanded":"true"}),this.refreshState(),ts(this.dropdown,{visibility:"hidden",display:"block"}),this.positionDropdown(),ts(this.dropdown,{visibility:"visible",display:"block"}),this.focus(),this.trigger("dropdown_open",this.dropdown))}close(t=!0){var e=this.isOpen;t&&(this.setTextboxValue(),"single"===this.settings.mode&&this.items.length&&this.inputState()),this.isOpen=!1,tu(this.focus_node,{"aria-expanded":"false"}),ts(this.dropdown,{display:"none"}),this.settings.hideSelected&&this.clearActiveOption(),this.refreshState(),e&&this.trigger("dropdown_close",this.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var t=this.control,e=t.getBoundingClientRect(),i=t.offsetHeight+e.top+window.scrollY,s=e.left+window.scrollX;ts(this.dropdown,{width:e.width+"px",top:i+"px",left:s+"px"})}}clear(t){var e=this;e.items.length&&(Y(e.controlChildren(),t=>{e.removeItem(t,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear"))}insertAtCaret(t){let e=this.caretPos,i=this.control;i.insertBefore(t,i.children[e]||null),this.setCaret(e+1)}deleteSelection(t){var e,i,s;e=t&&8===t.keyCode?-1:1,i=K(this.control_input);let n=[];if(this.activeItems.length)s=th(td(this.activeItems,e)),e>0&&s++,Y(this.activeItems,t=>n.push(t));else if((this.isFocused||"single"===this.settings.mode)&&this.items.length){let t;let s=this.controlChildren();e<0&&0===i.start&&0===i.length?t=s[this.caretPos-1]:e>0&&i.start===this.inputValue().length&&(t=s[this.caretPos]),void 0!==t&&n.push(t)}if(!this.shouldDelete(n,t))return!1;for(Q(t,!0),void 0!==s&&this.setCaret(s);n.length;)this.removeItem(n.pop());return this.inputState(),this.positionDropdown(),this.refreshOptions(!1),!0}shouldDelete(t,e){let i=t.map(t=>t.dataset.value);return!!i.length&&("function"!=typeof this.settings.onDelete||!1!==this.settings.onDelete(i,e))}advanceSelection(t,e){var i,s;this.rtl&&(t*=-1),!this.inputValue().length&&(U(tm,e)||U("shiftKey",e)?(s=(i=this.getLastActive(t))?i.classList.contains("active")?this.getAdjacent(i,t,"item"):i:t>0?this.control_input.nextElementSibling:this.control_input.previousElementSibling)&&(s.classList.contains("active")&&this.removeActiveItem(i),this.setActiveItemClass(s)):this.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var i=this.control.querySelectorAll(".active");if(i)return td(i,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this.revertSettings;this.trigger("destroy"),this.off(),this.wrapper.remove(),this.dropdown.remove(),this.input.innerHTML=t.innerHTML,this.input.tabIndex=t.tabIndex,tr(this.input,"tomselected","ts-hidden-accessible"),this._destroy(),delete this.input.tomselect}render(t,e){var i;if("function"!=typeof this.settings.render[t]||!(i=this.settings.render[t].call(this,e,M)))return null;if(i=Z(i),"option"===t||"option_create"===t?e[this.settings.disabledField]?tu(i,{"aria-disabled":"true"}):tu(i,{"data-selectable":""}):"optgroup"===t&&(tu(i,{"data-group":e.group[this.settings.optgroupValueField]}),e.group[this.settings.disabledField]&&tu(i,{"data-disabled":""})),"option"===t||"item"===t){let s=H(e[this.settings.valueField]);tu(i,{"data-value":s}),"item"===t?(tn(i,this.settings.itemClass),tu(i,{"data-ts-item":""})):(tn(i,this.settings.optionClass),tu(i,{role:"option",id:e.$id}),e.$div=i,this.options[s]=e)}return i}_render(t,e){let i=this.render(t,e);if(null==i)throw"HTMLElement expected";return i}clearCache(){Y(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){let e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,i){var s=this,n=s[e];s[e]=function(){var e,r;return("after"===t&&(e=n.apply(s,arguments)),r=i.apply(s,arguments),"instead"===t)?r:("before"===t&&(e=n.apply(s,arguments)),e)}}}let tw=(t,e,i,s)=>{t.addEventListener(e,i,s)},t_=t=>null==t?null:tA(t),tA=t=>"boolean"==typeof t?t?"1":"0":t+"",tC=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},tS=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(tI(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},tI=t=>!!("string"==typeof t&&t.indexOf("<")>-1),tk=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(tx(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},tx=t=>!!("string"==typeof t&&t.indexOf("<")>-1),tL=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},tF=(t,e,i,s)=>{t.addEventListener(e,i,s)},tE=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},tT=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(tP(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},tP=t=>!!("string"==typeof t&&t.indexOf("<")>-1),tq=(t,e)=>{tE(e,(e,i)=>{null==e?t.removeAttribute(i):t.setAttribute(i,""+e)})},tN=(t,e)=>{var i;null==(i=t.parentNode)||i.insertBefore(e,t.nextSibling)},tj=(t,e)=>{var i;null==(i=t.parentNode)||i.insertBefore(e,t)},t$=(t,e)=>{do{var i;if(t==(e=null==(i=e)?void 0:i.previousElementSibling))return!0}while(e&&e.previousElementSibling)return!1},tV=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},tD=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(tH(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},tH=t=>!!("string"==typeof t&&t.indexOf("<")>-1),tM=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},tR=(t,...e)=>{var i=tB(e);(t=tz(t)).map(t=>{i.map(e=>{t.classList.remove(e)})})},tB=t=>{var e=[];return tM(t,t=>{"string"==typeof t&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},tz=t=>(Array.isArray(t)||(t=[t]),t),tK=(t,e)=>{if(!t)return -1;e=e||t.nodeName;for(var i=0;t=t.previousElementSibling;)t.matches(e)&&i++;return i},tQ=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},tG=(t,e,i,s)=>{t.addEventListener(e,i,s)},tU=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},tJ=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(tW(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},tW=t=>!!("string"==typeof t&&t.indexOf("<")>-1),tX=(t,...e)=>{var i=tY(e);(t=tZ(t)).map(t=>{i.map(e=>{t.classList.add(e)})})},tY=t=>{var e=[];return tU(t,t=>{"string"==typeof t&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},tZ=t=>(Array.isArray(t)||(t=[t]),t),t0=(t,e,i,s)=>{t.addEventListener(e,i,s)},t1=(t,e,i)=>{for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}},t9=(t,e)=>{if(!t)return -1;e=e||t.nodeName;for(var i=0;t=t.previousElementSibling;)t.matches(e)&&i++;return i},t3=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),t7=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},t2=(t,e,i,s)=>{t.addEventListener(e,i,s)},t5=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(t6(t)){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},t6=t=>!!("string"==typeof t&&t.indexOf("<")>-1),t8=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},t4=(t,...e)=>{var i=et(e);(t=ee(t)).map(t=>{i.map(e=>{t.classList.add(e)})})},et=t=>{var e=[];return t8(t,t=>{"string"==typeof t&&(t=t.trim().split(/[\t\n\f\r\s]/)),Array.isArray(t)&&(e=e.concat(t))}),e.filter(Boolean)},ee=t=>(Array.isArray(t)||(t=[t]),t);tb.define("change_listener",function(){tw(this.input,"change",()=>{this.sync()})}),tb.define("checkbox_options",function(t){var e=this,i=e.onOptionSelect;e.settings.hideSelected=!1;let s=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},t);var n=function(t,e){e?(t.checked=!0,s.uncheckedClassNames&&t.classList.remove(...s.uncheckedClassNames),s.checkedClassNames&&t.classList.add(...s.checkedClassNames)):(t.checked=!1,s.checkedClassNames&&t.classList.remove(...s.checkedClassNames),s.uncheckedClassNames&&t.classList.add(...s.uncheckedClassNames))},r=function(t){setTimeout(()=>{var e=t.querySelector("input."+s.className);e instanceof HTMLInputElement&&n(e,t.classList.contains("selected"))},1)};e.hook("after","setupTemplates",()=>{var t=e.settings.render.option;e.settings.render.option=(i,r)=>{var o=tS(t.call(e,i,r)),l=document.createElement("input");s.className&&l.classList.add(s.className),l.addEventListener("click",function(t){tC(t)}),l.type="checkbox";let a=t_(i[e.settings.valueField]);return n(l,!!(a&&e.items.indexOf(a)>-1)),o.prepend(l),o}}),e.on("item_remove",t=>{var i=e.getOption(t);i&&(i.classList.remove("selected"),r(i))}),e.on("item_add",t=>{var i=e.getOption(t);i&&r(i)}),e.hook("instead","onOptionSelect",(t,s)=>{if(s.classList.contains("selected")){s.classList.remove("selected"),e.removeItem(s.dataset.value),e.refreshOptions(),tC(t,!0);return}i.call(e,t,s),r(s)})}),tb.define("clear_button",function(t){let e=this,i=Object.assign({className:"clear-button",title:"Clear All",html:t=>`<div class="${t.className}" title="${t.title}">&#10799;</div>`},t);e.on("initialize",()=>{var t=tk(i.html(i));t.addEventListener("click",t=>{e.isLocked||(e.clear(),"single"===e.settings.mode&&e.settings.allowEmptyOption&&e.addItem(""),t.preventDefault(),t.stopPropagation())}),e.control.appendChild(t)})}),tb.define("drag_drop",function(){let t;var e=this;if("multi"!==e.settings.mode)return;var i=e.lock,s=e.unlock;let n=!0;e.hook("after","setupTemplates",()=>{var i=e.settings.render.item;e.settings.render.item=(s,r)=>{let o=tT(i.call(e,s,r));tq(o,{draggable:"true"});let l=e=>{e.preventDefault(),o.classList.add("ts-drag-over"),a(o,t)},a=(t,e)=>{void 0!==e&&(t$(e,o)?tN(t,e):tj(t,e))};return tF(o,"mousedown",t=>{n||tL(t),t.stopPropagation()}),tF(o,"dragstart",e=>{t=o,setTimeout(()=>{o.classList.add("ts-dragging")},0)}),tF(o,"dragenter",l),tF(o,"dragover",l),tF(o,"dragleave",()=>{o.classList.remove("ts-drag-over")}),tF(o,"dragend",()=>{document.querySelectorAll(".ts-drag-over").forEach(t=>t.classList.remove("ts-drag-over")),null==(i=t)||i.classList.remove("ts-dragging"),t=void 0;var i,s=[];e.control.querySelectorAll("[data-value]").forEach(t=>{if(t.dataset.value){let e=t.dataset.value;e&&s.push(e)}}),e.setValue(s)}),o}}),e.hook("instead","lock",()=>(n=!1,i.call(e))),e.hook("instead","unlock",()=>(n=!0,s.call(e)))}),tb.define("dropdown_header",function(t){let e=this,i=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:t=>'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a class="'+t.closeClass+'">&times;</a></div></div>'},t);e.on("initialize",()=>{var t=tD(i.html(i)),s=t.querySelector("."+i.closeClass);s&&s.addEventListener("click",t=>{tV(t,!0),e.close()}),e.dropdown.insertBefore(t,e.dropdown.firstChild)})}),tb.define("caret_position",function(){var t=this;t.hook("instead","setCaret",e=>{"single"!==t.settings.mode&&t.control.contains(t.control_input)?(e=Math.max(0,Math.min(t.items.length,e)))==t.caretPos||t.isPending||t.controlChildren().forEach((i,s)=>{s<e?t.control_input.insertAdjacentElement("beforebegin",i):t.control.appendChild(i)}):e=t.items.length,t.caretPos=e}),t.hook("instead","moveCaret",e=>{if(!t.isFocused)return;let i=t.getLastActive(e);if(i){let s=tK(i);t.setCaret(e>0?s+1:s),t.setActiveItem(),tR(i,"last-active")}else t.setCaret(t.caretPos+e)})}),tb.define("dropdown_input",function(){let t=this;t.settings.shouldOpen=!0,t.hook("before","setup",()=>{t.focus_node=t.control,tX(t.control_input,"dropdown-input");let e=tJ('<div class="dropdown-input-wrap">');e.append(t.control_input),t.dropdown.insertBefore(e,t.dropdown.firstChild);let i=tJ('<input class="items-placeholder" tabindex="-1" />');i.placeholder=t.settings.placeholder||"",t.control.append(i)}),t.on("initialize",()=>{t.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case 27:t.isOpen&&(tQ(e,!0),t.close()),t.clearActiveItems();return;case 9:t.focus_node.tabIndex=-1}return t.onKeyDown.call(t,e)}),t.on("blur",()=>{t.focus_node.tabIndex=t.isDisabled?-1:t.tabIndex}),t.on("dropdown_open",()=>{t.control_input.focus()});let e=t.onBlur;t.hook("instead","onBlur",i=>{if(!i||i.relatedTarget!=t.control_input)return e.call(t)}),tG(t.control_input,"blur",()=>t.onBlur()),t.hook("before","close",()=>{t.isOpen&&t.focus_node.focus({preventScroll:!0})})})}),tb.define("input_autogrow",function(){var t=this;t.on("initialize",()=>{var e=document.createElement("span"),i=t.control_input;for(let s of(e.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",t.wrapper.appendChild(e),["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]))e.style[s]=i.style[s];var s=()=>{e.textContent=i.value,i.style.width=e.clientWidth+"px"};s(),t.on("update item_add item_remove",s),t0(i,"input",s),t0(i,"keyup",s),t0(i,"blur",s),t0(i,"update",s)})}),tb.define("no_backspace_delete",function(){var t=this,e=t.deleteSelection;this.hook("instead","deleteSelection",i=>!!t.activeItems.length&&e.call(t,i))}),tb.define("no_active_items",function(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}),tb.define("optgroup_columns",function(){var t=this,e=t.onKeyDown;t.hook("instead","onKeyDown",i=>{var s,n,r,o;if(!t.isOpen||37!==i.keyCode&&39!==i.keyCode)return e.call(t,i);t.ignoreHover=!0,o=t1(t.activeOption,"[data-group]"),s=t9(t.activeOption,"[data-selectable]"),o&&(o=37===i.keyCode?o.previousSibling:o.nextSibling)&&(n=(r=o.querySelectorAll("[data-selectable]"))[Math.min(r.length-1,s)])&&t.setActiveOption(n)})}),tb.define("remove_button",function(t){let e=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},t);var i=this;if(e.append){var s='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+t3(e.title)+'">'+e.label+"</a>";i.hook("after","setupTemplates",()=>{var t=i.settings.render.item;i.settings.render.item=(e,n)=>{var r=t5(t.call(i,e,n)),o=t5(s);return r.appendChild(o),t2(o,"mousedown",t=>{t7(t,!0)}),t2(o,"click",t=>{!i.isLocked&&(t7(t,!0),!i.isLocked&&i.shouldDelete([r],t)&&(i.removeItem(r),i.refreshOptions(!1),i.inputState()))}),r}})}}),tb.define("restore_on_backspace",function(t){let e=this,i=Object.assign({text:t=>t[e.settings.labelField]},t);e.on("item_remove",function(t){if(e.isFocused&&""===e.control_input.value.trim()){var s=e.options[t];s&&e.setTextboxValue(i.text.call(e,s))}})}),tb.define("virtual_scroll",function(){let t=this,e=t.canLoad,i=t.clearActiveOption,s=t.loadCallback;var n,r,o={},l=!1,a=[];if(t.settings.shouldLoadMore||(t.settings.shouldLoadMore=()=>{if(n.clientHeight/(n.scrollHeight-n.scrollTop)>.9)return!0;if(t.activeOption){var e=t.selectable();if(Array.from(e).indexOf(t.activeOption)>=e.length-2)return!0}return!1}),!t.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";t.settings.sortField=[{field:"$order"},{field:"$score"}];let d=e=>("number"!=typeof t.settings.maxOptions||!(n.children.length>=t.settings.maxOptions))&&e in o&&!!o[e],c=(e,i)=>!!(t.items.indexOf(i)>=0||a.indexOf(i)>=0);t.setNextUrl=(t,e)=>{o[t]=e},t.getUrl=e=>{if(e in o){let t=o[e];return o[e]=!1,t}return t.clearPagination(),t.settings.firstUrl.call(t,e)},t.clearPagination=()=>{o={}},t.hook("instead","clearActiveOption",()=>{if(!l)return i.call(t)}),t.hook("instead","canLoad",i=>i in o?d(i):e.call(t,i)),t.hook("instead","loadCallback",(e,i)=>{if(l){if(r){let i=e[0];void 0!==i&&(r.dataset.value=i[t.settings.valueField])}}else t.clearOptions(c);s.call(t,e,i),l=!1}),t.hook("after","refreshOptions",()=>{var e;let i=t.lastValue;d(i)?(e=t.render("loading_more",{query:i}))&&(e.setAttribute("data-selectable",""),r=e):i in o&&!n.querySelector(".no-results")&&(e=t.render("no_more_results",{query:i})),e&&(t4(e,t.settings.optionClass),n.append(e))}),t.on("initialize",()=>{a=Object.keys(t.options),n=t.dropdown_content,t.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},t.settings.render),n.addEventListener("scroll",()=>{t.settings.shouldLoadMore.call(t)&&d(t.lastValue)&&(l||(l=!0,t.load.call(t,t.lastValue)))})})});let ei=window.PluginBaseClass;class es extends ei{static #t=this.options={desktop:!0,mobile:!1};init(){new tb(this.el,{})}}}}]);