<sw-page class="moorl-client-detail">
    <template #smart-bar-actions>
        <sw-button :routerLink="{ name: 'moorl.client.list' }">
            {{ $tc('moorl-foundation.buttons.cancelButtonText') }}
        </sw-button>

        <sw-button-process
                :isLoading="isLoading"
                :processSuccess="processSuccess"
                variant="primary"
                @update:process-success="saveFinish"
                @click="onClickSave"
        >
            {{ $tc('moorl-foundation.buttons.saveButtonText') }}
        </sw-button-process>

        <sw-button @click="onClickTest" :disabled="isEdit">
            {{ $tc('moorl-foundation.buttons.testConnection') }}
        </sw-button>
    </template>

    <template #content>
        <sw-card-view>
            <sw-card v-if="item" :isLoading="isLoading" :title="$tc('moorl-client.card.general')">
                <sw-switch-field
                        :label="$tc('moorl-client.properties.active')"
                        v-model:value="item.active"
                />

                <sw-text-field
                        :label="$tc('moorl-client.properties.name')"
                        v-model:value="item.name"
                        required
                        validation="required"
                />

                <moorl-select-field
                        v-if="options.length"
                        :label="$tc('moorl-client.properties.type')"
                        v-model:value="item.type"
                        @update:value="resetConfig"
                        :customSet="options"
                        valueProperty="name"
                        labelProperty="name"
                />
            </sw-card>

            <sw-card v-if="item && item.config" :isLoading="isLoading" :title="$tc('moorl-client.card.config')">
                <template v-for="option in options">
                    <template v-if="item.type == option.name">
                        <template v-for="config in option.configTemplate">
                            <sw-form-field-renderer
                                    v-model:value="item.config[config.name]"
                                    :label="$tc('moorl-client.properties.' + config.name)"
                                    :config="config"
                            />
                        </template>
                    </template>
                </template>
            </sw-card>
        </sw-card-view>
    </template>
</sw-page>
