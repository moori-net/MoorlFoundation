<sw-page class="moorl-sorting-detail">
    <template #smart-bar-actions>
        <sw-button :routerLink="{ name: 'moorl.sorting.list' }">
            {{ $tc('moorl-foundation.buttons.cancelButtonText') }}
        </sw-button>

        <sw-button-process
                :isLoading="isLoading"
                :processSuccess="processSuccess"
                variant="primary"
                @process-finish="saveFinish"
                @click="onClickSave">
            {{ $tc('moorl-foundation.buttons.saveButtonText') }}
        </sw-button-process>
    </template>

    <template #language-switch>
        <sw-language-switch #language-switch
                            :disabled="item && item.isNew()"
                            @on-change="onChangeLanguage">
        </sw-language-switch>
    </template>

    <template #content>
        <sw-card-view>
            <sw-card v-if="item" :isLoading="isLoading" :title="$tc('moorl-foundation.label.generalCard')">
                <sw-switch-field
                        bordered
                        :label="$tc('moorl-sorting.properties.active')"
                        v-model:value="item.active"
                />

                <sw-single-select
                        v-model:value="item.entity"
                        valueProperty="name"
                        labelProperty="name"
                        :options="entityOptions"
                        :label="$tc('moorl-sorting.properties.entity')"
                        @on-change="onChangeLanguage"
                        :required="true"
                />

                <sw-text-field
                        :label="$tc('moorl-sorting.properties.key')"
                        v-model:value="item.key"
                        :required="true"
                />

                <sw-text-field
                        :label="$tc('moorl-sorting.properties.label')"
                        v-model:value="item.label"
                        :required="true"
                />

                <sw-number-field
                        :label="$tc('moorl-sorting.properties.priority')"
                        v-model:value="item.priority"
                        :required="true"
                />
            </sw-card>

            <moorl-sorting-option-criteria-grid
                    v-if="item.entity"
                    :item="item"
                    @criteria-delete="onDeleteCriteria"
                    @criteria-add="onAddCriteria"
                    @inline-edit-save="onSave"
                    @inline-edit-cancel="onCancelEditCriteria"
            />
        </sw-card-view>

        <sw-settings-listing-delete-modal
                v-if="toBeDeletedCriteria"
                :title="$tc('sw-settings-listing.base.delete.modalTitle')"
                :description="$tc('sw-settings-listing.base.delete.modalDescription')"
                @cancel="toBeDeletedCriteria = null"
                @delete="onConfirmDeleteCriteria"
        />
    </template>
</sw-page>
